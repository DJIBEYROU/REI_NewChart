var Al=Object.defineProperty;var Nl=(e,t,n)=>t in e?Al(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Bn=(e,t,n)=>(Nl(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function re(){}const Pn=e=>e;function Co(e){return e()}function ai(){return Object.create(null)}function We(e){e.forEach(Co)}function Kt(e){return typeof e=="function"}function ze(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function El(e){return Object.keys(e).length===0}function ui(e){const t=typeof e=="string"&&e.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return t?[parseFloat(t[1]),t[2]||"px"]:[e,"px"]}const Ao=typeof window<"u";let Ur=Ao?()=>window.performance.now():()=>Date.now(),Pr=Ao?e=>requestAnimationFrame(e):re;const wt=new Set;function No(e){wt.forEach(t=>{t.c(e)||(wt.delete(t),t.f())}),wt.size!==0&&Pr(No)}function Yr(e){let t;return wt.size===0&&Pr(No),{promise:new Promise(n=>{wt.add(t={c:e,f:n})}),abort(){wt.delete(t)}}}function E(e,t){e.appendChild(t)}function Eo(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function Fl(e){const t=V("style");return t.textContent="/* empty */",Ll(Eo(e),t),t.sheet}function Ll(e,t){return E(e.head||e,t),t.sheet}function q(e,t,n){e.insertBefore(t,n||null)}function z(e){e.parentNode&&e.parentNode.removeChild(e)}function tt(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function V(e){return document.createElement(e)}function fe(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function me(e){return document.createTextNode(e)}function ae(){return me(" ")}function Lt(){return me("")}function Ue(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function m(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Ul(e){return Array.from(e.childNodes)}function xe(e,t){t=""+t,e.data!==t&&(e.data=t)}function Pl(e,t){e.value=t??""}function Ye(e,t,n,r){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,r?"important":"")}function si(e,t,n){for(let r=0;r<e.options.length;r+=1){const i=e.options[r];if(i.__value===t){i.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}let jt;function Yl(){if(jt===void 0){jt=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{jt=!0}}return jt}function Ol(e,t){getComputedStyle(e).position==="static"&&(e.style.position="relative");const r=V("iframe");r.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),r.setAttribute("aria-hidden","true"),r.tabIndex=-1;const i=Yl();let o;return i?(r.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",o=Ue(window,"message",l=>{l.source===r.contentWindow&&t()})):(r.src="about:blank",r.onload=()=>{o=Ue(r.contentWindow,"resize",t),t()}),E(e,r),()=>{(i||o&&r.contentWindow)&&o(),z(r)}}function Fo(e,t,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:r})}const hn=new Map;let gn=0;function Hl(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}function Il(e,t){const n={stylesheet:Fl(t),rules:{}};return hn.set(e,n),n}function dn(e,t,n,r,i,o,l,u=0){const a=16.666/r;let s=`{
`;for(let p=0;p<=1;p+=a){const _=t+(n-t)*o(p);s+=p*100+`%{${l(_,1-_)}}
`}const f=s+`100% {${l(n,1-n)}}
}`,c=`__svelte_${Hl(f)}_${u}`,h=Eo(e),{stylesheet:g,rules:d}=hn.get(h)||Il(h,e);d[c]||(d[c]=!0,g.insertRule(`@keyframes ${c} ${f}`,g.cssRules.length));const w=e.style.animation||"";return e.style.animation=`${w?`${w}, `:""}${c} ${r}ms linear ${i}ms 1 both`,gn+=1,c}function mn(e,t){const n=(e.style.animation||"").split(", "),r=n.filter(t?o=>o.indexOf(t)<0:o=>o.indexOf("__svelte")===-1),i=n.length-r.length;i&&(e.style.animation=r.join(", "),gn-=i,gn||Wl())}function Wl(){Pr(()=>{gn||(hn.forEach(e=>{const{ownerNode:t}=e.stylesheet;t&&z(t)}),hn.clear())})}let Xt;function zt(e){Xt=e}function Or(){if(!Xt)throw new Error("Function called outside component initialization");return Xt}function Yn(e){Or().$$.on_mount.push(e)}function Lo(e){Or().$$.after_update.push(e)}function zl(){const e=Or();return(t,n,{cancelable:r=!1}={})=>{const i=e.$$.callbacks[t];if(i){const o=Fo(t,n,{cancelable:r});return i.slice().forEach(l=>{l.call(e,o)}),!o.defaultPrevented}return!0}}const pt=[],Oe=[];let vt=[];const hr=[],Rl=Promise.resolve();let gr=!1;function ql(){gr||(gr=!0,Rl.then(Uo))}function Ie(e){vt.push(e)}function Rt(e){hr.push(e)}const Jn=new Set;let ct=0;function Uo(){if(ct!==0)return;const e=Xt;do{try{for(;ct<pt.length;){const t=pt[ct];ct++,zt(t),Xl(t.$$)}}catch(t){throw pt.length=0,ct=0,t}for(zt(null),pt.length=0,ct=0;Oe.length;)Oe.pop()();for(let t=0;t<vt.length;t+=1){const n=vt[t];Jn.has(n)||(Jn.add(n),n())}vt.length=0}while(pt.length);for(;hr.length;)hr.pop()();gr=!1,Jn.clear(),zt(e)}function Xl(e){if(e.fragment!==null){e.update(),We(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Ie)}}function Vl(e){const t=[],n=[];vt.forEach(r=>e.indexOf(r)===-1?t.push(r):n.push(r)),n.forEach(r=>r()),vt=t}let Ut;function Hr(){return Ut||(Ut=Promise.resolve(),Ut.then(()=>{Ut=null})),Ut}function it(e,t,n){e.dispatchEvent(Fo(`${t?"intro":"outro"}${n}`))}const ln=new Set;let Pe;function bt(){Pe={r:0,c:[],p:Pe}}function kt(){Pe.r||We(Pe.c),Pe=Pe.p}function le(e,t){e&&e.i&&(ln.delete(e),e.i(t))}function ce(e,t,n,r){if(e&&e.o){if(ln.has(e))return;ln.add(e),Pe.c.push(()=>{ln.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}else r&&r()}const Ir={duration:0};function Gl(e,t,n){const r={direction:"in"};let i=t(e,n,r),o=!1,l,u,a=0;function s(){l&&mn(e,l)}function f(){const{delay:h=0,duration:g=300,easing:d=Pn,tick:w=re,css:p}=i||Ir;p&&(l=dn(e,0,1,g,h,d,p,a++)),w(0,1);const _=Ur()+h,b=_+g;u&&u.abort(),o=!0,Ie(()=>it(e,!0,"start")),u=Yr(y=>{if(o){if(y>=b)return w(1,0),it(e,!0,"end"),s(),o=!1;if(y>=_){const x=d((y-_)/g);w(x,1-x)}}return o})}let c=!1;return{start(){c||(c=!0,mn(e),Kt(i)?(i=i(r),Hr().then(f)):f())},invalidate(){c=!1},end(){o&&(s(),o=!1)}}}function Bl(e,t,n){const r={direction:"out"};let i=t(e,n,r),o=!0,l;const u=Pe;u.r+=1;let a;function s(){const{delay:f=0,duration:c=300,easing:h=Pn,tick:g=re,css:d}=i||Ir;d&&(l=dn(e,1,0,c,f,h,d));const w=Ur()+f,p=w+c;Ie(()=>it(e,!1,"start")),"inert"in e&&(a=e.inert,e.inert=!0),Yr(_=>{if(o){if(_>=p)return g(0,1),it(e,!1,"end"),--u.r||We(u.c),!1;if(_>=w){const b=h((_-w)/c);g(1-b,b)}}return o})}return Kt(i)?Hr().then(()=>{i=i(r),s()}):s(),{end(f){f&&"inert"in e&&(e.inert=a),f&&i.tick&&i.tick(1,0),o&&(l&&mn(e,l),o=!1)}}}function pn(e,t,n,r){let o=t(e,n,{direction:"both"}),l=r?0:1,u=null,a=null,s=null,f;function c(){s&&mn(e,s)}function h(d,w){const p=d.b-l;return w*=Math.abs(p),{a:l,b:d.b,d:p,duration:w,start:d.start,end:d.start+w,group:d.group}}function g(d){const{delay:w=0,duration:p=300,easing:_=Pn,tick:b=re,css:y}=o||Ir,x={start:Ur()+w,b:d};d||(x.group=Pe,Pe.r+=1),"inert"in e&&(d?f!==void 0&&(e.inert=f):(f=e.inert,e.inert=!0)),u||a?a=x:(y&&(c(),s=dn(e,l,d,p,w,_,y)),d&&b(0,1),u=h(x,p),Ie(()=>it(e,d,"start")),Yr(M=>{if(a&&M>a.start&&(u=h(a,p),a=null,it(e,u.b,"start"),y&&(c(),s=dn(e,l,u.b,u.duration,0,_,o.css))),u){if(M>=u.end)b(l=u.b,1-l),it(e,u.b,"end"),a||(u.b?c():--u.group.r||We(u.group.c)),u=null;else if(M>=u.start){const v=M-u.start;l=u.a+u.d*_(v/u.duration),b(l,1-l)}}return!!(u||a)}))}return{run(d){Kt(o)?Hr().then(()=>{o=o({direction:d?"in":"out"}),g(d)}):g(d)},end(){c(),u=a=null}}}function be(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function qt(e,t,n){const r=e.$$.props[t];r!==void 0&&(e.$$.bound[r]=n,n(e.$$.ctx[r]))}function Se(e){e&&e.c()}function ke(e,t,n){const{fragment:r,after_update:i}=e.$$;r&&r.m(t,n),Ie(()=>{const o=e.$$.on_mount.map(Co).filter(Kt);e.$$.on_destroy?e.$$.on_destroy.push(...o):We(o),e.$$.on_mount=[]}),i.forEach(Ie)}function Me(e,t){const n=e.$$;n.fragment!==null&&(Vl(n.after_update),We(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Jl(e,t){e.$$.dirty[0]===-1&&(pt.push(e),ql(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function $e(e,t,n,r,i,o,l,u=[-1]){const a=Xt;zt(e);const s=e.$$={fragment:null,ctx:[],props:o,update:re,not_equal:i,bound:ai(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(a?a.$$.context:[])),callbacks:ai(),dirty:u,skip_bound:!1,root:t.target||a.$$.root};l&&l(s.root);let f=!1;if(s.ctx=n?n(e,t.props||{},(c,h,...g)=>{const d=g.length?g[0]:h;return s.ctx&&i(s.ctx[c],s.ctx[c]=d)&&(!s.skip_bound&&s.bound[c]&&s.bound[c](d),f&&Jl(e,c)),h}):[],s.update(),f=!0,We(s.before_update),s.fragment=r?r(s.ctx):!1,t.target){if(t.hydrate){const c=Ul(t.target);s.fragment&&s.fragment.l(c),c.forEach(z)}else s.fragment&&s.fragment.c();t.intro&&le(e.$$.fragment),ke(e,t.target,t.anchor),Uo()}zt(a)}class Qe{constructor(){Bn(this,"$$");Bn(this,"$$set")}$destroy(){Me(this,1),this.$destroy=re}$on(t,n){if(!Kt(n))return re;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(t){this.$$set&&!El(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Kl="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Kl);function an(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Zl(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Wr(e){let t,n,r;e.length!==2?(t=an,n=(u,a)=>an(e(u),a),r=(u,a)=>e(u)-a):(t=e===an||e===Zl?e:$l,n=e,r=e);function i(u,a,s=0,f=u.length){if(s<f){if(t(a,a)!==0)return f;do{const c=s+f>>>1;n(u[c],a)<0?s=c+1:f=c}while(s<f)}return s}function o(u,a,s=0,f=u.length){if(s<f){if(t(a,a)!==0)return f;do{const c=s+f>>>1;n(u[c],a)<=0?s=c+1:f=c}while(s<f)}return s}function l(u,a,s=0,f=u.length){const c=i(u,a,s,f-1);return c>s&&r(u[c-1],a)>-r(u[c],a)?c-1:c}return{left:i,center:l,right:o}}function $l(){return 0}function Ql(e){return e===null?NaN:+e}const jl=Wr(an),ea=jl.right;Wr(Ql).center;const ta=ea;function na(e,t){let n,r;if(t===void 0)for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let o of e)(o=t(o,++i,e))!=null&&(n===void 0?o>=o&&(n=r=o):(n>o&&(n=o),r<o&&(r=o)))}return[n,r]}class dr extends Map{constructor(t,n=oa){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(fi(this,t))}has(t){return super.has(fi(this,t))}set(t,n){return super.set(ra(this,t),n)}delete(t){return super.delete(ia(this,t))}}function fi({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function ra({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function ia({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function oa(e){return e!==null&&typeof e=="object"?e.valueOf():e}function la(e){return e}function aa(e,...t){return ua(e,Array.from,la,t)}function ua(e,t,n,r){return function i(o,l){if(l>=r.length)return n(o);const u=new dr,a=r[l++];let s=-1;for(const f of o){const c=a(f,++s,o),h=u.get(c);h?h.push(f):u.set(c,[f])}for(const[f,c]of u)u.set(f,i(c,l));return t(u)}(e,0)}const sa=Math.sqrt(50),fa=Math.sqrt(10),ca=Math.sqrt(2);function _n(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),l=o>=sa?10:o>=fa?5:o>=ca?2:1;let u,a,s;return i<0?(s=Math.pow(10,-i)/l,u=Math.round(e*s),a=Math.round(t*s),u/s<e&&++u,a/s>t&&--a,s=-s):(s=Math.pow(10,i)*l,u=Math.round(e/s),a=Math.round(t/s),u*s<e&&++u,a*s>t&&--a),a<u&&.5<=n&&n<2?_n(e,t,n*2):[u,a,s]}function ha(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,o,l]=r?_n(t,e,n):_n(e,t,n);if(!(o>=i))return[];const u=o-i+1,a=new Array(u);if(r)if(l<0)for(let s=0;s<u;++s)a[s]=(o-s)/-l;else for(let s=0;s<u;++s)a[s]=(o-s)*l;else if(l<0)for(let s=0;s<u;++s)a[s]=(i+s)/-l;else for(let s=0;s<u;++s)a[s]=(i+s)*l;return a}function mr(e,t,n){return t=+t,e=+e,n=+n,_n(e,t,n)[2]}function pr(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?mr(t,e,n):mr(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function _r(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function ci(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function zr(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}const hi=Symbol("implicit");function Po(){var e=new dr,t=[],n=[],r=hi;function i(o){let l=e.get(o);if(l===void 0){if(r!==hi)return r;e.set(o,l=t.push(o)-1)}return n[l%n.length]}return i.domain=function(o){if(!arguments.length)return t.slice();t=[],e=new dr;for(const l of o)e.has(l)||e.set(l,t.push(l)-1);return i},i.range=function(o){return arguments.length?(n=Array.from(o),i):n.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return Po(t,n).unknown(r)},zr.apply(i,arguments),i}function Rr(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Yo(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Zt(){}var Vt=.7,yn=1/Vt,Mt="\\s*([+-]?\\d+)\\s*",Gt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",He="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ga=/^#([0-9a-f]{3,8})$/,da=new RegExp(`^rgb\\(${Mt},${Mt},${Mt}\\)$`),ma=new RegExp(`^rgb\\(${He},${He},${He}\\)$`),pa=new RegExp(`^rgba\\(${Mt},${Mt},${Mt},${Gt}\\)$`),_a=new RegExp(`^rgba\\(${He},${He},${He},${Gt}\\)$`),ya=new RegExp(`^hsl\\(${Gt},${He},${He}\\)$`),wa=new RegExp(`^hsla\\(${Gt},${He},${He},${Gt}\\)$`),gi={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Rr(Zt,lt,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:di,formatHex:di,formatHex8:va,formatHsl:ba,formatRgb:mi,toString:mi});function di(){return this.rgb().formatHex()}function va(){return this.rgb().formatHex8()}function ba(){return Oo(this).formatHsl()}function mi(){return this.rgb().formatRgb()}function lt(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=ga.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?pi(t):n===3?new De(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?en(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?en(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=da.exec(e))?new De(t[1],t[2],t[3],1):(t=ma.exec(e))?new De(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=pa.exec(e))?en(t[1],t[2],t[3],t[4]):(t=_a.exec(e))?en(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=ya.exec(e))?wi(t[1],t[2]/100,t[3]/100,1):(t=wa.exec(e))?wi(t[1],t[2]/100,t[3]/100,t[4]):gi.hasOwnProperty(e)?pi(gi[e]):e==="transparent"?new De(NaN,NaN,NaN,0):null}function pi(e){return new De(e>>16&255,e>>8&255,e&255,1)}function en(e,t,n,r){return r<=0&&(e=t=n=NaN),new De(e,t,n,r)}function ka(e){return e instanceof Zt||(e=lt(e)),e?(e=e.rgb(),new De(e.r,e.g,e.b,e.opacity)):new De}function yr(e,t,n,r){return arguments.length===1?ka(e):new De(e,t,n,r??1)}function De(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Rr(De,yr,Yo(Zt,{brighter(e){return e=e==null?yn:Math.pow(yn,e),new De(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Vt:Math.pow(Vt,e),new De(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new De(ot(this.r),ot(this.g),ot(this.b),wn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:_i,formatHex:_i,formatHex8:Ma,formatRgb:yi,toString:yi}));function _i(){return`#${rt(this.r)}${rt(this.g)}${rt(this.b)}`}function Ma(){return`#${rt(this.r)}${rt(this.g)}${rt(this.b)}${rt((isNaN(this.opacity)?1:this.opacity)*255)}`}function yi(){const e=wn(this.opacity);return`${e===1?"rgb(":"rgba("}${ot(this.r)}, ${ot(this.g)}, ${ot(this.b)}${e===1?")":`, ${e})`}`}function wn(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function ot(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function rt(e){return e=ot(e),(e<16?"0":"")+e.toString(16)}function wi(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Fe(e,t,n,r)}function Oo(e){if(e instanceof Fe)return new Fe(e.h,e.s,e.l,e.opacity);if(e instanceof Zt||(e=lt(e)),!e)return new Fe;if(e instanceof Fe)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),l=NaN,u=o-i,a=(o+i)/2;return u?(t===o?l=(n-r)/u+(n<r)*6:n===o?l=(r-t)/u+2:l=(t-n)/u+4,u/=a<.5?o+i:2-o-i,l*=60):u=a>0&&a<1?0:l,new Fe(l,u,a,e.opacity)}function Da(e,t,n,r){return arguments.length===1?Oo(e):new Fe(e,t,n,r??1)}function Fe(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Rr(Fe,Da,Yo(Zt,{brighter(e){return e=e==null?yn:Math.pow(yn,e),new Fe(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Vt:Math.pow(Vt,e),new Fe(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new De(Kn(e>=240?e-240:e+120,i,r),Kn(e,i,r),Kn(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Fe(vi(this.h),tn(this.s),tn(this.l),wn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=wn(this.opacity);return`${e===1?"hsl(":"hsla("}${vi(this.h)}, ${tn(this.s)*100}%, ${tn(this.l)*100}%${e===1?")":`, ${e})`}`}}));function vi(e){return e=(e||0)%360,e<0?e+360:e}function tn(e){return Math.max(0,Math.min(1,e||0))}function Kn(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const qr=e=>()=>e;function xa(e,t){return function(n){return e+n*t}}function Sa(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function Ta(e){return(e=+e)==1?Ho:function(t,n){return n-t?Sa(t,n,e):qr(isNaN(t)?n:t)}}function Ho(e,t){var n=t-e;return n?xa(e,n):qr(isNaN(e)?t:e)}const vn=function e(t){var n=Ta(t);function r(i,o){var l=n((i=yr(i)).r,(o=yr(o)).r),u=n(i.g,o.g),a=n(i.b,o.b),s=Ho(i.opacity,o.opacity);return function(f){return i.r=l(f),i.g=u(f),i.b=a(f),i.opacity=s(f),i+""}}return r.gamma=e,r}(1);function Ca(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=e[i]*(1-o)+t[i]*o;return r}}function Aa(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Na(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),o=new Array(n),l;for(l=0;l<r;++l)i[l]=On(e[l],t[l]);for(;l<n;++l)o[l]=t[l];return function(u){for(l=0;l<r;++l)o[l]=i[l](u);return o}}function Ea(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Ee(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Fa(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=On(e[i],t[i]):r[i]=t[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var wr=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Zn=new RegExp(wr.source,"g");function La(e){return function(){return e}}function Ua(e){return function(t){return e(t)+""}}function Io(e,t){var n=wr.lastIndex=Zn.lastIndex=0,r,i,o,l=-1,u=[],a=[];for(e=e+"",t=t+"";(r=wr.exec(e))&&(i=Zn.exec(t));)(o=i.index)>n&&(o=t.slice(n,o),u[l]?u[l]+=o:u[++l]=o),(r=r[0])===(i=i[0])?u[l]?u[l]+=i:u[++l]=i:(u[++l]=null,a.push({i:l,x:Ee(r,i)})),n=Zn.lastIndex;return n<t.length&&(o=t.slice(n),u[l]?u[l]+=o:u[++l]=o),u.length<2?a[0]?Ua(a[0].x):La(t):(t=a.length,function(s){for(var f=0,c;f<t;++f)u[(c=a[f]).i]=c.x(s);return u.join("")})}function On(e,t){var n=typeof t,r;return t==null||n==="boolean"?qr(t):(n==="number"?Ee:n==="string"?(r=lt(t))?(t=r,vn):Io:t instanceof lt?vn:t instanceof Date?Ea:Aa(t)?Ca:Array.isArray(t)?Na:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Fa:Ee)(e,t)}function Pa(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var bi=180/Math.PI,vr={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Wo(e,t,n,r,i,o){var l,u,a;return(l=Math.sqrt(e*e+t*t))&&(e/=l,t/=l),(a=e*n+t*r)&&(n-=e*a,r-=t*a),(u=Math.sqrt(n*n+r*r))&&(n/=u,r/=u,a/=u),e*r<t*n&&(e=-e,t=-t,a=-a,l=-l),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*bi,skewX:Math.atan(a)*bi,scaleX:l,scaleY:u}}var nn;function Ya(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?vr:Wo(t.a,t.b,t.c,t.d,t.e,t.f)}function Oa(e){return e==null||(nn||(nn=document.createElementNS("http://www.w3.org/2000/svg","g")),nn.setAttribute("transform",e),!(e=nn.transform.baseVal.consolidate()))?vr:(e=e.matrix,Wo(e.a,e.b,e.c,e.d,e.e,e.f))}function zo(e,t,n,r){function i(s){return s.length?s.pop()+" ":""}function o(s,f,c,h,g,d){if(s!==c||f!==h){var w=g.push("translate(",null,t,null,n);d.push({i:w-4,x:Ee(s,c)},{i:w-2,x:Ee(f,h)})}else(c||h)&&g.push("translate("+c+t+h+n)}function l(s,f,c,h){s!==f?(s-f>180?f+=360:f-s>180&&(s+=360),h.push({i:c.push(i(c)+"rotate(",null,r)-2,x:Ee(s,f)})):f&&c.push(i(c)+"rotate("+f+r)}function u(s,f,c,h){s!==f?h.push({i:c.push(i(c)+"skewX(",null,r)-2,x:Ee(s,f)}):f&&c.push(i(c)+"skewX("+f+r)}function a(s,f,c,h,g,d){if(s!==c||f!==h){var w=g.push(i(g)+"scale(",null,",",null,")");d.push({i:w-4,x:Ee(s,c)},{i:w-2,x:Ee(f,h)})}else(c!==1||h!==1)&&g.push(i(g)+"scale("+c+","+h+")")}return function(s,f){var c=[],h=[];return s=e(s),f=e(f),o(s.translateX,s.translateY,f.translateX,f.translateY,c,h),l(s.rotate,f.rotate,c,h),u(s.skewX,f.skewX,c,h),a(s.scaleX,s.scaleY,f.scaleX,f.scaleY,c,h),s=f=null,function(g){for(var d=-1,w=h.length,p;++d<w;)c[(p=h[d]).i]=p.x(g);return c.join("")}}}var Ha=zo(Ya,"px, ","px)","deg)"),Ia=zo(Oa,", ",")",")");function Wa(e){return function(){return e}}function za(e){return+e}var ki=[0,1];function _t(e){return e}function br(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Wa(isNaN(t)?NaN:.5)}function Ra(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function qa(e,t,n){var r=e[0],i=e[1],o=t[0],l=t[1];return i<r?(r=br(i,r),o=n(l,o)):(r=br(r,i),o=n(o,l)),function(u){return o(r(u))}}function Xa(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),o=new Array(r),l=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++l<r;)i[l]=br(e[l],e[l+1]),o[l]=n(t[l],t[l+1]);return function(u){var a=ta(e,u,1,r)-1;return o[a](i[a](u))}}function Ro(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Va(){var e=ki,t=ki,n=On,r,i,o,l=_t,u,a,s;function f(){var h=Math.min(e.length,t.length);return l!==_t&&(l=Ra(e[0],e[h-1])),u=h>2?Xa:qa,a=s=null,c}function c(h){return h==null||isNaN(h=+h)?o:(a||(a=u(e.map(r),t,n)))(r(l(h)))}return c.invert=function(h){return l(i((s||(s=u(t,e.map(r),Ee)))(h)))},c.domain=function(h){return arguments.length?(e=Array.from(h,za),f()):e.slice()},c.range=function(h){return arguments.length?(t=Array.from(h),f()):t.slice()},c.rangeRound=function(h){return t=Array.from(h),n=Pa,f()},c.clamp=function(h){return arguments.length?(l=h?!0:_t,f()):l!==_t},c.interpolate=function(h){return arguments.length?(n=h,f()):n},c.unknown=function(h){return arguments.length?(o=h,c):o},function(h,g){return r=h,i=g,f()}}function qo(){return Va()(_t,_t)}function Ga(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function bn(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function xt(e){return e=bn(Math.abs(e)),e?e[1]:NaN}function Ba(e,t){return function(n,r){for(var i=n.length,o=[],l=0,u=e[0],a=0;i>0&&u>0&&(a+u+1>r&&(u=Math.max(1,r-a)),o.push(n.substring(i-=u,i+u)),!((a+=u+1)>r));)u=e[l=(l+1)%e.length];return o.reverse().join(t)}}function Ja(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var Ka=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function kn(e){if(!(t=Ka.exec(e)))throw new Error("invalid format: "+e);var t;return new Xr({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}kn.prototype=Xr.prototype;function Xr(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Xr.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Za(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var Xo;function $a(e,t){var n=bn(e,t);if(!n)return e+"";var r=n[0],i=n[1],o=i-(Xo=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,l=r.length;return o===l?r:o>l?r+new Array(o-l+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+bn(e,Math.max(0,t+o-1))[0]}function Mi(e,t){var n=bn(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Di={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Ga,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Mi(e*100,t),r:Mi,s:$a,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function xi(e){return e}var Si=Array.prototype.map,Ti=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Qa(e){var t=e.grouping===void 0||e.thousands===void 0?xi:Ba(Si.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?xi:Ja(Si.call(e.numerals,String)),l=e.percent===void 0?"%":e.percent+"",u=e.minus===void 0?"−":e.minus+"",a=e.nan===void 0?"NaN":e.nan+"";function s(c){c=kn(c);var h=c.fill,g=c.align,d=c.sign,w=c.symbol,p=c.zero,_=c.width,b=c.comma,y=c.precision,x=c.trim,M=c.type;M==="n"?(b=!0,M="g"):Di[M]||(y===void 0&&(y=12),x=!0,M="g"),(p||h==="0"&&g==="=")&&(p=!0,h="0",g="=");var v=w==="$"?n:w==="#"&&/[boxX]/.test(M)?"0"+M.toLowerCase():"",S=w==="$"?r:/[%p]/.test(M)?l:"",Y=Di[M],X=/[defgprs%]/.test(M);y=y===void 0?6:/[gprs]/.test(M)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y));function F(T){var L=v,H=S,R,W,k;if(M==="c")H=Y(T)+H,T="";else{T=+T;var C=T<0||1/T<0;if(T=isNaN(T)?a:Y(Math.abs(T),y),x&&(T=Za(T)),C&&+T==0&&d!=="+"&&(C=!1),L=(C?d==="("?d:u:d==="-"||d==="("?"":d)+L,H=(M==="s"?Ti[8+Xo/3]:"")+H+(C&&d==="("?")":""),X){for(R=-1,W=T.length;++R<W;)if(k=T.charCodeAt(R),48>k||k>57){H=(k===46?i+T.slice(R+1):T.slice(R))+H,T=T.slice(0,R);break}}}b&&!p&&(T=t(T,1/0));var B=L.length+T.length+H.length,K=B<_?new Array(_-B+1).join(h):"";switch(b&&p&&(T=t(K+T,K.length?_-H.length:1/0),K=""),g){case"<":T=L+T+H+K;break;case"=":T=L+K+T+H;break;case"^":T=K.slice(0,B=K.length>>1)+L+T+H+K.slice(B);break;default:T=K+L+T+H;break}return o(T)}return F.toString=function(){return c+""},F}function f(c,h){var g=s((c=kn(c),c.type="f",c)),d=Math.max(-8,Math.min(8,Math.floor(xt(h)/3)))*3,w=Math.pow(10,-d),p=Ti[8+d/3];return function(_){return g(w*_)+p}}return{format:s,formatPrefix:f}}var rn,Vo,Go;ja({thousands:",",grouping:[3],currency:["$",""]});function ja(e){return rn=Qa(e),Vo=rn.format,Go=rn.formatPrefix,rn}function eu(e){return Math.max(0,-xt(Math.abs(e)))}function tu(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(xt(t)/3)))*3-xt(Math.abs(e)))}function nu(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,xt(t)-xt(e))+1}function ru(e,t,n,r){var i=pr(e,t,n),o;switch(r=kn(r??",f"),r.type){case"s":{var l=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(o=tu(i,l))&&(r.precision=o),Go(r,l)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=nu(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=eu(i))&&(r.precision=o-(r.type==="%")*2);break}}return Vo(r)}function iu(e){var t=e.domain;return e.ticks=function(n){var r=t();return ha(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return ru(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,o=r.length-1,l=r[i],u=r[o],a,s,f=10;for(u<l&&(s=l,l=u,u=s,s=i,i=o,o=s);f-- >0;){if(s=mr(l,u,n),s===a)return r[i]=l,r[o]=u,t(r);if(s>0)l=Math.floor(l/s)*s,u=Math.ceil(u/s)*s;else if(s<0)l=Math.ceil(l*s)/s,u=Math.floor(u*s)/s;else break;a=s}return e},e}function Mn(){var e=qo();return e.copy=function(){return Ro(e,Mn())},zr.apply(e,arguments),iu(e)}function ou(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],o=e[r],l;return o<i&&(l=n,n=r,r=l,l=i,i=o,o=l),e[n]=t.floor(i),e[r]=t.ceil(o),e}const $n=new Date,Qn=new Date;function pe(e,t,n,r){function i(o){return e(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(e(o=new Date(+o)),o),i.ceil=o=>(e(o=new Date(o-1)),t(o,1),e(o),o),i.round=o=>{const l=i(o),u=i.ceil(o);return o-l<u-o?l:u},i.offset=(o,l)=>(t(o=new Date(+o),l==null?1:Math.floor(l)),o),i.range=(o,l,u)=>{const a=[];if(o=i.ceil(o),u=u==null?1:Math.floor(u),!(o<l)||!(u>0))return a;let s;do a.push(s=new Date(+o)),t(o,u),e(o);while(s<o&&o<l);return a},i.filter=o=>pe(l=>{if(l>=l)for(;e(l),!o(l);)l.setTime(l-1)},(l,u)=>{if(l>=l)if(u<0)for(;++u<=0;)for(;t(l,-1),!o(l););else for(;--u>=0;)for(;t(l,1),!o(l););}),n&&(i.count=(o,l)=>($n.setTime(+o),Qn.setTime(+l),e($n),e(Qn),Math.floor(n($n,Qn))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(r?l=>r(l)%o===0:l=>i.count(0,l)%o===0):i)),i}const Dn=pe(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Dn.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?pe(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):Dn);Dn.range;const Ge=1e3,Ae=Ge*60,Be=Ae*60,Je=Be*24,Vr=Je*7,Ci=Je*30,jn=Je*365,yt=pe(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Ge)},(e,t)=>(t-e)/Ge,e=>e.getUTCSeconds());yt.range;const Gr=pe(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ge)},(e,t)=>{e.setTime(+e+t*Ae)},(e,t)=>(t-e)/Ae,e=>e.getMinutes());Gr.range;const lu=pe(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Ae)},(e,t)=>(t-e)/Ae,e=>e.getUTCMinutes());lu.range;const Hn=pe(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ge-e.getMinutes()*Ae)},(e,t)=>{e.setTime(+e+t*Be)},(e,t)=>(t-e)/Be,e=>e.getHours());Hn.range;const au=pe(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Be)},(e,t)=>(t-e)/Be,e=>e.getUTCHours());au.range;const et=pe(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Ae)/Je,e=>e.getDate()-1);et.range;const Br=pe(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Je,e=>e.getUTCDate()-1);Br.range;const uu=pe(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Je,e=>Math.floor(e/Je));uu.range;function st(e){return pe(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Ae)/Vr)}const St=st(0),xn=st(1),su=st(2),fu=st(3),Tt=st(4),cu=st(5),hu=st(6);St.range;xn.range;su.range;fu.range;Tt.range;cu.range;hu.range;function ft(e){return pe(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/Vr)}const Bo=ft(0),Sn=ft(1),gu=ft(2),du=ft(3),Ct=ft(4),mu=ft(5),pu=ft(6);Bo.range;Sn.range;gu.range;du.range;Ct.range;mu.range;pu.range;const Dt=pe(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Dt.range;const _u=pe(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());_u.range;const Ke=pe(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Ke.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:pe(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Ke.range;const at=pe(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());at.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:pe(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});at.range;function yu(e,t,n,r,i,o){const l=[[yt,1,Ge],[yt,5,5*Ge],[yt,15,15*Ge],[yt,30,30*Ge],[o,1,Ae],[o,5,5*Ae],[o,15,15*Ae],[o,30,30*Ae],[i,1,Be],[i,3,3*Be],[i,6,6*Be],[i,12,12*Be],[r,1,Je],[r,2,2*Je],[n,1,Vr],[t,1,Ci],[t,3,3*Ci],[e,1,jn]];function u(s,f,c){const h=f<s;h&&([s,f]=[f,s]);const g=c&&typeof c.range=="function"?c:a(s,f,c),d=g?g.range(s,+f+1):[];return h?d.reverse():d}function a(s,f,c){const h=Math.abs(f-s)/c,g=Wr(([,,p])=>p).right(l,h);if(g===l.length)return e.every(pr(s/jn,f/jn,c));if(g===0)return Dn.every(Math.max(pr(s,f,c),1));const[d,w]=l[h/l[g-1][2]<l[g][2]/h?g-1:g];return d.every(w)}return[u,a]}const[wu,vu]=yu(Ke,Dt,St,et,Hn,Gr);function er(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function tr(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Pt(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function bu(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,o=e.days,l=e.shortDays,u=e.months,a=e.shortMonths,s=Yt(i),f=Ot(i),c=Yt(o),h=Ot(o),g=Yt(l),d=Ot(l),w=Yt(u),p=Ot(u),_=Yt(a),b=Ot(a),y={a:C,A:B,b:K,B:Z,c:null,d:Ui,e:Ui,f:Xu,g:es,G:ns,H:zu,I:Ru,j:qu,L:Jo,m:Vu,M:Gu,p:$,q:O,Q:Oi,s:Hi,S:Bu,u:Ju,U:Ku,V:Zu,w:$u,W:Qu,x:null,X:null,y:ju,Y:ts,Z:rs,"%":Yi},x={a:N,A:te,b:ie,B:oe,c:null,d:Pi,e:Pi,f:as,g:_s,G:ws,H:is,I:os,j:ls,L:Zo,m:us,M:ss,p:j,q:_e,Q:Oi,s:Hi,S:fs,u:cs,U:hs,V:gs,w:ds,W:ms,x:null,X:null,y:ps,Y:ys,Z:vs,"%":Yi},M={a:F,A:T,b:L,B:H,c:R,d:Fi,e:Fi,f:Ou,g:Ei,G:Ni,H:Li,I:Li,j:Lu,L:Yu,m:Fu,M:Uu,p:X,q:Eu,Q:Iu,s:Wu,S:Pu,u:Su,U:Tu,V:Cu,w:xu,W:Au,x:W,X:k,y:Ei,Y:Ni,Z:Nu,"%":Hu};y.x=v(n,y),y.X=v(r,y),y.c=v(t,y),x.x=v(n,x),x.X=v(r,x),x.c=v(t,x);function v(A,I){return function(G){var D=[],ne=-1,J=0,Q=A.length,ge,U,ue;for(G instanceof Date||(G=new Date(+G));++ne<Q;)A.charCodeAt(ne)===37&&(D.push(A.slice(J,ne)),(U=Ai[ge=A.charAt(++ne)])!=null?ge=A.charAt(++ne):U=ge==="e"?" ":"0",(ue=I[ge])&&(ge=ue(G,U)),D.push(ge),J=ne+1);return D.push(A.slice(J,ne)),D.join("")}}function S(A,I){return function(G){var D=Pt(1900,void 0,1),ne=Y(D,A,G+="",0),J,Q;if(ne!=G.length)return null;if("Q"in D)return new Date(D.Q);if("s"in D)return new Date(D.s*1e3+("L"in D?D.L:0));if(I&&!("Z"in D)&&(D.Z=0),"p"in D&&(D.H=D.H%12+D.p*12),D.m===void 0&&(D.m="q"in D?D.q:0),"V"in D){if(D.V<1||D.V>53)return null;"w"in D||(D.w=1),"Z"in D?(J=tr(Pt(D.y,0,1)),Q=J.getUTCDay(),J=Q>4||Q===0?Sn.ceil(J):Sn(J),J=Br.offset(J,(D.V-1)*7),D.y=J.getUTCFullYear(),D.m=J.getUTCMonth(),D.d=J.getUTCDate()+(D.w+6)%7):(J=er(Pt(D.y,0,1)),Q=J.getDay(),J=Q>4||Q===0?xn.ceil(J):xn(J),J=et.offset(J,(D.V-1)*7),D.y=J.getFullYear(),D.m=J.getMonth(),D.d=J.getDate()+(D.w+6)%7)}else("W"in D||"U"in D)&&("w"in D||(D.w="u"in D?D.u%7:"W"in D?1:0),Q="Z"in D?tr(Pt(D.y,0,1)).getUTCDay():er(Pt(D.y,0,1)).getDay(),D.m=0,D.d="W"in D?(D.w+6)%7+D.W*7-(Q+5)%7:D.w+D.U*7-(Q+6)%7);return"Z"in D?(D.H+=D.Z/100|0,D.M+=D.Z%100,tr(D)):er(D)}}function Y(A,I,G,D){for(var ne=0,J=I.length,Q=G.length,ge,U;ne<J;){if(D>=Q)return-1;if(ge=I.charCodeAt(ne++),ge===37){if(ge=I.charAt(ne++),U=M[ge in Ai?I.charAt(ne++):ge],!U||(D=U(A,G,D))<0)return-1}else if(ge!=G.charCodeAt(D++))return-1}return D}function X(A,I,G){var D=s.exec(I.slice(G));return D?(A.p=f.get(D[0].toLowerCase()),G+D[0].length):-1}function F(A,I,G){var D=g.exec(I.slice(G));return D?(A.w=d.get(D[0].toLowerCase()),G+D[0].length):-1}function T(A,I,G){var D=c.exec(I.slice(G));return D?(A.w=h.get(D[0].toLowerCase()),G+D[0].length):-1}function L(A,I,G){var D=_.exec(I.slice(G));return D?(A.m=b.get(D[0].toLowerCase()),G+D[0].length):-1}function H(A,I,G){var D=w.exec(I.slice(G));return D?(A.m=p.get(D[0].toLowerCase()),G+D[0].length):-1}function R(A,I,G){return Y(A,t,I,G)}function W(A,I,G){return Y(A,n,I,G)}function k(A,I,G){return Y(A,r,I,G)}function C(A){return l[A.getDay()]}function B(A){return o[A.getDay()]}function K(A){return a[A.getMonth()]}function Z(A){return u[A.getMonth()]}function $(A){return i[+(A.getHours()>=12)]}function O(A){return 1+~~(A.getMonth()/3)}function N(A){return l[A.getUTCDay()]}function te(A){return o[A.getUTCDay()]}function ie(A){return a[A.getUTCMonth()]}function oe(A){return u[A.getUTCMonth()]}function j(A){return i[+(A.getUTCHours()>=12)]}function _e(A){return 1+~~(A.getUTCMonth()/3)}return{format:function(A){var I=v(A+="",y);return I.toString=function(){return A},I},parse:function(A){var I=S(A+="",!1);return I.toString=function(){return A},I},utcFormat:function(A){var I=v(A+="",x);return I.toString=function(){return A},I},utcParse:function(A){var I=S(A+="",!0);return I.toString=function(){return A},I}}}var Ai={"-":"",_:" ",0:"0"},ye=/^\s*\d+/,ku=/^%/,Mu=/[\\^$*+?|[\]().{}]/g;function ee(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(t)+i:i)}function Du(e){return e.replace(Mu,"\\$&")}function Yt(e){return new RegExp("^(?:"+e.map(Du).join("|")+")","i")}function Ot(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function xu(e,t,n){var r=ye.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function Su(e,t,n){var r=ye.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function Tu(e,t,n){var r=ye.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function Cu(e,t,n){var r=ye.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function Au(e,t,n){var r=ye.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function Ni(e,t,n){var r=ye.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function Ei(e,t,n){var r=ye.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Nu(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Eu(e,t,n){var r=ye.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function Fu(e,t,n){var r=ye.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function Fi(e,t,n){var r=ye.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function Lu(e,t,n){var r=ye.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function Li(e,t,n){var r=ye.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function Uu(e,t,n){var r=ye.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function Pu(e,t,n){var r=ye.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function Yu(e,t,n){var r=ye.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function Ou(e,t,n){var r=ye.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Hu(e,t,n){var r=ku.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function Iu(e,t,n){var r=ye.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function Wu(e,t,n){var r=ye.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function Ui(e,t){return ee(e.getDate(),t,2)}function zu(e,t){return ee(e.getHours(),t,2)}function Ru(e,t){return ee(e.getHours()%12||12,t,2)}function qu(e,t){return ee(1+et.count(Ke(e),e),t,3)}function Jo(e,t){return ee(e.getMilliseconds(),t,3)}function Xu(e,t){return Jo(e,t)+"000"}function Vu(e,t){return ee(e.getMonth()+1,t,2)}function Gu(e,t){return ee(e.getMinutes(),t,2)}function Bu(e,t){return ee(e.getSeconds(),t,2)}function Ju(e){var t=e.getDay();return t===0?7:t}function Ku(e,t){return ee(St.count(Ke(e)-1,e),t,2)}function Ko(e){var t=e.getDay();return t>=4||t===0?Tt(e):Tt.ceil(e)}function Zu(e,t){return e=Ko(e),ee(Tt.count(Ke(e),e)+(Ke(e).getDay()===4),t,2)}function $u(e){return e.getDay()}function Qu(e,t){return ee(xn.count(Ke(e)-1,e),t,2)}function ju(e,t){return ee(e.getFullYear()%100,t,2)}function es(e,t){return e=Ko(e),ee(e.getFullYear()%100,t,2)}function ts(e,t){return ee(e.getFullYear()%1e4,t,4)}function ns(e,t){var n=e.getDay();return e=n>=4||n===0?Tt(e):Tt.ceil(e),ee(e.getFullYear()%1e4,t,4)}function rs(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+ee(t/60|0,"0",2)+ee(t%60,"0",2)}function Pi(e,t){return ee(e.getUTCDate(),t,2)}function is(e,t){return ee(e.getUTCHours(),t,2)}function os(e,t){return ee(e.getUTCHours()%12||12,t,2)}function ls(e,t){return ee(1+Br.count(at(e),e),t,3)}function Zo(e,t){return ee(e.getUTCMilliseconds(),t,3)}function as(e,t){return Zo(e,t)+"000"}function us(e,t){return ee(e.getUTCMonth()+1,t,2)}function ss(e,t){return ee(e.getUTCMinutes(),t,2)}function fs(e,t){return ee(e.getUTCSeconds(),t,2)}function cs(e){var t=e.getUTCDay();return t===0?7:t}function hs(e,t){return ee(Bo.count(at(e)-1,e),t,2)}function $o(e){var t=e.getUTCDay();return t>=4||t===0?Ct(e):Ct.ceil(e)}function gs(e,t){return e=$o(e),ee(Ct.count(at(e),e)+(at(e).getUTCDay()===4),t,2)}function ds(e){return e.getUTCDay()}function ms(e,t){return ee(Sn.count(at(e)-1,e),t,2)}function ps(e,t){return ee(e.getUTCFullYear()%100,t,2)}function _s(e,t){return e=$o(e),ee(e.getUTCFullYear()%100,t,2)}function ys(e,t){return ee(e.getUTCFullYear()%1e4,t,4)}function ws(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Ct(e):Ct.ceil(e),ee(e.getUTCFullYear()%1e4,t,4)}function vs(){return"+0000"}function Yi(){return"%"}function Oi(e){return+e}function Hi(e){return Math.floor(+e/1e3)}var ht,Jr;bs({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function bs(e){return ht=bu(e),Jr=ht.format,ht.parse,ht.utcFormat,ht.utcParse,ht}function ks(e){return new Date(e)}function Ms(e){return e instanceof Date?+e:+new Date(+e)}function Qo(e,t,n,r,i,o,l,u,a,s){var f=qo(),c=f.invert,h=f.domain,g=s(".%L"),d=s(":%S"),w=s("%I:%M"),p=s("%I %p"),_=s("%a %d"),b=s("%b %d"),y=s("%B"),x=s("%Y");function M(v){return(a(v)<v?g:u(v)<v?d:l(v)<v?w:o(v)<v?p:r(v)<v?i(v)<v?_:b:n(v)<v?y:x)(v)}return f.invert=function(v){return new Date(c(v))},f.domain=function(v){return arguments.length?h(Array.from(v,Ms)):h().map(ks)},f.ticks=function(v){var S=h();return e(S[0],S[S.length-1],v??10)},f.tickFormat=function(v,S){return S==null?M:s(S)},f.nice=function(v){var S=h();return(!v||typeof v.range!="function")&&(v=t(S[0],S[S.length-1],v??10)),v?h(ou(S,v)):f},f.copy=function(){return Ro(f,Qo(e,t,n,r,i,o,l,u,a,s))},f}function Kr(){return zr.apply(Qo(wu,vu,Ke,Dt,St,et,Hn,Gr,yt,Jr).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function he(e){return function(){return e}}const kr=Math.PI,Mr=2*kr,nt=1e-6,Ds=Mr-nt;function jo(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function xs(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return jo;const n=10**t;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class Ss{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?jo:xs(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,o,l){this._append`C${+t},${+n},${+r},${+i},${this._x1=+o},${this._y1=+l}`}arcTo(t,n,r,i,o){if(t=+t,n=+n,r=+r,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let l=this._x1,u=this._y1,a=r-t,s=i-n,f=l-t,c=u-n,h=f*f+c*c;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(h>nt)if(!(Math.abs(c*a-s*f)>nt)||!o)this._append`L${this._x1=t},${this._y1=n}`;else{let g=r-l,d=i-u,w=a*a+s*s,p=g*g+d*d,_=Math.sqrt(w),b=Math.sqrt(h),y=o*Math.tan((kr-Math.acos((w+h-p)/(2*_*b)))/2),x=y/b,M=y/_;Math.abs(x-1)>nt&&this._append`L${t+x*f},${n+x*c}`,this._append`A${o},${o},0,0,${+(c*g>f*d)},${this._x1=t+M*a},${this._y1=n+M*s}`}}arc(t,n,r,i,o,l){if(t=+t,n=+n,r=+r,l=!!l,r<0)throw new Error(`negative radius: ${r}`);let u=r*Math.cos(i),a=r*Math.sin(i),s=t+u,f=n+a,c=1^l,h=l?i-o:o-i;this._x1===null?this._append`M${s},${f}`:(Math.abs(this._x1-s)>nt||Math.abs(this._y1-f)>nt)&&this._append`L${s},${f}`,r&&(h<0&&(h=h%Mr+Mr),h>Ds?this._append`A${r},${r},0,1,${c},${t-u},${n-a}A${r},${r},0,1,${c},${this._x1=s},${this._y1=f}`:h>nt&&this._append`A${r},${r},0,${+(h>=kr)},${c},${this._x1=t+r*Math.cos(o)},${this._y1=n+r*Math.sin(o)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function el(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new Ss(t)}function Zr(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function tl(e){this._context=e}tl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function nl(e){return new tl(e)}function rl(e){return e[0]}function il(e){return e[1]}function Tn(e,t){var n=he(!0),r=null,i=nl,o=null,l=el(u);e=typeof e=="function"?e:e===void 0?rl:he(e),t=typeof t=="function"?t:t===void 0?il:he(t);function u(a){var s,f=(a=Zr(a)).length,c,h=!1,g;for(r==null&&(o=i(g=l())),s=0;s<=f;++s)!(s<f&&n(c=a[s],s,a))===h&&((h=!h)?o.lineStart():o.lineEnd()),h&&o.point(+e(c,s,a),+t(c,s,a));if(g)return o=null,g+""||null}return u.x=function(a){return arguments.length?(e=typeof a=="function"?a:he(+a),u):e},u.y=function(a){return arguments.length?(t=typeof a=="function"?a:he(+a),u):t},u.defined=function(a){return arguments.length?(n=typeof a=="function"?a:he(!!a),u):n},u.curve=function(a){return arguments.length?(i=a,r!=null&&(o=i(r)),u):i},u.context=function(a){return arguments.length?(a==null?r=o=null:o=i(r=a),u):r},u}function Ts(e,t,n){var r=null,i=he(!0),o=null,l=nl,u=null,a=el(s);e=typeof e=="function"?e:e===void 0?rl:he(+e),t=typeof t=="function"?t:he(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?il:he(+n);function s(c){var h,g,d,w=(c=Zr(c)).length,p,_=!1,b,y=new Array(w),x=new Array(w);for(o==null&&(u=l(b=a())),h=0;h<=w;++h){if(!(h<w&&i(p=c[h],h,c))===_)if(_=!_)g=h,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),d=h-1;d>=g;--d)u.point(y[d],x[d]);u.lineEnd(),u.areaEnd()}_&&(y[h]=+e(p,h,c),x[h]=+t(p,h,c),u.point(r?+r(p,h,c):y[h],n?+n(p,h,c):x[h]))}if(b)return u=null,b+""||null}function f(){return Tn().defined(i).curve(l).context(o)}return s.x=function(c){return arguments.length?(e=typeof c=="function"?c:he(+c),r=null,s):e},s.x0=function(c){return arguments.length?(e=typeof c=="function"?c:he(+c),s):e},s.x1=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:he(+c),s):r},s.y=function(c){return arguments.length?(t=typeof c=="function"?c:he(+c),n=null,s):t},s.y0=function(c){return arguments.length?(t=typeof c=="function"?c:he(+c),s):t},s.y1=function(c){return arguments.length?(n=c==null?null:typeof c=="function"?c:he(+c),s):n},s.lineX0=s.lineY0=function(){return f().x(e).y(t)},s.lineY1=function(){return f().x(e).y(n)},s.lineX1=function(){return f().x(r).y(t)},s.defined=function(c){return arguments.length?(i=typeof c=="function"?c:he(!!c),s):i},s.curve=function(c){return arguments.length?(l=c,o!=null&&(u=l(o)),s):l},s.context=function(c){return arguments.length?(c==null?o=u=null:u=l(o=c),s):o},s}function Ii(e,t){if((l=e.length)>1)for(var n=1,r,i,o=e[t[0]],l,u=o.length;n<l;++n)for(i=o,o=e[t[n]],r=0;r<u;++r)o[r][1]+=o[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function Wi(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function Cs(e,t){return e[t]}function As(e){const t=[];return t.key=e,t}function zi(){var e=he([]),t=Wi,n=Ii,r=Cs;function i(o){var l=Array.from(e.apply(this,arguments),As),u,a=l.length,s=-1,f;for(const c of o)for(u=0,++s;u<a;++u)(l[u][s]=[0,+r(c,l[u].key,s,o)]).data=c;for(u=0,f=Zr(t(l));u<a;++u)l[f[u]].index=u;return n(l,f),l}return i.keys=function(o){return arguments.length?(e=typeof o=="function"?o:he(Array.from(o)),i):e},i.value=function(o){return arguments.length?(r=typeof o=="function"?o:he(+o),i):r},i.order=function(o){return arguments.length?(t=o==null?Wi:typeof o=="function"?o:he(Array.from(o)),i):t},i.offset=function(o){return arguments.length?(n=o??Ii,i):n},i}function Ri(e,t,n){const r=e.slice();return r[8]=t[n],r[10]=n,r}function qi(e){let t,n,r,i,o,l;function u(f,c){if(f[2]==="hourly"||f[2]==="daily"||f[2]==="weekly")return Es;if(f[2]==="monthly")return Ns}let a=u(e),s=a&&a(e);return{c(){t=fe("line"),o=ae(),s&&s.c(),l=Lt(),m(t,"x1",n=e[1](new Date(e[8]))),m(t,"x2",r=e[1](new Date(e[8]))),m(t,"y1",e[0]),m(t,"y2",i=e[0]+At),m(t,"stroke","#808080")},m(f,c){q(f,t,c),q(f,o,c),s&&s.m(f,c),q(f,l,c)},p(f,c){c&10&&n!==(n=f[1](new Date(f[8])))&&m(t,"x1",n),c&10&&r!==(r=f[1](new Date(f[8])))&&m(t,"x2",r),c&1&&m(t,"y1",f[0]),c&1&&i!==(i=f[0]+At)&&m(t,"y2",i),a===(a=u(f))&&s?s.p(f,c):(s&&s.d(1),s=a&&a(f),s&&(s.c(),s.m(l.parentNode,l)))},d(f){f&&(z(t),z(o),z(l)),s&&s.d(f)}}}function Ns(e){let t,n=Cn(e[8],"month")+"",r,i,o;return{c(){t=fe("text"),r=me(n),m(t,"x",i=e[1](new Date(e[8]))),m(t,"y",o=e[0]+At),m(t,"dy","6"),m(t,"dominant-baseline","hanging"),m(t,"text-anchor","middle"),m(t,"class","svelte-e1340v")},m(l,u){q(l,t,u),E(t,r)},p(l,u){u&8&&n!==(n=Cn(l[8],"month")+"")&&xe(r,n),u&10&&i!==(i=l[1](new Date(l[8])))&&m(t,"x",i),u&1&&o!==(o=l[0]+At)&&m(t,"y",o)},d(l){l&&z(t)}}}function Es(e){let t,n=Cn(e[8],"day")+"",r,i,o;return{c(){t=fe("text"),r=me(n),m(t,"x",i=e[1](new Date(e[8]))),m(t,"y",o=e[0]+At),m(t,"dy","6"),m(t,"dominant-baseline","hanging"),m(t,"text-anchor","middle"),m(t,"class","svelte-e1340v")},m(l,u){q(l,t,u),E(t,r)},p(l,u){u&8&&n!==(n=Cn(l[8],"day")+"")&&xe(r,n),u&10&&i!==(i=l[1](new Date(l[8])))&&m(t,"x",i),u&1&&o!==(o=l[0]+At)&&m(t,"y",o)},d(l){l&&z(t)}}}function Xi(e){let t,n=e[8]&&qi(e);return{c(){n&&n.c(),t=Lt()},m(r,i){n&&n.m(r,i),q(r,t,i)},p(r,i){r[8]?n?n.p(r,i):(n=qi(r),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(r){r&&z(t),n&&n.d(r)}}}function Fs(e){let t,n=be(e[3]),r=[];for(let i=0;i<n.length;i+=1)r[i]=Xi(Ri(e,n,i));return{c(){for(let i=0;i<r.length;i+=1)r[i].c();t=Lt()},m(i,o){for(let l=0;l<r.length;l+=1)r[l]&&r[l].m(i,o);q(i,t,o)},p(i,[o]){if(o&15){n=be(i[3]);let l;for(l=0;l<n.length;l+=1){const u=Ri(i,n,l);r[l]?r[l].p(u,o):(r[l]=Xi(u),r[l].c(),r[l].m(t.parentNode,t))}for(;l<r.length;l+=1)r[l].d(1);r.length=n.length}},i:re,o:re,d(i){i&&z(t),tt(r,i)}}}const At=4;function Cn(e,t){const n=new Date(e);if(t==="day"){const r=n.getDate(),i=n.toLocaleDateString("en-US",{month:"short"});return`${r} ${i}`}else if(t==="month"){const r=n.toLocaleDateString("en-US",{month:"short"}),i=n.getFullYear().toString().substr(-2);return`${r} ${i}`}return e}function Ls(e,t,n){let r,{height:i}=t,{xScale:o}=t,{interval:l}=t,{width:u=0}=t,{customTicks:a=null}=t;const s=u<300?80:50;function f(c,h,g){if(!g||g<=0)return[];const d=c.domain(),w=c.range(),p=w[1]-w[0],_=Math.max(2,Math.floor(p/s)),y=(d[1]-d[0])/(1e3*60*60*24);if(h==="hourly")return y<=2?Hn.every(Math.max(1,Math.floor(12/_))).range(d[0],d[1]):y<=7?et.every(1).range(d[0],d[1]):et.every(Math.max(1,Math.floor(y/_))).range(d[0],d[1]);if(h==="daily")if(y<=30){const x=Math.max(1,Math.floor(y/_)),M=et.every(x).range(d[0],d[1]),v=M[M.length-1],S=(d[1]-v)/(1e3*60*60);if(S>12&&S<24){const Y=new Date(v);Y.setDate(Y.getDate()+1),M.push(Y)}return M}else return y<=90?St.every(Math.max(1,Math.floor(y/7/_))).range(d[0],d[1]):Dt.every(Math.max(1,Math.floor(y/30/_))).range(d[0],d[1]);else if(h==="weekly"){const x=Math.ceil(y/7);if(y<=120){const M=Math.max(1,Math.floor(x/_)),v=St.every(M).range(d[0],d[1]);if(v.length>0){const S=v[v.length-1],Y=(d[1]-S)/(1e3*60*60*24);if(Y>3.5&&Y<7){const X=new Date(S);X.setDate(X.getDate()+7),v.push(X)}}return v}else return Dt.every(Math.max(1,Math.floor(y/30/_))).range(d[0],d[1])}else if(h==="monthly"){const x=(d[1].getFullYear()-d[0].getFullYear())*12+(d[1].getMonth()-d[0].getMonth());if(x<=5){const M=[];let v=new Date(d[0]);for(v.setDate(1);v<=d[1];)M.push(new Date(v)),v.setMonth(v.getMonth()+1);const S=new Date(d[1]);return S.setDate(1),(M.length===0||M[M.length-1].getMonth()!==S.getMonth()||M[M.length-1].getFullYear()!==S.getFullYear())&&M.push(S),M}else{const M=Math.max(1,Math.floor(x/_)),v=Dt.every(M).range(d[0],d[1]),S=new Date(d[1]);return S.setDate(1),!v.some(X=>X.getMonth()===S.getMonth()&&X.getFullYear()===S.getFullYear())&&d[1].getDate()>1&&v.push(S),v}}return c.ticks(_)}return e.$$set=c=>{"height"in c&&n(0,i=c.height),"xScale"in c&&n(1,o=c.xScale),"interval"in c&&n(2,l=c.interval),"width"in c&&n(4,u=c.width),"customTicks"in c&&n(5,a=c.customTicks)},e.$$.update=()=>{e.$$.dirty&54&&n(3,r=a||f(o,l,u)),e.$$.dirty&28&&r&&r.length>0&&console.log(`Generated ${r.length} ticks for interval: ${l}, width: ${u}px`)},[i,o,l,r,u,a]}class ol extends Qe{constructor(t){super(),$e(this,t,Ls,Fs,ze,{height:0,xScale:1,interval:2,width:4,customTicks:5})}}function Vi(e,t,n){const r=e.slice();return r[5]=t[n],r[7]=n,r}function Us(e){let t,n,r=e[5]+"",i;return{c(){t=fe("line"),n=fe("text"),i=me(r),m(t,"x1",0),m(t,"x2",Nt),m(t,"y1",0),m(t,"y2",0),m(t,"stroke",e[7]===0?"#8f8f8f":"#e5e7eb"),m(n,"x",Nt+ll),m(n,"dominant-baseline","middle"),m(n,"text-anchor","start"),m(n,"class","svelte-8lm8ea")},m(o,l){q(o,t,l),q(o,n,l),E(n,i)},p(o,l){l&8&&r!==(r=o[5]+"")&&xe(i,r)},d(o){o&&(z(t),z(n))}}}function Ps(e){let t,n,r=e[5]+"",i;return{c(){t=fe("line"),n=fe("text"),i=me(r),m(t,"x1",-Nt),m(t,"x2",e[0]),m(t,"y1",0),m(t,"y2",0),m(t,"stroke",e[7]===0?"#8f8f8f":"#e5e7eb"),m(n,"x",-Nt-ll),m(n,"dominant-baseline","middle"),m(n,"text-anchor","end"),m(n,"class","svelte-8lm8ea")},m(o,l){q(o,t,l),q(o,n,l),E(n,i)},p(o,l){l&1&&m(t,"x2",o[0]),l&8&&r!==(r=o[5]+"")&&xe(i,r)},d(o){o&&(z(t),z(n))}}}function Gi(e){let t,n;function r(l,u){return l[4]==="left"?Ps:Us}let i=r(e),o=i(e);return{c(){t=fe("g"),o.c(),m(t,"class","tick"),m(t,"transform",n="translate(0, "+e[1](e[5])+")")},m(l,u){q(l,t,u),o.m(t,null)},p(l,u){i===(i=r(l))&&o?o.p(l,u):(o.d(1),o=i(l),o&&(o.c(),o.m(t,null))),u&10&&n!==(n="translate(0, "+l[1](l[5])+")")&&m(t,"transform",n)},d(l){l&&z(t),o.d()}}}function Ys(e){let t,n;return{c(){t=fe("text"),n=me(e[2]),m(t,"class","axis-title svelte-8lm8ea"),m(t,"x",Nt+30),m(t,"y",-36),m(t,"dy","4"),m(t,"dominant-baseline","hanging"),m(t,"text-anchor","end")},m(r,i){q(r,t,i),E(t,n)},p(r,i){i&4&&xe(n,r[2])},d(r){r&&z(t)}}}function Os(e){let t,n;return{c(){t=fe("text"),n=me(e[2]),m(t,"class","axis-title svelte-8lm8ea"),m(t,"x",-Nt-30),m(t,"y",-36),m(t,"dy","4"),m(t,"dominant-baseline","hanging"),m(t,"text-anchor","start")},m(r,i){q(r,t,i),E(t,n)},p(r,i){i&4&&xe(n,r[2])},d(r){r&&z(t)}}}function Hs(e){let t,n,r=be(e[3]),i=[];for(let a=0;a<r.length;a+=1)i[a]=Gi(Vi(e,r,a));function o(a,s){return a[4]==="left"?Os:Ys}let l=o(e),u=l(e);return{c(){t=fe("g");for(let a=0;a<i.length;a+=1)i[a].c();n=Lt(),u.c(),m(t,"class","axis y")},m(a,s){q(a,t,s);for(let f=0;f<i.length;f+=1)i[f]&&i[f].m(t,null);E(t,n),u.m(t,null)},p(a,[s]){if(s&27){r=be(a[3]);let f;for(f=0;f<r.length;f+=1){const c=Vi(a,r,f);i[f]?i[f].p(c,s):(i[f]=Gi(c),i[f].c(),i[f].m(t,n))}for(;f<i.length;f+=1)i[f].d(1);i.length=r.length}l===(l=o(a))&&u?u.p(a,s):(u.d(1),u=l(a),u&&(u.c(),u.m(t,null)))},i:re,o:re,d(a){a&&z(t),tt(i,a),u.d()}}}const Nt=10,ll=8;function Is(e,t,n){let{width:r}=t,{yScale:i}=t,{title:o}=t,{ticks:l}=t,{orientation:u="left"}=t;return e.$$set=a=>{"width"in a&&n(0,r=a.width),"yScale"in a&&n(1,i=a.yScale),"title"in a&&n(2,o=a.title),"ticks"in a&&n(3,l=a.ticks),"orientation"in a&&n(4,u=a.orientation)},[r,i,o,l,u]}class Dr extends Qe{constructor(t){super(),$e(this,t,Is,Hs,ze,{width:0,yScale:1,title:2,ticks:3,orientation:4})}}function Bi(e){let t;return{c(){t=fe("line"),m(t,"x1",e[1]),m(t,"x2",e[1]),m(t,"y1",0),m(t,"y2",e[3]),m(t,"stroke","darkgrey"),m(t,"stroke-dasharray","2, 2"),m(t,"pointer-events","none")},m(n,r){q(n,t,r)},p(n,r){r&2&&m(t,"x1",n[1]),r&2&&m(t,"x2",n[1]),r&8&&m(t,"y2",n[3])},d(n){n&&z(t)}}}function Ws(e){let t,n,r,i,o,l=e[0]&&Bi(e);return{c(){t=fe("rect"),n=ae(),l&&l.c(),r=Lt(),m(t,"class","hover-listener svelte-hiaj90"),m(t,"fill","transparent"),m(t,"width",e[2]),m(t,"height",e[3])},m(u,a){q(u,t,a),q(u,n,a),l&&l.m(u,a),q(u,r,a),i||(o=[Ue(t,"mousemove",e[4]),Ue(t,"mouseleave",e[5])],i=!0)},p(u,[a]){a&4&&m(t,"width",u[2]),a&8&&m(t,"height",u[3]),u[0]?l?l.p(u,a):(l=Bi(u),l.c(),l.m(r.parentNode,r)):l&&(l.d(1),l=null)},i:re,o:re,d(u){u&&(z(t),z(n),z(r)),l&&l.d(u),i=!1,We(o)}}}function zs(e,t,n){let{xScale:r}=t,{margin:i}=t,{width:o}=t,{height:l}=t,{hoveredDate:u}=t,{xPos:a}=t,{aggregationLevel:s="hourly"}=t;const f=function(h){const g=h.offsetX-i.left,d=r.invert(g);n(0,u=d.getTime()),n(1,a=g)},c=function(){n(0,u=null),n(1,a=0)};return e.$$set=h=>{"xScale"in h&&n(6,r=h.xScale),"margin"in h&&n(7,i=h.margin),"width"in h&&n(2,o=h.width),"height"in h&&n(3,l=h.height),"hoveredDate"in h&&n(0,u=h.hoveredDate),"xPos"in h&&n(1,a=h.xPos),"aggregationLevel"in h&&n(8,s=h.aggregationLevel)},[u,a,o,l,f,c,r,i,s]}class Rs extends Qe{constructor(t){super(),$e(this,t,zs,Ws,ze,{xScale:6,margin:7,width:2,height:3,hoveredDate:0,xPos:1,aggregationLevel:8})}}function qs(e){const t=e-1;return t*t*t+1}function Bt(e,{delay:t=0,duration:n=400,easing:r=Pn}={}){const i=+getComputedStyle(e).opacity;return{delay:t,duration:n,easing:r,css:o=>`opacity: ${o*i}`}}function Xs(e,{delay:t=0,duration:n=400,easing:r=qs,x:i=0,y:o=0,opacity:l=0}={}){const u=getComputedStyle(e),a=+u.opacity,s=u.transform==="none"?"":u.transform,f=a*(1-l),[c,h]=ui(i),[g,d]=ui(o);return{delay:t,duration:n,easing:r,css:(w,p)=>`
			transform: ${s} translate(${(1-w)*c}${h}, ${(1-w)*g}${d});
			opacity: ${a-f*p}`}}function Ji(e,t,n){const r=e.slice();return r[13]=t[n],r}function Ki(e){let t,n,r=e[13]+"",i,o,l,u=(typeof e[0][e[13]]=="number"?e[0][e[13]].toFixed(2):e[0][e[13]])+"",a,s;return{c(){t=V("div"),n=V("span"),i=me(r),o=ae(),l=V("span"),a=me(u),s=ae(),m(n,"class","key svelte-11vy6zu"),Ye(n,"background",e[1](e[13])),m(t,"class","info svelte-11vy6zu")},m(f,c){q(f,t,c),E(t,n),E(n,i),E(t,o),E(t,l),E(l,a),E(t,s)},p(f,c){c&32&&r!==(r=f[13]+"")&&xe(i,r),c&34&&Ye(n,"background",f[1](f[13])),c&33&&u!==(u=(typeof f[0][f[13]]=="number"?f[0][f[13]].toFixed(2):f[0][f[13]])+"")&&xe(a,u)},d(f){f&&z(t)}}}function Zi(e){let t,n,r,i,o,l,u=(typeof e[0].demand=="number"?e[0].demand.toFixed(2):e[0].demand)+"",a;return{c(){t=V("div"),n=ae(),r=V("div"),i=V("span"),i.textContent="Demand",o=ae(),l=V("span"),a=me(u),m(t,"class","separator svelte-11vy6zu"),m(i,"class","key demand-key svelte-11vy6zu"),m(r,"class","info special-row svelte-11vy6zu")},m(s,f){q(s,t,f),q(s,n,f),q(s,r,f),E(r,i),E(r,o),E(r,l),E(l,a)},p(s,f){f&1&&u!==(u=(typeof s[0].demand=="number"?s[0].demand.toFixed(2):s[0].demand)+"")&&xe(a,u)},d(s){s&&(z(t),z(n),z(r))}}}function $i(e){let t,n,r,i,o,l,u=(typeof e[0].spot_price=="number"?e[0].spot_price.toFixed(2):e[0].spot_price)+"",a,s;return{c(){t=V("div"),n=ae(),r=V("div"),i=V("span"),i.textContent="Spot Price",o=ae(),l=V("span"),a=me(u),s=me(" ¥/kWh"),m(t,"class","separator svelte-11vy6zu"),m(i,"class","key spot_price-key svelte-11vy6zu"),m(r,"class","info special-row svelte-11vy6zu")},m(f,c){q(f,t,c),q(f,n,c),q(f,r,c),E(r,i),E(r,o),E(r,l),E(l,a),E(l,s)},p(f,c){c&1&&u!==(u=(typeof f[0].spot_price=="number"?f[0].spot_price.toFixed(2):f[0].spot_price)+"")&&xe(a,u)},d(f){f&&(z(t),z(n),z(r))}}}function Vs(e){let t,n,r,i,o,l,u,a,s,f,c=be(e[5]),h=[];for(let w=0;w<c.length;w+=1)h[w]=Ki(Ji(e,c,w));let g=e[2]&&e[0].demand!==void 0&&Zi(e),d=e[3]&&e[0].spot_price!==void 0&&$i(e);return{c(){t=V("div"),n=V("h1"),r=me(e[6]),i=ae();for(let w=0;w<h.length;w+=1)h[w].c();o=ae(),g&&g.c(),l=ae(),d&&d.c(),m(n,"class","svelte-11vy6zu"),m(t,"class","tooltip svelte-11vy6zu"),Ye(t,"left",e[7]+"px"),Ye(t,"top",e[8]+"px"),Ie(()=>e[12].call(t))},m(w,p){q(w,t,p),E(t,n),E(n,r),E(t,i);for(let _=0;_<h.length;_+=1)h[_]&&h[_].m(t,null);E(t,o),g&&g.m(t,null),E(t,l),d&&d.m(t,null),u=Ol(t,e[12].bind(t)),f=!0},p(w,[p]){if((!f||p&64)&&xe(r,w[6]),p&35){c=be(w[5]);let _;for(_=0;_<c.length;_+=1){const b=Ji(w,c,_);h[_]?h[_].p(b,p):(h[_]=Ki(b),h[_].c(),h[_].m(t,o))}for(;_<h.length;_+=1)h[_].d(1);h.length=c.length}w[2]&&w[0].demand!==void 0?g?g.p(w,p):(g=Zi(w),g.c(),g.m(t,l)):g&&(g.d(1),g=null),w[3]&&w[0].spot_price!==void 0?d?d.p(w,p):(d=$i(w),d.c(),d.m(t,null)):d&&(d.d(1),d=null),(!f||p&128)&&Ye(t,"left",w[7]+"px")},i(w){f||(w&&Ie(()=>{f&&(s&&s.end(1),a=Gl(t,Xs,{y:10,duration:200,delay:200}),a.start())}),f=!0)},o(w){a&&a.invalidate(),w&&(s=Bl(t,Bt,{})),f=!1},d(w){w&&z(t),tt(h,w),g&&g.d(),d&&d.d(),u(),w&&s&&s.end()}}}const nr=5,Gs=5;function Bs(e,t){console.log("aggregation",t);const n=new Date(e),r=f=>{if(f>3&&f<21)return"th";switch(f%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},i=n.getDate(),o=i+r(i),u=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][n.getMonth()],a=n.getFullYear();let s=`${o} ${u} ${a}`;if(t==="hourly"){let f=n.getHours();const c=n.getMinutes(),h=f>=12?"pm":"am";f=f%12,f=f||12;const g=c<10?"0"+c:c;s+=`, ${f}.${g}${h}`}return s}function Js(e,t,n){let r,i,{width:o}=t,{data:l}=t,{colorScale:u}=t,{x:a}=t,{showDemand:s=!1}=t,{showSpotPrice:f=!1}=t,{aggregationLevel:c="hourly"}=t,h,g,d=Gs;function w(){h=this.clientWidth,n(4,h)}return e.$$set=p=>{"width"in p&&n(9,o=p.width),"data"in p&&n(0,l=p.data),"colorScale"in p&&n(1,u=p.colorScale),"x"in p&&n(10,a=p.x),"showDemand"in p&&n(2,s=p.showDemand),"showSpotPrice"in p&&n(3,f=p.showSpotPrice),"aggregationLevel"in p&&n(11,c=p.aggregationLevel)},e.$$.update=()=>{if(e.$$.dirty&1552&&n(7,r=a+h+nr>o?a-h-nr:a+nr),e.$$.dirty&2049&&n(6,i=Bs(l.date,c)),e.$$.dirty&13&&l){let p=Object.entries(l);p.sort((b,y)=>y[1]-b[1]);let _=Object.fromEntries(p);n(5,g=Object.keys(_).filter(b=>b!=="date"&&b!=="region"&&(!s||b!=="demand")&&(!f||b!=="spot_price")))}},[l,u,s,f,h,g,i,r,d,o,a,c,w]}class Ks extends Qe{constructor(t){super(),$e(this,t,Js,Vs,ze,{width:9,data:0,colorScale:1,x:10,showDemand:2,showSpotPrice:3,aggregationLevel:11})}}const Zs=["hydropower","geothermal","bioenergy","solar","wind","pumping_up","pumping_down","battery_charge","battery_generate","solar_curtailment","wind_curtailment"],$s=["nuclear","thermal","thermal_lng","thermal_coal","thermal_oil","thermal_others","others"],Qs=["demand","spot_price"],xr={hydropower:"blue",geothermal:"darkgray",bioenergy:"#009933",solar:"gold",wind:"#99CCFF",pumping_up:"#FFB6C1",pumping_down:"#FFB6C1",battery_charge:"#DAB1DA",battery_generate:"#DAB1DA",nuclear:"#FF0000",thermal_lng:"#FFDBBB",thermal_coal:"#808080",thermal_oil:"#996633",thermal_others:"#FFA500",thermal:"#FFA500",others:"#36454F",demand:"#000",spot_price:"purple",solar_curtailment:"yellow",wind_curtailment:"#40E0D0"},js={en:{hydropower:"Hydropower",geothermal:"Geothermal",bioenergy:"Bioenergy",solar:"Solar",wind:"Wind",pumping_up:"Pumping Up",pumping_down:"Pumping Down",battery_charge:"Battery Charge",battery_generate:"Battery Generate",nuclear:"Nuclear",thermal_lng:"LNG",thermal_coal:"Coal",thermal_oil:"Oil",thermal_others:"Thermal Others",thermal:"Thermal",others:"Others",demand:"Demand",spot_price:"JEPX System Price",solar_curtailment:"Solar Curtailment",wind_curtailment:"Wind Curtailment",powerGeneration:"Power Generation (GW)",systemPrice:"JEPX System Price (JPY/kWh)",japan:"Japan",tokyo:"Tokyo",hokkaido:"Hokkaido",tohuku:"Tohoku",chubu:"Chubu",hokuriku:"Hokuriku",kansai:"Kansai",chugoku:"Chugoku",shikoku:"Shikoku",kyushu:"Kyushu"},jp:{hydropower:"揚水(発力)",geothermal:"地熱",bioenergy:"バイオエネルギー",solar:"太陽光",wind:"風力",pumping_up:"揚水(揚水)",pumping_down:"揚水(発電)",battery_charge:"蓄電池(充電)",battery_generate:"蓄電池(放電)",nuclear:"原子力",thermal_lng:"LNG",thermal_coal:"石炭",thermal_oil:"石油",thermal_others:"火力その他",thermal:"火力",others:"その他",demand:"需要",spot_price:"JEPXシステムプライス",solar_curtailment:"太陽光(出力制御)",wind_curtailment:"風力(出力制御)",powerGeneration:"発電量 (GW)",systemPrice:"JEPXシステムプライス (円/kWh)",japan:"全国",tokyo:"東京",hokkaido:"北海道",tohuku:"東北",chubu:"中部",hokuriku:"北陸",kansai:"関西",chugoku:"中国",shikoku:"四国",kyushu:"九州"}},An=["japan","tokyo","hokkaido","tohuku","chubu","hokuriku","kansai","chugoku","shikoku","kyushu"];function Qi(e,t,n){const r=e.slice();return r[36]=t[n],r[38]=n,r}function ji(e,t,n){const r=e.slice();return r[36]=t[n],r[38]=n,r}function eo(e){let t,n,r,i,o,l,u;return{c(){t=fe("path"),m(t,"d",n=e[16](e[36])),m(t,"stroke",r=e[20](e[36].key)),m(t,"fill",i=e[20](e[36].key)),m(t,"stroke-width","1"),m(t,"opacity",o=e[2]?e[2]===e[36].key?1:.2:1)},m(a,s){q(a,t,s),u=!0},p(a,s){(!u||s[0]&327680&&n!==(n=a[16](a[36])))&&m(t,"d",n),(!u||s[0]&262144&&r!==(r=a[20](a[36].key)))&&m(t,"stroke",r),(!u||s[0]&262144&&i!==(i=a[20](a[36].key)))&&m(t,"fill",i),(!u||s[0]&262148&&o!==(o=a[2]?a[2]===a[36].key?1:.2:1))&&m(t,"opacity",o)},i(a){u||(a&&Ie(()=>{u&&(l||(l=pn(t,Bt,{},!0)),l.run(1))}),u=!0)},o(a){a&&(l||(l=pn(t,Bt,{},!1)),l.run(0)),u=!1},d(a){a&&z(t),a&&l&&l.end()}}}function to(e){let t,n,r,i,o,l,u;return{c(){t=fe("path"),m(t,"d",n=e[16](e[36])),m(t,"stroke",r=e[20](e[36].key)),m(t,"fill",i=e[20](e[36].key)),m(t,"stroke-width","1"),m(t,"opacity",o=e[2]?e[2]===e[36].key?1:.2:1)},m(a,s){q(a,t,s),u=!0},p(a,s){(!u||s[0]&196608&&n!==(n=a[16](a[36])))&&m(t,"d",n),(!u||s[0]&131072&&r!==(r=a[20](a[36].key)))&&m(t,"stroke",r),(!u||s[0]&131072&&i!==(i=a[20](a[36].key)))&&m(t,"fill",i),(!u||s[0]&131076&&o!==(o=a[2]?a[2]===a[36].key?1:.2:1))&&m(t,"opacity",o)},i(a){u||(a&&Ie(()=>{u&&(l||(l=pn(t,Bt,{},!0)),l.run(1))}),u=!0)},o(a){a&&(l||(l=pn(t,Bt,{},!1)),l.run(0)),u=!1},d(a){a&&z(t),a&&l&&l.end()}}}function no(e){let t,n;return t=new Ks({props:{data:e[13],x:e[19],colorScale:e[20],width:e[12],showDemand:!0,showSpotPrice:!0,aggregationLevel:e[1]}}),{c(){Se(t.$$.fragment)},m(r,i){ke(t,r,i),n=!0},p(r,i){const o={};i[0]&8192&&(o.data=r[13]),i[0]&524288&&(o.x=r[19]),i[0]&4096&&(o.width=r[12]),i[0]&2&&(o.aggregationLevel=r[1]),t.$set(o)},i(r){n||(le(t.$$.fragment,r),n=!0)},o(r){ce(t.$$.fragment,r),n=!1},d(r){Me(t,r)}}}function ef(e){let t,n,r,i,o,l,u,a,s,f,c,h,g,d,w,p,_,b,y,x,M;i=new Dr({props:{width:e[5],yScale:e[9],ticks:e[9].ticks(8),title:e[3]==="en"?"Power Generation (GW)":"発電量 (GW)",orientation:"left"}}),l=new Dr({props:{width:0,yScale:e[7],ticks:e[7].ticks(8),title:e[3]==="en"?"JEPX System Price (JPY/kWh)":"JEPXシステムプライス (円/kWh)",orientation:"right"}}),a=new ol({props:{height:e[4],width:e[5],interval:e[1],xScale:e[8]}});let v=be(e[18]),S=[];for(let k=0;k<v.length;k+=1)S[k]=eo(ji(e,v,k));const Y=k=>ce(S[k],1,1,()=>{S[k]=null});let X=be(e[17]),F=[];for(let k=0;k<X.length;k+=1)F[k]=to(Qi(e,X,k));const T=k=>ce(F[k],1,1,()=>{F[k]=null});function L(k){e[30](k)}function H(k){e[31](k)}let R={width:e[5],height:e[4],xScale:e[8],margin:e[21]};e[6]!==void 0&&(R.hoveredDate=e[6]),e[19]!==void 0&&(R.xPos=e[19]),_=new Rs({props:R}),Oe.push(()=>qt(_,"hoveredDate",L)),Oe.push(()=>qt(_,"xPos",H));let W=e[6]&&e[13]&&no(e);return{c(){t=V("div"),n=fe("svg"),r=fe("g"),Se(i.$$.fragment),o=fe("g"),Se(l.$$.fragment),Se(a.$$.fragment),s=fe("line");for(let k=0;k<S.length;k+=1)S[k].c();h=Lt();for(let k=0;k<F.length;k+=1)F[k].c();g=fe("path"),w=fe("path"),Se(_.$$.fragment),x=ae(),W&&W.c(),m(o,"transform",u="translate("+e[5]+", 0)"),m(s,"x1","0"),m(s,"y1",f=e[9](0)),m(s,"x2",e[5]),m(s,"y2",c=e[9](0)),m(s,"stroke","black"),m(s,"stroke-width","1"),m(s,"stroke-dasharray","4,4"),m(g,"d",d=e[15](e[0])),m(g,"fill","none"),m(g,"stroke","black"),m(g,"stroke-width","2"),m(w,"d",p=e[14](e[0])),m(w,"fill","none"),m(w,"stroke","purple"),m(w,"stroke-width","2"),m(r,"transform","translate("+e[21].left+" "+e[21].top+")"),m(n,"width",e[12]),m(n,"height",e[11]),m(t,"class","chart-container svelte-ou68eo")},m(k,C){q(k,t,C),E(t,n),E(n,r),ke(i,r,null),E(r,o),ke(l,o,null),ke(a,r,null),E(r,s);for(let B=0;B<S.length;B+=1)S[B]&&S[B].m(r,null);E(r,h);for(let B=0;B<F.length;B+=1)F[B]&&F[B].m(r,null);E(r,g),E(r,w),ke(_,r,null),E(t,x),W&&W.m(t,null),e[32](t),M=!0},p(k,C){const B={};C[0]&32&&(B.width=k[5]),C[0]&512&&(B.yScale=k[9]),C[0]&512&&(B.ticks=k[9].ticks(8)),C[0]&8&&(B.title=k[3]==="en"?"Power Generation (GW)":"発電量 (GW)"),i.$set(B);const K={};C[0]&128&&(K.yScale=k[7]),C[0]&128&&(K.ticks=k[7].ticks(8)),C[0]&8&&(K.title=k[3]==="en"?"JEPX System Price (JPY/kWh)":"JEPXシステムプライス (円/kWh)"),l.$set(K),(!M||C[0]&32&&u!==(u="translate("+k[5]+", 0)"))&&m(o,"transform",u);const Z={};if(C[0]&16&&(Z.height=k[4]),C[0]&32&&(Z.width=k[5]),C[0]&2&&(Z.interval=k[1]),C[0]&256&&(Z.xScale=k[8]),a.$set(Z),(!M||C[0]&512&&f!==(f=k[9](0)))&&m(s,"y1",f),(!M||C[0]&32)&&m(s,"x2",k[5]),(!M||C[0]&512&&c!==(c=k[9](0)))&&m(s,"y2",c),C[0]&1376260){v=be(k[18]);let O;for(O=0;O<v.length;O+=1){const N=ji(k,v,O);S[O]?(S[O].p(N,C),le(S[O],1)):(S[O]=eo(N),S[O].c(),le(S[O],1),S[O].m(r,h))}for(bt(),O=v.length;O<S.length;O+=1)Y(O);kt()}if(C[0]&1245188){X=be(k[17]);let O;for(O=0;O<X.length;O+=1){const N=Qi(k,X,O);F[O]?(F[O].p(N,C),le(F[O],1)):(F[O]=to(N),F[O].c(),le(F[O],1),F[O].m(r,g))}for(bt(),O=X.length;O<F.length;O+=1)T(O);kt()}(!M||C[0]&32769&&d!==(d=k[15](k[0])))&&m(g,"d",d),(!M||C[0]&16385&&p!==(p=k[14](k[0])))&&m(w,"d",p);const $={};C[0]&32&&($.width=k[5]),C[0]&16&&($.height=k[4]),C[0]&256&&($.xScale=k[8]),!b&&C[0]&64&&(b=!0,$.hoveredDate=k[6],Rt(()=>b=!1)),!y&&C[0]&524288&&(y=!0,$.xPos=k[19],Rt(()=>y=!1)),_.$set($),(!M||C[0]&4096)&&m(n,"width",k[12]),(!M||C[0]&2048)&&m(n,"height",k[11]),k[6]&&k[13]?W?(W.p(k,C),C[0]&8256&&le(W,1)):(W=no(k),W.c(),le(W,1),W.m(t,null)):W&&(bt(),ce(W,1,1,()=>{W=null}),kt())},i(k){if(!M){le(i.$$.fragment,k),le(l.$$.fragment,k),le(a.$$.fragment,k);for(let C=0;C<v.length;C+=1)le(S[C]);for(let C=0;C<X.length;C+=1)le(F[C]);le(_.$$.fragment,k),le(W),M=!0}},o(k){ce(i.$$.fragment,k),ce(l.$$.fragment,k),ce(a.$$.fragment,k),S=S.filter(Boolean);for(let C=0;C<S.length;C+=1)ce(S[C]);F=F.filter(Boolean);for(let C=0;C<F.length;C+=1)ce(F[C]);ce(_.$$.fragment,k),ce(W),M=!1},d(k){k&&z(t),Me(i),Me(l),Me(a),tt(S,k),tt(F,k),Me(_),W&&W.d(),e[32](null)}}}function tf(e){const t=Object.keys(e[0]||{}).filter(r=>r!=="date"&&r!=="region"&&r!=="demand"&&r!=="spot_price"),n={};return t.forEach(r=>{n[r]=e.reduce((i,o)=>i+(o[r]||0),0)}),t.sort((r,i)=>n[i]-n[r])}function ro(e,t){if(e.length)for(let n=0,r=e[0].length;n<r;++n){let i=0,o=0;for(let l=0;l<e.length;++l){const u=e[l][n][1]-e[l][n][0];u<0?(e[l][n][1]=o,e[l][n][0]=o+=u):(e[l][n][0]=i,e[l][n][1]=i+=u)}}}function rr(e){const t=new Date(e),n=t.getDay();return t.setDate(t.getDate()-n),t.setHours(0,0,0,0),t}function nf(e,t,n){let r,i,o,l,u,a,s,f,c,h,g,d,w,p,_,b,y,x,M,{data:v,aggregationLevel:S,clickedItem:Y}=t,{currentLang:X="en"}=t;const F=Po().domain(Object.keys(xr)).range(Object.values(xr)),T={top:40,right:50,bottom:30,left:50};let L,H=520,R=600,W=H-T.top-T.bottom,k=R-T.left-T.right;Yn(()=>{C()}),Lo(()=>{C()});function C(){L&&(n(12,R=L.clientWidth),n(5,k=R-T.left-T.right),n(11,H=L.clientHeight),n(4,W=H-T.top-T.bottom))}function B(N,te){const ie=[],oe=[];return te.forEach(j=>{const _e=N.some(I=>(I[j]||0)<0),A=N.some(I=>(I[j]||0)>0);_e&&oe.push(j),A&&ie.push(j)}),{positiveKeys:ie,negativeKeys:oe}}function K(N,te,ie){return N.length?N.reduce((oe,j)=>{const _e=new Date(j.date),A=_e.getTime(),I=oe?new Date(oe.date):null,G=I?I.getTime():null;if(!oe||A===te)return j;if(ie==="hourly"){if(Math.abs(A-te)<Math.abs(G-te))return j}else if(ie==="daily"){const D=new Date(te).setHours(0,0,0,0),ne=new Date(_e).setHours(0,0,0,0),J=new Date(I).setHours(0,0,0,0);if(Math.abs(ne-D)<Math.abs(J-D))return j}else if(ie==="weekly"){const D=rr(new Date(te)),ne=rr(_e),J=rr(I);if(Math.abs(ne.getTime()-D.getTime())<Math.abs(J.getTime()-D.getTime()))return j}else if(ie==="monthly"){const D=new Date(te),ne=D.getMonth(),J=D.getFullYear(),Q=_e.getMonth(),ge=_e.getFullYear(),U=I.getMonth(),ue=I.getFullYear(),Ne=J*12+ne,de=ge*12+Q,Qt=ue*12+U;if(Math.abs(de-Ne)<Math.abs(Qt-Ne))return j}return oe},null):null}function Z(N){r=N,n(6,r)}function $(N){i=N,n(19,i)}function O(N){Oe[N?"unshift":"push"](()=>{L=N,n(10,L)})}return e.$$set=N=>{"data"in N&&n(0,v=N.data),"aggregationLevel"in N&&n(1,S=N.aggregationLevel),"clickedItem"in N&&n(2,Y=N.clickedItem),"currentLang"in N&&n(3,X=N.currentLang)},e.$$.update=()=>{e.$$.dirty[0]&1&&n(22,o=tf(v)),e.$$.dirty[0]&4194305&&n(29,l=B(v,o)),e.$$.dirty[0]&536870912&&n(24,u=l.positiveKeys),e.$$.dirty[0]&536870912&&n(23,a=l.negativeKeys),e.$$.dirty[0]&8388609&&n(28,s=Math.min(ci(v,N=>{let te=0;return a.forEach(ie=>{const oe=N[ie]||0;oe<0&&(te+=oe)}),te}),ci(v,N=>N.demand||0))*1.1),e.$$.dirty[0]&16777217&&n(27,f=Math.max(_r(v,N=>{let te=0;return u.forEach(ie=>{const oe=N[ie]||0;oe>0&&(te+=oe)}),te}),_r(v,N=>N.demand||0))*1.1),e.$$.dirty[0]&402653200&&n(9,g=Mn().domain([s,f]).range([W,0])),e.$$.dirty[0]&100663312&&n(7,d=Mn().domain([c,h]).range([W,0])),e.$$.dirty[0]&33&&n(8,w=Kr().domain([new Date(v[0].date),new Date(v[v.length-1].date)]).range([0,k])),e.$$.dirty[0]&20971521&&n(18,p=zi().keys(u).offset(ro)(v.map(N=>{const te={...N};return o.forEach(ie=>{te[ie]=N[ie]>0?N[ie]:0}),te}))),e.$$.dirty[0]&12582913&&n(17,_=zi().keys(a).offset(ro)(v.map(N=>{const te={...N};return o.forEach(ie=>{te[ie]=N[ie]<0?N[ie]:0}),te}))),e.$$.dirty[0]&768&&n(16,b=Ts().x(N=>w(new Date(N.data.date))).y0(N=>g(N[0])).y1(N=>g(N[1]))),e.$$.dirty[0]&768&&n(15,y=Tn().x(N=>w(new Date(N.date))).y(N=>g(N.demand||0))),e.$$.dirty[0]&384&&n(14,x=Tn().x(N=>w(new Date(N.date))).y(N=>d(N.spot_price||0))),e.$$.dirty[0]&67&&n(13,M=r?K(v,r,S):null)},n(6,r=null),n(19,i=0),n(26,c=0),n(25,h=130),[v,S,Y,X,W,k,r,d,w,g,L,H,R,M,x,y,b,_,p,i,F,T,o,a,u,h,c,f,s,l,Z,$,O]}class rf extends Qe{constructor(t){super(),$e(this,t,nf,ef,ze,{data:0,aggregationLevel:1,clickedItem:2,currentLang:3},null,[-1,-1])}}function io(e,t,n){const r=e.slice();return r[15]=t[n],r}function oo(e){let t,n,r,i,o,l,u,a,s,f=e[15][0]+"",c,h,g;return{c(){t=fe("path"),r=fe("circle"),l=fe("circle"),s=fe("text"),c=me(f),m(t,"d",n=e[9](e[15][1])),m(t,"stroke","black"),m(t,"fill","transparent"),m(t,"stroke-width","3"),m(r,"cx",i=e[5](new Date(e[15][1][0].date_id))),m(r,"cy",o=e[4](e[15][1][0].value)),m(r,"r",5),m(r,"fill","black"),m(l,"cx",u=e[5](new Date(e[15][1][e[15][1].length-1].date_id))),m(l,"cy",a=e[4](e[15][1][e[15][1].length-1].value)),m(l,"r",5),m(l,"fill","black"),m(s,"x",h=e[5](new Date(e[15][1][0].date_id))+10),m(s,"y",g=e[4](e[15][1][0].value)-10),m(s,"fill","black"),m(s,"text-anchor","start")},m(d,w){q(d,t,w),q(d,r,w),q(d,l,w),q(d,s,w),E(s,c)},p(d,w){w&520&&n!==(n=d[9](d[15][1]))&&m(t,"d",n),w&40&&i!==(i=d[5](new Date(d[15][1][0].date_id)))&&m(r,"cx",i),w&24&&o!==(o=d[4](d[15][1][0].value))&&m(r,"cy",o),w&40&&u!==(u=d[5](new Date(d[15][1][d[15][1].length-1].date_id)))&&m(l,"cx",u),w&24&&a!==(a=d[4](d[15][1][d[15][1].length-1].value))&&m(l,"cy",a),w&8&&f!==(f=d[15][0]+"")&&xe(c,f),w&40&&h!==(h=d[5](new Date(d[15][1][0].date_id))+10)&&m(s,"x",h),w&24&&g!==(g=d[4](d[15][1][0].value)-10)&&m(s,"y",g)},d(d){d&&(z(t),z(r),z(l),z(s))}}}function of(e){let t,n,r,i,o,l;i=new ol({props:{height:e[1],width:e[2],xScale:e[5],interval:"monthly"}}),o=new Dr({props:{width:e[2],yScale:e[4],ticks:e[4].ticks(6),title:e[0]==="en"?"Power Generation (GW)":"発電量 (GW)"}});let u=be(e[3]),a=[];for(let s=0;s<u.length;s+=1)a[s]=oo(io(e,u,s));return{c(){t=V("div"),n=fe("svg"),r=fe("g"),Se(i.$$.fragment),Se(o.$$.fragment);for(let s=0;s<a.length;s+=1)a[s].c();m(r,"transform","translate("+e[10].left+" "+e[10].top+")"),m(n,"width",e[7]),m(n,"height",e[8]),m(t,"class","chart-container svelte-h4stok")},m(s,f){q(s,t,f),E(t,n),E(n,r),ke(i,r,null),ke(o,r,null);for(let c=0;c<a.length;c+=1)a[c]&&a[c].m(r,null);e[13](t),l=!0},p(s,[f]){const c={};f&2&&(c.height=s[1]),f&4&&(c.width=s[2]),f&32&&(c.xScale=s[5]),i.$set(c);const h={};if(f&4&&(h.width=s[2]),f&16&&(h.yScale=s[4]),f&16&&(h.ticks=s[4].ticks(6)),f&1&&(h.title=s[0]==="en"?"Power Generation (GW)":"発電量 (GW)"),o.$set(h),f&568){u=be(s[3]);let g;for(g=0;g<u.length;g+=1){const d=io(s,u,g);a[g]?a[g].p(d,f):(a[g]=oo(d),a[g].c(),a[g].m(r,null))}for(;g<a.length;g+=1)a[g].d(1);a.length=u.length}(!l||f&128)&&m(n,"width",s[7]),(!l||f&256)&&m(n,"height",s[8])},i(s){l||(le(i.$$.fragment,s),le(o.$$.fragment,s),l=!0)},o(s){ce(i.$$.fragment,s),ce(o.$$.fragment,s),l=!1},d(s){s&&z(t),Me(i),Me(o),tt(a,s),e[13](null)}}}function lf(e,t,n){let r,i,o,l,u,{data:a}=t,{currentLang:s="en"}=t;const f={top:40,right:60,bottom:30,left:60};let c,h=200,g=520,d=g-f.top-f.bottom,w=h-f.left-f.right;Yn(()=>{p()}),Lo(()=>{p()});function p(){c&&(n(7,h=c.clientWidth),n(2,w=h-f.left-f.right),n(8,g=c.clientHeight),n(1,d=g-f.top-f.bottom))}function _(b){Oe[b?"unshift":"push"](()=>{c=b,n(6,c)})}return e.$$set=b=>{"data"in b&&n(11,a=b.data),"currentLang"in b&&n(0,s=b.currentLang)},e.$$.update=()=>{e.$$.dirty&2048&&n(12,r=a&&a.length>0?_r(a,b=>b.value)*1.1:1e3),e.$$.dirty&2048&&n(3,i=aa(a,b=>b.type)),e.$$.dirty&4098&&n(4,o=Mn().domain([0,r]).range([d,0])),e.$$.dirty&2052&&n(5,l=Kr().domain([new Date(a[0].date_id),new Date(a[a.length-1].date_id)]).range([0,w])),e.$$.dirty&48&&n(9,u=Tn().x((b,y)=>l(new Date(b.date_id))).y(b=>o(b.value))),e.$$.dirty&8&&console.log(i)},[s,d,w,i,o,l,c,h,g,u,f,a,r,_]}class af extends Qe{constructor(t){super(),$e(this,t,lf,of,ze,{data:11,currentLang:0})}}var Sr="http://www.w3.org/1999/xhtml";const lo={svg:"http://www.w3.org/2000/svg",xhtml:Sr,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function In(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),lo.hasOwnProperty(t)?{space:lo[t],local:e}:e}function uf(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Sr&&t.documentElement.namespaceURI===Sr?t.createElement(e):t.createElementNS(n,e)}}function sf(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function al(e){var t=In(e);return(t.local?sf:uf)(t)}function ff(){}function $r(e){return e==null?ff:function(){return this.querySelector(e)}}function cf(e){typeof e!="function"&&(e=$r(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],l=o.length,u=r[i]=new Array(l),a,s,f=0;f<l;++f)(a=o[f])&&(s=e.call(a,a.__data__,f,o))&&("__data__"in a&&(s.__data__=a.__data__),u[f]=s);return new Te(r,this._parents)}function hf(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function gf(){return[]}function ul(e){return e==null?gf:function(){return this.querySelectorAll(e)}}function df(e){return function(){return hf(e.apply(this,arguments))}}function mf(e){typeof e=="function"?e=df(e):e=ul(e);for(var t=this._groups,n=t.length,r=[],i=[],o=0;o<n;++o)for(var l=t[o],u=l.length,a,s=0;s<u;++s)(a=l[s])&&(r.push(e.call(a,a.__data__,s,l)),i.push(a));return new Te(r,i)}function sl(e){return function(){return this.matches(e)}}function fl(e){return function(t){return t.matches(e)}}var pf=Array.prototype.find;function _f(e){return function(){return pf.call(this.children,e)}}function yf(){return this.firstElementChild}function wf(e){return this.select(e==null?yf:_f(typeof e=="function"?e:fl(e)))}var vf=Array.prototype.filter;function bf(){return Array.from(this.children)}function kf(e){return function(){return vf.call(this.children,e)}}function Mf(e){return this.selectAll(e==null?bf:kf(typeof e=="function"?e:fl(e)))}function Df(e){typeof e!="function"&&(e=sl(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],l=o.length,u=r[i]=[],a,s=0;s<l;++s)(a=o[s])&&e.call(a,a.__data__,s,o)&&u.push(a);return new Te(r,this._parents)}function cl(e){return new Array(e.length)}function xf(){return new Te(this._enter||this._groups.map(cl),this._parents)}function Nn(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Nn.prototype={constructor:Nn,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Sf(e){return function(){return e}}function Tf(e,t,n,r,i,o){for(var l=0,u,a=t.length,s=o.length;l<s;++l)(u=t[l])?(u.__data__=o[l],r[l]=u):n[l]=new Nn(e,o[l]);for(;l<a;++l)(u=t[l])&&(i[l]=u)}function Cf(e,t,n,r,i,o,l){var u,a,s=new Map,f=t.length,c=o.length,h=new Array(f),g;for(u=0;u<f;++u)(a=t[u])&&(h[u]=g=l.call(a,a.__data__,u,t)+"",s.has(g)?i[u]=a:s.set(g,a));for(u=0;u<c;++u)g=l.call(e,o[u],u,o)+"",(a=s.get(g))?(r[u]=a,a.__data__=o[u],s.delete(g)):n[u]=new Nn(e,o[u]);for(u=0;u<f;++u)(a=t[u])&&s.get(h[u])===a&&(i[u]=a)}function Af(e){return e.__data__}function Nf(e,t){if(!arguments.length)return Array.from(this,Af);var n=t?Cf:Tf,r=this._parents,i=this._groups;typeof e!="function"&&(e=Sf(e));for(var o=i.length,l=new Array(o),u=new Array(o),a=new Array(o),s=0;s<o;++s){var f=r[s],c=i[s],h=c.length,g=Ef(e.call(f,f&&f.__data__,s,r)),d=g.length,w=u[s]=new Array(d),p=l[s]=new Array(d),_=a[s]=new Array(h);n(f,c,w,p,_,g,t);for(var b=0,y=0,x,M;b<d;++b)if(x=w[b]){for(b>=y&&(y=b+1);!(M=p[y])&&++y<d;);x._next=M||null}}return l=new Te(l,r),l._enter=u,l._exit=a,l}function Ef(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Ff(){return new Te(this._exit||this._groups.map(cl),this._parents)}function Lf(e,t,n){var r=this.enter(),i=this,o=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function Uf(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,o=r.length,l=Math.min(i,o),u=new Array(i),a=0;a<l;++a)for(var s=n[a],f=r[a],c=s.length,h=u[a]=new Array(c),g,d=0;d<c;++d)(g=s[d]||f[d])&&(h[d]=g);for(;a<i;++a)u[a]=n[a];return new Te(u,this._parents)}function Pf(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,o=r[i],l;--i>=0;)(l=r[i])&&(o&&l.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(l,o),o=l);return this}function Yf(e){e||(e=Of);function t(c,h){return c&&h?e(c.__data__,h.__data__):!c-!h}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var l=n[o],u=l.length,a=i[o]=new Array(u),s,f=0;f<u;++f)(s=l[f])&&(a[f]=s);a.sort(t)}return new Te(i,this._parents).order()}function Of(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Hf(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function If(){return Array.from(this)}function Wf(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var l=r[i];if(l)return l}return null}function zf(){let e=0;for(const t of this)++e;return e}function Rf(){return!this.node()}function qf(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],o=0,l=i.length,u;o<l;++o)(u=i[o])&&e.call(u,u.__data__,o,i);return this}function Xf(e){return function(){this.removeAttribute(e)}}function Vf(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Gf(e,t){return function(){this.setAttribute(e,t)}}function Bf(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Jf(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Kf(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Zf(e,t){var n=In(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?Vf:Xf:typeof t=="function"?n.local?Kf:Jf:n.local?Bf:Gf)(n,t))}function hl(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function $f(e){return function(){this.style.removeProperty(e)}}function Qf(e,t,n){return function(){this.style.setProperty(e,t,n)}}function jf(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function ec(e,t,n){return arguments.length>1?this.each((t==null?$f:typeof t=="function"?jf:Qf)(e,t,n??"")):Et(this.node(),e)}function Et(e,t){return e.style.getPropertyValue(t)||hl(e).getComputedStyle(e,null).getPropertyValue(t)}function tc(e){return function(){delete this[e]}}function nc(e,t){return function(){this[e]=t}}function rc(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function ic(e,t){return arguments.length>1?this.each((t==null?tc:typeof t=="function"?rc:nc)(e,t)):this.node()[e]}function gl(e){return e.trim().split(/^|\s+/)}function Qr(e){return e.classList||new dl(e)}function dl(e){this._node=e,this._names=gl(e.getAttribute("class")||"")}dl.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function ml(e,t){for(var n=Qr(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function pl(e,t){for(var n=Qr(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function oc(e){return function(){ml(this,e)}}function lc(e){return function(){pl(this,e)}}function ac(e,t){return function(){(t.apply(this,arguments)?ml:pl)(this,e)}}function uc(e,t){var n=gl(e+"");if(arguments.length<2){for(var r=Qr(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?ac:t?oc:lc)(n,t))}function sc(){this.textContent=""}function fc(e){return function(){this.textContent=e}}function cc(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function hc(e){return arguments.length?this.each(e==null?sc:(typeof e=="function"?cc:fc)(e)):this.node().textContent}function gc(){this.innerHTML=""}function dc(e){return function(){this.innerHTML=e}}function mc(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function pc(e){return arguments.length?this.each(e==null?gc:(typeof e=="function"?mc:dc)(e)):this.node().innerHTML}function _c(){this.nextSibling&&this.parentNode.appendChild(this)}function yc(){return this.each(_c)}function wc(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function vc(){return this.each(wc)}function bc(e){var t=typeof e=="function"?e:al(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function kc(){return null}function Mc(e,t){var n=typeof e=="function"?e:al(e),r=t==null?kc:typeof t=="function"?t:$r(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Dc(){var e=this.parentNode;e&&e.removeChild(this)}function xc(){return this.each(Dc)}function Sc(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Tc(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Cc(e){return this.select(e?Tc:Sc)}function Ac(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Nc(e){return function(t){e.call(this,t,this.__data__)}}function Ec(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function Fc(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,o;n<i;++n)o=t[n],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):t[++r]=o;++r?t.length=r:delete this.__on}}}function Lc(e,t,n){return function(){var r=this.__on,i,o=Nc(t);if(r){for(var l=0,u=r.length;l<u;++l)if((i=r[l]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=t;return}}this.addEventListener(e.type,o,n),i={type:e.type,name:e.name,value:t,listener:o,options:n},r?r.push(i):this.__on=[i]}}function Uc(e,t,n){var r=Ec(e+""),i,o=r.length,l;if(arguments.length<2){var u=this.node().__on;if(u){for(var a=0,s=u.length,f;a<s;++a)for(i=0,f=u[a];i<o;++i)if((l=r[i]).type===f.type&&l.name===f.name)return f.value}return}for(u=t?Lc:Fc,i=0;i<o;++i)this.each(u(r[i],t,n));return this}function _l(e,t,n){var r=hl(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Pc(e,t){return function(){return _l(this,e,t)}}function Yc(e,t){return function(){return _l(this,e,t.apply(this,arguments))}}function Oc(e,t){return this.each((typeof t=="function"?Yc:Pc)(e,t))}function*Hc(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length,l;i<o;++i)(l=r[i])&&(yield l)}var yl=[null];function Te(e,t){this._groups=e,this._parents=t}function $t(){return new Te([[document.documentElement]],yl)}function Ic(){return this}Te.prototype=$t.prototype={constructor:Te,select:cf,selectAll:mf,selectChild:wf,selectChildren:Mf,filter:Df,data:Nf,enter:xf,exit:Ff,join:Lf,merge:Uf,selection:Ic,order:Pf,sort:Yf,call:Hf,nodes:If,node:Wf,size:zf,empty:Rf,each:qf,attr:Zf,style:ec,property:ic,classed:uc,text:hc,html:pc,raise:yc,lower:vc,append:bc,insert:Mc,remove:xc,clone:Cc,datum:Ac,on:Uc,dispatch:Oc,[Symbol.iterator]:Hc};function Ve(e){return typeof e=="string"?new Te([[document.querySelector(e)]],[document.documentElement]):new Te([[e]],yl)}function Wc(e){let t;for(;t=e.sourceEvent;)e=t;return e}function ao(e,t){if(e=Wc(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}var zc={value:()=>{}};function jr(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new un(n)}function un(e){this._=e}function Rc(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}un.prototype=jr.prototype={constructor:un,on:function(e,t){var n=this._,r=Rc(e+"",n),i,o=-1,l=r.length;if(arguments.length<2){for(;++o<l;)if((i=(e=r[o]).type)&&(i=qc(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<l;)if(i=(e=r[o]).type)n[i]=uo(n[i],e.name,t);else if(t==null)for(i in n)n[i]=uo(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new un(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};function qc(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function uo(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=zc,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}const Tr={capture:!0,passive:!1};function Cr(e){e.preventDefault(),e.stopImmediatePropagation()}function Xc(e){var t=e.document.documentElement,n=Ve(e).on("dragstart.drag",Cr,Tr);"onselectstart"in t?n.on("selectstart.drag",Cr,Tr):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Vc(e,t){var n=e.document.documentElement,r=Ve(e).on("dragstart.drag",null);t&&(r.on("click.drag",Cr,Tr),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}var Ft=0,It=0,Ht=0,wl=1e3,En,Wt,Fn=0,ut=0,Wn=0,Jt=typeof performance=="object"&&performance.now?performance:Date,vl=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function ei(){return ut||(vl(Gc),ut=Jt.now()+Wn)}function Gc(){ut=0}function Ln(){this._call=this._time=this._next=null}Ln.prototype=bl.prototype={constructor:Ln,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?ei():+n)+(t==null?0:+t),!this._next&&Wt!==this&&(Wt?Wt._next=this:En=this,Wt=this),this._call=e,this._time=n,Ar()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ar())}};function bl(e,t,n){var r=new Ln;return r.restart(e,t,n),r}function Bc(){ei(),++Ft;for(var e=En,t;e;)(t=ut-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Ft}function so(){ut=(Fn=Jt.now())+Wn,Ft=It=0;try{Bc()}finally{Ft=0,Kc(),ut=0}}function Jc(){var e=Jt.now(),t=e-Fn;t>wl&&(Wn-=t,Fn=e)}function Kc(){for(var e,t=En,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:En=n);Wt=e,Ar(r)}function Ar(e){if(!Ft){It&&(It=clearTimeout(It));var t=e-ut;t>24?(e<1/0&&(It=setTimeout(so,e-Jt.now()-Wn)),Ht&&(Ht=clearInterval(Ht))):(Ht||(Fn=Jt.now(),Ht=setInterval(Jc,wl)),Ft=1,vl(so))}}function fo(e,t,n){var r=new Ln;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var Zc=jr("start","end","cancel","interrupt"),$c=[],kl=0,co=1,Nr=2,sn=3,ho=4,Er=5,fn=6;function zn(e,t,n,r,i,o){var l=e.__transition;if(!l)e.__transition={};else if(n in l)return;Qc(e,n,{name:t,index:r,group:i,on:Zc,tween:$c,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:kl})}function ti(e,t){var n=Le(e,t);if(n.state>kl)throw new Error("too late; already scheduled");return n}function Re(e,t){var n=Le(e,t);if(n.state>sn)throw new Error("too late; already running");return n}function Le(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Qc(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=bl(o,0,n.time);function o(s){n.state=co,n.timer.restart(l,n.delay,n.time),n.delay<=s&&l(s-n.delay)}function l(s){var f,c,h,g;if(n.state!==co)return a();for(f in r)if(g=r[f],g.name===n.name){if(g.state===sn)return fo(l);g.state===ho?(g.state=fn,g.timer.stop(),g.on.call("interrupt",e,e.__data__,g.index,g.group),delete r[f]):+f<t&&(g.state=fn,g.timer.stop(),g.on.call("cancel",e,e.__data__,g.index,g.group),delete r[f])}if(fo(function(){n.state===sn&&(n.state=ho,n.timer.restart(u,n.delay,n.time),u(s))}),n.state=Nr,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Nr){for(n.state=sn,i=new Array(h=n.tween.length),f=0,c=-1;f<h;++f)(g=n.tween[f].value.call(e,e.__data__,n.index,n.group))&&(i[++c]=g);i.length=c+1}}function u(s){for(var f=s<n.duration?n.ease.call(null,s/n.duration):(n.timer.restart(a),n.state=Er,1),c=-1,h=i.length;++c<h;)i[c].call(e,f);n.state===Er&&(n.on.call("end",e,e.__data__,n.index,n.group),a())}function a(){n.state=fn,n.timer.stop(),delete r[t];for(var s in r)return;delete e.__transition}}function Fr(e,t){var n=e.__transition,r,i,o=!0,l;if(n){t=t==null?null:t+"";for(l in n){if((r=n[l]).name!==t){o=!1;continue}i=r.state>Nr&&r.state<Er,r.state=fn,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[l]}o&&delete e.__transition}}function jc(e){return this.each(function(){Fr(this,e)})}function eh(e,t){var n,r;return function(){var i=Re(this,e),o=i.tween;if(o!==n){r=n=o;for(var l=0,u=r.length;l<u;++l)if(r[l].name===t){r=r.slice(),r.splice(l,1);break}}i.tween=r}}function th(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=Re(this,e),l=o.tween;if(l!==r){i=(r=l).slice();for(var u={name:t,value:n},a=0,s=i.length;a<s;++a)if(i[a].name===t){i[a]=u;break}a===s&&i.push(u)}o.tween=i}}function nh(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Le(this.node(),n).tween,i=0,o=r.length,l;i<o;++i)if((l=r[i]).name===e)return l.value;return null}return this.each((t==null?eh:th)(n,e,t))}function ni(e,t,n){var r=e._id;return e.each(function(){var i=Re(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return Le(i,r).value[t]}}function Ml(e,t){var n;return(typeof t=="number"?Ee:t instanceof lt?vn:(n=lt(t))?(t=n,vn):Io)(e,t)}function rh(e){return function(){this.removeAttribute(e)}}function ih(e){return function(){this.removeAttributeNS(e.space,e.local)}}function oh(e,t,n){var r,i=n+"",o;return function(){var l=this.getAttribute(e);return l===i?null:l===r?o:o=t(r=l,n)}}function lh(e,t,n){var r,i=n+"",o;return function(){var l=this.getAttributeNS(e.space,e.local);return l===i?null:l===r?o:o=t(r=l,n)}}function ah(e,t,n){var r,i,o;return function(){var l,u=n(this),a;return u==null?void this.removeAttribute(e):(l=this.getAttribute(e),a=u+"",l===a?null:l===r&&a===i?o:(i=a,o=t(r=l,u)))}}function uh(e,t,n){var r,i,o;return function(){var l,u=n(this),a;return u==null?void this.removeAttributeNS(e.space,e.local):(l=this.getAttributeNS(e.space,e.local),a=u+"",l===a?null:l===r&&a===i?o:(i=a,o=t(r=l,u)))}}function sh(e,t){var n=In(e),r=n==="transform"?Ia:Ml;return this.attrTween(e,typeof t=="function"?(n.local?uh:ah)(n,r,ni(this,"attr."+e,t)):t==null?(n.local?ih:rh)(n):(n.local?lh:oh)(n,r,t))}function fh(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function ch(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function hh(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&ch(e,o)),n}return i._value=t,i}function gh(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&fh(e,o)),n}return i._value=t,i}function dh(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=In(e);return this.tween(n,(r.local?hh:gh)(r,t))}function mh(e,t){return function(){ti(this,e).delay=+t.apply(this,arguments)}}function ph(e,t){return t=+t,function(){ti(this,e).delay=t}}function _h(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?mh:ph)(t,e)):Le(this.node(),t).delay}function yh(e,t){return function(){Re(this,e).duration=+t.apply(this,arguments)}}function wh(e,t){return t=+t,function(){Re(this,e).duration=t}}function vh(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?yh:wh)(t,e)):Le(this.node(),t).duration}function bh(e,t){if(typeof t!="function")throw new Error;return function(){Re(this,e).ease=t}}function kh(e){var t=this._id;return arguments.length?this.each(bh(t,e)):Le(this.node(),t).ease}function Mh(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Re(this,e).ease=n}}function Dh(e){if(typeof e!="function")throw new Error;return this.each(Mh(this._id,e))}function xh(e){typeof e!="function"&&(e=sl(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],l=o.length,u=r[i]=[],a,s=0;s<l;++s)(a=o[s])&&e.call(a,a.__data__,s,o)&&u.push(a);return new Ze(r,this._parents,this._name,this._id)}function Sh(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),l=new Array(r),u=0;u<o;++u)for(var a=t[u],s=n[u],f=a.length,c=l[u]=new Array(f),h,g=0;g<f;++g)(h=a[g]||s[g])&&(c[g]=h);for(;u<r;++u)l[u]=t[u];return new Ze(l,this._parents,this._name,this._id)}function Th(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Ch(e,t,n){var r,i,o=Th(t)?ti:Re;return function(){var l=o(this,e),u=l.on;u!==r&&(i=(r=u).copy()).on(t,n),l.on=i}}function Ah(e,t){var n=this._id;return arguments.length<2?Le(this.node(),n).on.on(e):this.each(Ch(n,e,t))}function Nh(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Eh(){return this.on("end.remove",Nh(this._id))}function Fh(e){var t=this._name,n=this._id;typeof e!="function"&&(e=$r(e));for(var r=this._groups,i=r.length,o=new Array(i),l=0;l<i;++l)for(var u=r[l],a=u.length,s=o[l]=new Array(a),f,c,h=0;h<a;++h)(f=u[h])&&(c=e.call(f,f.__data__,h,u))&&("__data__"in f&&(c.__data__=f.__data__),s[h]=c,zn(s[h],t,n,h,s,Le(f,n)));return new Ze(o,this._parents,t,n)}function Lh(e){var t=this._name,n=this._id;typeof e!="function"&&(e=ul(e));for(var r=this._groups,i=r.length,o=[],l=[],u=0;u<i;++u)for(var a=r[u],s=a.length,f,c=0;c<s;++c)if(f=a[c]){for(var h=e.call(f,f.__data__,c,a),g,d=Le(f,n),w=0,p=h.length;w<p;++w)(g=h[w])&&zn(g,t,n,w,h,d);o.push(h),l.push(f)}return new Ze(o,l,t,n)}var Uh=$t.prototype.constructor;function Ph(){return new Uh(this._groups,this._parents)}function Yh(e,t){var n,r,i;return function(){var o=Et(this,e),l=(this.style.removeProperty(e),Et(this,e));return o===l?null:o===n&&l===r?i:i=t(n=o,r=l)}}function Dl(e){return function(){this.style.removeProperty(e)}}function Oh(e,t,n){var r,i=n+"",o;return function(){var l=Et(this,e);return l===i?null:l===r?o:o=t(r=l,n)}}function Hh(e,t,n){var r,i,o;return function(){var l=Et(this,e),u=n(this),a=u+"";return u==null&&(a=u=(this.style.removeProperty(e),Et(this,e))),l===a?null:l===r&&a===i?o:(i=a,o=t(r=l,u))}}function Ih(e,t){var n,r,i,o="style."+t,l="end."+o,u;return function(){var a=Re(this,e),s=a.on,f=a.value[o]==null?u||(u=Dl(t)):void 0;(s!==n||i!==f)&&(r=(n=s).copy()).on(l,i=f),a.on=r}}function Wh(e,t,n){var r=(e+="")=="transform"?Ha:Ml;return t==null?this.styleTween(e,Yh(e,r)).on("end.style."+e,Dl(e)):typeof t=="function"?this.styleTween(e,Hh(e,r,ni(this,"style."+e,t))).each(Ih(this._id,e)):this.styleTween(e,Oh(e,r,t),n).on("end.style."+e,null)}function zh(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function Rh(e,t,n){var r,i;function o(){var l=t.apply(this,arguments);return l!==i&&(r=(i=l)&&zh(e,l,n)),r}return o._value=t,o}function qh(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,Rh(e,t,n??""))}function Xh(e){return function(){this.textContent=e}}function Vh(e){return function(){var t=e(this);this.textContent=t??""}}function Gh(e){return this.tween("text",typeof e=="function"?Vh(ni(this,"text",e)):Xh(e==null?"":e+""))}function Bh(e){return function(t){this.textContent=e.call(this,t)}}function Jh(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&Bh(i)),t}return r._value=e,r}function Kh(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Jh(e))}function Zh(){for(var e=this._name,t=this._id,n=xl(),r=this._groups,i=r.length,o=0;o<i;++o)for(var l=r[o],u=l.length,a,s=0;s<u;++s)if(a=l[s]){var f=Le(a,t);zn(a,e,n,s,l,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new Ze(r,this._parents,e,n)}function $h(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(o,l){var u={value:l},a={value:function(){--i===0&&o()}};n.each(function(){var s=Re(this,r),f=s.on;f!==e&&(t=(e=f).copy(),t._.cancel.push(u),t._.interrupt.push(u),t._.end.push(a)),s.on=t}),i===0&&o()})}var Qh=0;function Ze(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function xl(){return++Qh}var qe=$t.prototype;Ze.prototype={constructor:Ze,select:Fh,selectAll:Lh,selectChild:qe.selectChild,selectChildren:qe.selectChildren,filter:xh,merge:Sh,selection:Ph,transition:Zh,call:qe.call,nodes:qe.nodes,node:qe.node,size:qe.size,empty:qe.empty,each:qe.each,on:Ah,attr:sh,attrTween:dh,style:Wh,styleTween:qh,text:Gh,textTween:Kh,remove:Eh,tween:nh,delay:_h,duration:vh,ease:kh,easeVarying:Dh,end:$h,[Symbol.iterator]:qe[Symbol.iterator]};function jh(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var e0={time:null,delay:0,duration:250,ease:jh};function t0(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function n0(e){var t,n;e instanceof Ze?(t=e._id,e=e._name):(t=xl(),(n=e0).time=ei(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var l=r[o],u=l.length,a,s=0;s<u;++s)(a=l[s])&&zn(a,e,t,s,l,n||t0(a,t));return new Ze(r,this._parents,e,t)}$t.prototype.interrupt=jc;$t.prototype.transition=n0;const ir=e=>()=>e;function r0(e,{sourceEvent:t,target:n,selection:r,mode:i,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:o}})}function i0(e){e.stopImmediatePropagation()}function or(e){e.preventDefault(),e.stopImmediatePropagation()}var go={name:"drag"},lr={name:"space"},gt={name:"handle"},dt={name:"center"};const{abs:mo,max:we,min:ve}=Math;function po(e){return[+e[0],+e[1]]}function _o(e){return[po(e[0]),po(e[1])]}var cn={name:"x",handles:["w","e"].map(Un),input:function(e,t){return e==null?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},ar={name:"y",handles:["n","s"].map(Un),input:function(e,t){return e==null?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},Xe={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},yo={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},wo={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},o0={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},l0={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function Un(e){return{type:e}}function a0(e){return!e.ctrlKey&&!e.button}function u0(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function s0(){return navigator.maxTouchPoints||"ontouchstart"in this}function ur(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function f0(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function c0(){return h0(cn)}function h0(e){var t=u0,n=a0,r=s0,i=!0,o=jr("start","brush","end"),l=6,u;function a(p){var _=p.property("__brush",w).selectAll(".overlay").data([Un("overlay")]);_.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Xe.overlay).merge(_).each(function(){var y=ur(this).extent;Ve(this).attr("x",y[0][0]).attr("y",y[0][1]).attr("width",y[1][0]-y[0][0]).attr("height",y[1][1]-y[0][1])}),p.selectAll(".selection").data([Un("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Xe.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var b=p.selectAll(".handle").data(e.handles,function(y){return y.type});b.exit().remove(),b.enter().append("rect").attr("class",function(y){return"handle handle--"+y.type}).attr("cursor",function(y){return Xe[y.type]}),p.each(s).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",h).filter(r).on("touchstart.brush",h).on("touchmove.brush",g).on("touchend.brush touchcancel.brush",d).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}a.move=function(p,_,b){p.tween?p.on("start.brush",function(y){f(this,arguments).beforestart().start(y)}).on("interrupt.brush end.brush",function(y){f(this,arguments).end(y)}).tween("brush",function(){var y=this,x=y.__brush,M=f(y,arguments),v=x.selection,S=e.input(typeof _=="function"?_.apply(this,arguments):_,x.extent),Y=On(v,S);function X(F){x.selection=F===1&&S===null?null:Y(F),s.call(y),M.brush()}return v!==null&&S!==null?X:X(1)}):p.each(function(){var y=this,x=arguments,M=y.__brush,v=e.input(typeof _=="function"?_.apply(y,x):_,M.extent),S=f(y,x).beforestart();Fr(y),M.selection=v===null?null:v,s.call(y),S.start(b).brush(b).end(b)})},a.clear=function(p,_){a.move(p,null,_)};function s(){var p=Ve(this),_=ur(this).selection;_?(p.selectAll(".selection").style("display",null).attr("x",_[0][0]).attr("y",_[0][1]).attr("width",_[1][0]-_[0][0]).attr("height",_[1][1]-_[0][1]),p.selectAll(".handle").style("display",null).attr("x",function(b){return b.type[b.type.length-1]==="e"?_[1][0]-l/2:_[0][0]-l/2}).attr("y",function(b){return b.type[0]==="s"?_[1][1]-l/2:_[0][1]-l/2}).attr("width",function(b){return b.type==="n"||b.type==="s"?_[1][0]-_[0][0]+l:l}).attr("height",function(b){return b.type==="e"||b.type==="w"?_[1][1]-_[0][1]+l:l})):p.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function f(p,_,b){var y=p.__brush.emitter;return y&&(!b||!y.clean)?y:new c(p,_,b)}function c(p,_,b){this.that=p,this.args=_,this.state=p.__brush,this.active=0,this.clean=b}c.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(p,_){return this.starting?(this.starting=!1,this.emit("start",p,_)):this.emit("brush",p),this},brush:function(p,_){return this.emit("brush",p,_),this},end:function(p,_){return--this.active===0&&(delete this.state.emitter,this.emit("end",p,_)),this},emit:function(p,_,b){var y=Ve(this.that).datum();o.call(p,this.that,new r0(p,{sourceEvent:_,target:a,selection:e.output(this.state.selection),mode:b,dispatch:o}),y)}};function h(p){if(u&&!p.touches||!n.apply(this,arguments))return;var _=this,b=p.target.__data__.type,y=(i&&p.metaKey?b="overlay":b)==="selection"?go:i&&p.altKey?dt:gt,x=e===ar?null:o0[b],M=e===cn?null:l0[b],v=ur(_),S=v.extent,Y=v.selection,X=S[0][0],F,T,L=S[0][1],H,R,W=S[1][0],k,C,B=S[1][1],K,Z,$=0,O=0,N,te=x&&M&&i&&p.shiftKey,ie,oe,j=Array.from(p.touches||[p],U=>{const ue=U.identifier;return U=ao(U,_),U.point0=U.slice(),U.identifier=ue,U});Fr(_);var _e=f(_,arguments,!0).beforestart();if(b==="overlay"){Y&&(N=!0);const U=[j[0],j[1]||j[0]];v.selection=Y=[[F=e===ar?X:ve(U[0][0],U[1][0]),H=e===cn?L:ve(U[0][1],U[1][1])],[k=e===ar?W:we(U[0][0],U[1][0]),K=e===cn?B:we(U[0][1],U[1][1])]],j.length>1&&ne(p)}else F=Y[0][0],H=Y[0][1],k=Y[1][0],K=Y[1][1];T=F,R=H,C=k,Z=K;var A=Ve(_).attr("pointer-events","none"),I=A.selectAll(".overlay").attr("cursor",Xe[b]);if(p.touches)_e.moved=D,_e.ended=J;else{var G=Ve(p.view).on("mousemove.brush",D,!0).on("mouseup.brush",J,!0);i&&G.on("keydown.brush",Q,!0).on("keyup.brush",ge,!0),Xc(p.view)}s.call(_),_e.start(p,y.name);function D(U){for(const ue of U.changedTouches||[U])for(const Ne of j)Ne.identifier===ue.identifier&&(Ne.cur=ao(ue,_));if(te&&!ie&&!oe&&j.length===1){const ue=j[0];mo(ue.cur[0]-ue[0])>mo(ue.cur[1]-ue[1])?oe=!0:ie=!0}for(const ue of j)ue.cur&&(ue[0]=ue.cur[0],ue[1]=ue.cur[1]);N=!0,or(U),ne(U)}function ne(U){const ue=j[0],Ne=ue.point0;var de;switch($=ue[0]-Ne[0],O=ue[1]-Ne[1],y){case lr:case go:{x&&($=we(X-F,ve(W-k,$)),T=F+$,C=k+$),M&&(O=we(L-H,ve(B-K,O)),R=H+O,Z=K+O);break}case gt:{j[1]?(x&&(T=we(X,ve(W,j[0][0])),C=we(X,ve(W,j[1][0])),x=1),M&&(R=we(L,ve(B,j[0][1])),Z=we(L,ve(B,j[1][1])),M=1)):(x<0?($=we(X-F,ve(W-F,$)),T=F+$,C=k):x>0&&($=we(X-k,ve(W-k,$)),T=F,C=k+$),M<0?(O=we(L-H,ve(B-H,O)),R=H+O,Z=K):M>0&&(O=we(L-K,ve(B-K,O)),R=H,Z=K+O));break}case dt:{x&&(T=we(X,ve(W,F-$*x)),C=we(X,ve(W,k+$*x))),M&&(R=we(L,ve(B,H-O*M)),Z=we(L,ve(B,K+O*M)));break}}C<T&&(x*=-1,de=F,F=k,k=de,de=T,T=C,C=de,b in yo&&I.attr("cursor",Xe[b=yo[b]])),Z<R&&(M*=-1,de=H,H=K,K=de,de=R,R=Z,Z=de,b in wo&&I.attr("cursor",Xe[b=wo[b]])),v.selection&&(Y=v.selection),ie&&(T=Y[0][0],C=Y[1][0]),oe&&(R=Y[0][1],Z=Y[1][1]),(Y[0][0]!==T||Y[0][1]!==R||Y[1][0]!==C||Y[1][1]!==Z)&&(v.selection=[[T,R],[C,Z]],s.call(_),_e.brush(U,y.name))}function J(U){if(i0(U),U.touches){if(U.touches.length)return;u&&clearTimeout(u),u=setTimeout(function(){u=null},500)}else Vc(U.view,N),G.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);A.attr("pointer-events","all"),I.attr("cursor",Xe.overlay),v.selection&&(Y=v.selection),f0(Y)&&(v.selection=null,s.call(_)),_e.end(U,y.name)}function Q(U){switch(U.keyCode){case 16:{te=x&&M;break}case 18:{y===gt&&(x&&(k=C-$*x,F=T+$*x),M&&(K=Z-O*M,H=R+O*M),y=dt,ne(U));break}case 32:{(y===gt||y===dt)&&(x<0?k=C-$:x>0&&(F=T-$),M<0?K=Z-O:M>0&&(H=R-O),y=lr,I.attr("cursor",Xe.selection),ne(U));break}default:return}or(U)}function ge(U){switch(U.keyCode){case 16:{te&&(ie=oe=te=!1,ne(U));break}case 18:{y===dt&&(x<0?k=C:x>0&&(F=T),M<0?K=Z:M>0&&(H=R),y=gt,ne(U));break}case 32:{y===lr&&(U.altKey?(x&&(k=C-$*x,F=T+$*x),M&&(K=Z-O*M,H=R+O*M),y=dt):(x<0?k=C:x>0&&(F=T),M<0?K=Z:M>0&&(H=R),y=gt),I.attr("cursor",Xe[b]),ne(U));break}default:return}or(U)}}function g(p){f(this,arguments).moved(p)}function d(p){f(this,arguments).ended(p)}function w(){var p=this.__brush||{selection:null};return p.extent=_o(t.apply(this,arguments)),p.dim=e,p}return a.extent=function(p){return arguments.length?(t=typeof p=="function"?p:ir(_o(p)),a):t},a.filter=function(p){return arguments.length?(n=typeof p=="function"?p:ir(!!p),a):n},a.touchable=function(p){return arguments.length?(r=typeof p=="function"?p:ir(!!p),a):r},a.handleSize=function(p){return arguments.length?(l=+p,a):l},a.keyModifiers=function(p){return arguments.length?(i=!!p,a):i},a.on=function(){var p=o.on.apply(o,arguments);return p===o?a:p},a}function g0(e){return e}var sr=1,fr=2,Lr=3,on=4,vo=1e-6;function d0(e){return"translate("+e+",0)"}function m0(e){return"translate(0,"+e+")"}function p0(e){return t=>+e(t)}function _0(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),n=>+e(n)+t}function y0(){return!this.__axis}function w0(e,t){var n=[],r=null,i=null,o=6,l=6,u=3,a=typeof window<"u"&&window.devicePixelRatio>1?0:.5,s=e===sr||e===on?-1:1,f=e===on||e===fr?"x":"y",c=e===sr||e===Lr?d0:m0;function h(g){var d=r??(t.ticks?t.ticks.apply(t,n):t.domain()),w=i??(t.tickFormat?t.tickFormat.apply(t,n):g0),p=Math.max(o,0)+u,_=t.range(),b=+_[0]+a,y=+_[_.length-1]+a,x=(t.bandwidth?_0:p0)(t.copy(),a),M=g.selection?g.selection():g,v=M.selectAll(".domain").data([null]),S=M.selectAll(".tick").data(d,t).order(),Y=S.exit(),X=S.enter().append("g").attr("class","tick"),F=S.select("line"),T=S.select("text");v=v.merge(v.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),S=S.merge(X),F=F.merge(X.append("line").attr("stroke","currentColor").attr(f+"2",s*o)),T=T.merge(X.append("text").attr("fill","currentColor").attr(f,s*p).attr("dy",e===sr?"0em":e===Lr?"0.71em":"0.32em")),g!==M&&(v=v.transition(g),S=S.transition(g),F=F.transition(g),T=T.transition(g),Y=Y.transition(g).attr("opacity",vo).attr("transform",function(L){return isFinite(L=x(L))?c(L+a):this.getAttribute("transform")}),X.attr("opacity",vo).attr("transform",function(L){var H=this.parentNode.__axis;return c((H&&isFinite(H=H(L))?H:x(L))+a)})),Y.remove(),v.attr("d",e===on||e===fr?l?"M"+s*l+","+b+"H"+a+"V"+y+"H"+s*l:"M"+a+","+b+"V"+y:l?"M"+b+","+s*l+"V"+a+"H"+y+"V"+s*l:"M"+b+","+a+"H"+y),S.attr("opacity",1).attr("transform",function(L){return c(x(L)+a)}),F.attr(f+"2",s*o),T.attr(f,s*p).text(w),M.filter(y0).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===fr?"start":e===on?"end":"middle"),M.each(function(){this.__axis=x})}return h.scale=function(g){return arguments.length?(t=g,h):t},h.ticks=function(){return n=Array.from(arguments),h},h.tickArguments=function(g){return arguments.length?(n=g==null?[]:Array.from(g),h):n.slice()},h.tickValues=function(g){return arguments.length?(r=g==null?null:Array.from(g),h):r&&r.slice()},h.tickFormat=function(g){return arguments.length?(i=g,h):i},h.tickSize=function(g){return arguments.length?(o=l=+g,h):o},h.tickSizeInner=function(g){return arguments.length?(o=+g,h):o},h.tickSizeOuter=function(g){return arguments.length?(l=+g,h):l},h.tickPadding=function(g){return arguments.length?(u=+g,h):u},h.offset=function(g){return arguments.length?(a=+g,h):a},h}function v0(e){return w0(Lr,e)}function b0(e){let t;return{c(){t=V("div"),t.innerHTML="",m(t,"class","timeslider-container svelte-rv4t1k")},m(n,r){q(n,t,r),e[6](t)},p:re,i:re,o:re,d(n){n&&z(t),e[6](null)}}}function k0(e,t){const n=Math.abs(t-e),r=Math.ceil(n/(1e3*60*60*24));return r>365?"monthly":r>90?"weekly":r>30?"daily":"hourly"}function bo(e){return e.toISOString().split("T")[0]}function M0(e,t,n){let{startDate:r=null}=t,{endDate:i=null}=t,{height:o=60}=t,{margin:l={top:10,right:40,bottom:30,left:40}}=t;const u=zl();let a,s,f,c,h,g;Yn(()=>{if(g)return d(),()=>{}});function d(){h=g.clientWidth-l.left-l.right;const y=new Date("2022-01-01"),x=new Date("2024-12-31"),M=[];let v=new Date(y);for(;v<=x;)M.push(new Date(v)),v.setMonth(v.getMonth()+1);r||n(1,r="2022-01-01"),i||n(2,i="2024-09-31");const S=r instanceof Date?r:new Date(r),Y=i instanceof Date?i:new Date(i);f=Kr().domain(na(M)).range([0,h]),n(5,a=Ve(g).append("svg").attr("width",h+l.left+l.right).attr("height",o+l.top+l.bottom).append("g").attr("transform",`translate(${l.left},${l.top})`)),c=v0(f).tickFormat(Jr("%b %Y")).ticks(h>600?10:5),a.append("g").attr("class","x-axis").attr("transform",`translate(0,${o-l.bottom})`).call(c),a.selectAll(".x-axis path, .x-axis line").style("stroke","#000").style("shape-rendering","crispEdges"),a.selectAll(".x-axis text").style("font-size","10px").style("font-family","Avenir, sans-serif"),s=c0().extent([[0,0],[h,o-l.bottom]]).on("brush",w).on("end",p);const X=a.append("g").attr("class","brush").call(s);X.selectAll(".selection").style("fill","#000").style("fill-opacity",.3).style("stroke","#000").style("stroke-width",2),o-l.bottom,X.selectAll(".handle").style("fill","#000").style("stroke","#000").style("stroke-width",1).attr("rx",3).attr("ry",3),s.move(X,[f(S),f(Y)])}function w(y){if(!y.selection)return;const[x,M]=y.selection,v=f.invert(x),S=f.invert(M);_(v,S,!1)}function p(y){if(!y.selection)return;const[x,M]=y.selection,v=f.invert(x),S=f.invert(M);_(v,S,!0)}function _(y,x,M){const v=bo(y),S=bo(x);n(1,r=v),n(2,i=S);const Y=k0(y,x);M&&u("dateRangeChange",{startDate:v,endDate:S,aggregationLevel:Y})}function b(y){Oe[y?"unshift":"push"](()=>{g=y,n(0,g)})}return e.$$set=y=>{"startDate"in y&&n(1,r=y.startDate),"endDate"in y&&n(2,i=y.endDate),"height"in y&&n(3,o=y.height),"margin"in y&&n(4,l=y.margin)},e.$$.update=()=>{e.$$.dirty&33&&g&&g.clientWidth>0&&a&&(Ve(g).selectAll("*").remove(),d())},[g,r,i,o,l,a,b]}class D0 extends Qe{constructor(t){super(),$e(this,t,M0,b0,ze,{startDate:1,endDate:2,height:3,margin:4})}}function ko(e,t,n){const r=e.slice();return r[5]=t[n].color,r[6]=t[n].text,r[7]=t[n].shape!==void 0?t[n].shape:"circle",r}function Mo(e){let t,n;return{c(){t=V("h3"),n=me(e[2]),Ye(t,"margin","5px 20px")},m(r,i){q(r,t,i),E(t,n)},p(r,i){i&4&&xe(n,r[2])},d(r){r&&z(t)}}}function Do(e){let t,n,r,i,o,l=e[6]+"",u,a,s,f,c;function h(...g){return e[3](e[6],...g)}return{c(){t=V("div"),n=V("div"),i=ae(),o=V("span"),u=me(l),a=ae(),m(n,"class",r="color-indicator "+(e[7]==="circle"?"shape-circle":"shape-rect")+" svelte-1sge84g"),Ye(n,"background-color",e[5]),m(t,"class",s="legend-item "+(e[0]===e[6]?"selected":"")+" svelte-1sge84g")},m(g,d){q(g,t,d),E(t,n),E(t,i),E(t,o),E(o,u),E(t,a),f||(c=[Ue(t,"click",h),Ue(t,"dblclick",e[4])],f=!0)},p(g,d){e=g,d&2&&r!==(r="color-indicator "+(e[7]==="circle"?"shape-circle":"shape-rect")+" svelte-1sge84g")&&m(n,"class",r),d&2&&Ye(n,"background-color",e[5]),d&2&&l!==(l=e[6]+"")&&xe(u,l),d&3&&s!==(s="legend-item "+(e[0]===e[6]?"selected":"")+" svelte-1sge84g")&&m(t,"class",s)},d(g){g&&z(t),f=!1,We(c)}}}function x0(e){let t,n,r=e[2]&&Mo(e),i=be(e[1]),o=[];for(let l=0;l<i.length;l+=1)o[l]=Do(ko(e,i,l));return{c(){r&&r.c(),t=ae(),n=V("div");for(let l=0;l<o.length;l+=1)o[l].c();m(n,"class","legend-container svelte-1sge84g")},m(l,u){r&&r.m(l,u),q(l,t,u),q(l,n,u);for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(n,null)},p(l,[u]){if(l[2]?r?r.p(l,u):(r=Mo(l),r.c(),r.m(t.parentNode,t)):r&&(r.d(1),r=null),u&3){i=be(l[1]);let a;for(a=0;a<i.length;a+=1){const s=ko(l,i,a);o[a]?o[a].p(s,u):(o[a]=Do(s),o[a].c(),o[a].m(n,null))}for(;a<o.length;a+=1)o[a].d(1);o.length=i.length}},i:re,o:re,d(l){l&&(z(t),z(n)),r&&r.d(l),tt(o,l)}}}function S0(e,t,n){let{legendData:r}=t,{title:i}=t,{clicked:o}=t;const l=(a,s)=>{s.stopImmediatePropagation(),n(0,o=a)},u=a=>{a.stopImmediatePropagation(),n(0,o=null)};return e.$$set=a=>{"legendData"in a&&n(1,r=a.legendData),"title"in a&&n(2,i=a.title),"clicked"in a&&n(0,o=a.clicked)},[o,r,i,l,u]}class cr extends Qe{constructor(t){super(),$e(this,t,S0,x0,ze,{legendData:1,title:2,clicked:0})}}const mt=[];function T0(e,t=re){let n;const r=new Set;function i(u){if(ze(e,u)&&(e=u,n)){const a=!mt.length;for(const s of r)s[1](),mt.push(s,e);if(a){for(let s=0;s<mt.length;s+=2)mt[s][0](mt[s+1]);mt.length=0}}}function o(u){i(u(e))}function l(u,a=re){const s=[u,a];return r.add(s),r.size===1&&(n=t(i,o)||re),u(e),()=>{r.delete(s),r.size===0&&n&&(n(),n=null)}}return{set:i,update:o,subscribe:l}}function xo(e,t,n){const r=e.slice();return r[25]=t[n],r}function C0(e){let t;return{c(){t=V("div"),t.textContent="Loading...",m(t,"class","wrapper svelte-ffcqb3")},m(n,r){q(n,t,r)},p:re,i:re,o:re,d(n){n&&z(t)}}}function A0(e){let t,n,r,i,o,l,u,a,s,f,c,h,g,d,w,p,_,b,y,x,M,v,S,Y,X,F,T,L,H,R,W,k,C,B,K,Z,$,O,N,te,ie,oe,j,_e,A,I,G,D,ne,J=be(An),Q=[];for(let P=0;P<J.length;P+=1)Q[P]=So(xo(e,J,P));const ge=[E0,N0],U=[];function ue(P,se){return P[5].length>0?0:1}F=ue(e),T=U[F]=ge[F](e);const Ne=[L0,F0],de=[];function Qt(P,se){return P[6].length>0?0:1}R=Qt(e),W=de[R]=Ne[R](e),B=new D0({props:{startDate:e[2],endDate:e[3]}}),B.$on("dateRangeChange",e[14]);function Sl(P){e[20](P)}let ri={legendData:e[11],title:"Renewables"};e[8]!==void 0&&(ri.clicked=e[8]),N=new cr({props:ri}),Oe.push(()=>qt(N,"clicked",Sl));function Tl(P){e[21](P)}let ii={legendData:e[10],title:"Non-renewables"};e[8]!==void 0&&(ii.clicked=e[8]),oe=new cr({props:ii}),Oe.push(()=>qt(oe,"clicked",Tl));function Cl(P){e[22](P)}let oi={legendData:e[9],title:""};return e[8]!==void 0&&(oi.clicked=e[8]),A=new cr({props:oi}),Oe.push(()=>qt(A,"clicked",Cl)),{c(){t=V("div"),n=V("div"),n.innerHTML="",r=ae(),i=V("div"),o=V("div"),l=V("button"),u=me("JP"),s=ae(),f=V("span"),f.textContent="|",c=ae(),h=V("button"),g=me("English"),w=ae(),p=V("div"),_=V("button"),_.textContent="Download CSV",b=ae(),y=V("div"),x=V("select");for(let P=0;P<Q.length;P+=1)Q[P].c();M=ae(),v=V("span"),S=ae(),Y=V("div"),X=V("div"),T.c(),L=ae(),H=V("div"),W.c(),k=ae(),C=V("div"),Se(B.$$.fragment),K=ae(),Z=V("div"),$=V("div"),$.innerHTML='<span style="font-size: 0.7em; margin-left: 20px;">Click on a legend item to highlight the fuel source. Double-click on any item to un-highlight.</span>',O=ae(),Se(N.$$.fragment),ie=ae(),Se(oe.$$.fragment),_e=ae(),Se(A.$$.fragment),m(n,"class","title"),Ye(n,"margin-left","20px"),m(l,"class",a="lang-btn "+(e[4]==="jp"?"active":"")+" svelte-ffcqb3"),m(f,"class","divider svelte-ffcqb3"),m(h,"class",d="lang-btn "+(e[4]==="en"?"active":"")+" svelte-ffcqb3"),m(o,"class","language-toggle svelte-ffcqb3"),m(_,"class","download-btn svelte-ffcqb3"),m(p,"class","download-buttons svelte-ffcqb3"),m(x,"class","svelte-ffcqb3"),m(v,"class","caret svelte-ffcqb3"),m(y,"class","dropdown svelte-ffcqb3"),m(i,"class","panel svelte-ffcqb3"),m(t,"class","header svelte-ffcqb3"),m(X,"class","left svelte-ffcqb3"),m(H,"class","right svelte-ffcqb3"),m(Y,"class","wrapper svelte-ffcqb3"),m(C,"class","timeslider-wrapper svelte-ffcqb3"),Ye(Z,"width","90%")},m(P,se){q(P,t,se),E(t,n),E(t,r),E(t,i),E(i,o),E(o,l),E(l,u),E(o,s),E(o,f),E(o,c),E(o,h),E(h,g),E(i,w),E(i,p),E(p,_),E(i,b),E(i,y),E(y,x);for(let je=0;je<Q.length;je+=1)Q[je]&&Q[je].m(x,null);si(x,e[1]),E(y,M),E(y,v),q(P,S,se),q(P,Y,se),E(Y,X),U[F].m(X,null),E(Y,L),E(Y,H),de[R].m(H,null),q(P,k,se),q(P,C,se),ke(B,C,null),q(P,K,se),q(P,Z,se),E(Z,$),E(Z,O),ke(N,Z,null),E(Z,ie),ke(oe,Z,null),E(Z,_e),ke(A,Z,null),G=!0,D||(ne=[Ue(l,"click",e[17]),Ue(h,"click",e[18]),Ue(_,"click",e[19]),Ue(x,"change",e[13])],D=!0)},p(P,se){if((!G||se&16&&a!==(a="lang-btn "+(P[4]==="jp"?"active":"")+" svelte-ffcqb3"))&&m(l,"class",a),(!G||se&16&&d!==(d="lang-btn "+(P[4]==="en"?"active":"")+" svelte-ffcqb3"))&&m(h,"class",d),se&4096){J=be(An);let Ce;for(Ce=0;Ce<J.length;Ce+=1){const li=xo(P,J,Ce);Q[Ce]?Q[Ce].p(li,se):(Q[Ce]=So(li),Q[Ce].c(),Q[Ce].m(x,null))}for(;Ce<Q.length;Ce+=1)Q[Ce].d(1);Q.length=J.length}(!G||se&2)&&si(x,P[1]);let je=F;F=ue(P),F===je?U[F].p(P,se):(bt(),ce(U[je],1,1,()=>{U[je]=null}),kt(),T=U[F],T?T.p(P,se):(T=U[F]=ge[F](P),T.c()),le(T,1),T.m(X,null));let Rn=R;R=Qt(P),R===Rn?de[R].p(P,se):(bt(),ce(de[Rn],1,1,()=>{de[Rn]=null}),kt(),W=de[R],W?W.p(P,se):(W=de[R]=Ne[R](P),W.c()),le(W,1),W.m(H,null));const qn={};se&4&&(qn.startDate=P[2]),se&8&&(qn.endDate=P[3]),B.$set(qn);const Xn={};se&2048&&(Xn.legendData=P[11]),!te&&se&256&&(te=!0,Xn.clicked=P[8],Rt(()=>te=!1)),N.$set(Xn);const Vn={};se&1024&&(Vn.legendData=P[10]),!j&&se&256&&(j=!0,Vn.clicked=P[8],Rt(()=>j=!1)),oe.$set(Vn);const Gn={};se&512&&(Gn.legendData=P[9]),!I&&se&256&&(I=!0,Gn.clicked=P[8],Rt(()=>I=!1)),A.$set(Gn)},i(P){G||(le(T),le(W),le(B.$$.fragment,P),le(N.$$.fragment,P),le(oe.$$.fragment,P),le(A.$$.fragment,P),G=!0)},o(P){ce(T),ce(W),ce(B.$$.fragment,P),ce(N.$$.fragment,P),ce(oe.$$.fragment,P),ce(A.$$.fragment,P),G=!1},d(P){P&&(z(t),z(S),z(Y),z(k),z(C),z(K),z(Z)),tt(Q,P),U[F].d(),de[R].d(),Me(B),Me(N),Me(oe),Me(A),D=!1,We(ne)}}}function So(e){let t;return{c(){t=V("option"),t.textContent=`${e[12](e[25])}`,t.__value=e[25],Pl(t,t.__value)},m(n,r){q(n,t,r)},p:re,d(n){n&&z(t)}}}function N0(e){let t;return{c(){t=V("div"),t.textContent="Loading..."},m(n,r){q(n,t,r)},p:re,i:re,o:re,d(n){n&&z(t)}}}function E0(e){let t,n;return t=new rf({props:{data:e[5],aggregationLevel:e[7],clickedItem:e[8],currentLang:e[4]}}),{c(){Se(t.$$.fragment)},m(r,i){ke(t,r,i),n=!0},p(r,i){const o={};i&32&&(o.data=r[5]),i&128&&(o.aggregationLevel=r[7]),i&256&&(o.clickedItem=r[8]),i&16&&(o.currentLang=r[4]),t.$set(o)},i(r){n||(le(t.$$.fragment,r),n=!0)},o(r){ce(t.$$.fragment,r),n=!1},d(r){Me(t,r)}}}function F0(e){let t;return{c(){t=V("div"),t.textContent="Loading..."},m(n,r){q(n,t,r)},p:re,i:re,o:re,d(n){n&&z(t)}}}function L0(e){let t,n;return t=new af({props:{data:e[6],currentLang:e[4]}}),{c(){Se(t.$$.fragment)},m(r,i){ke(t,r,i),n=!0},p(r,i){const o={};i&64&&(o.data=r[6]),i&16&&(o.currentLang=r[4]),t.$set(o)},i(r){n||(le(t.$$.fragment,r),n=!0)},o(r){ce(t.$$.fragment,r),n=!1},d(r){Me(t,r)}}}function U0(e){let t,n,r,i;const o=[A0,C0],l=[];function u(a,s){return a[6].length>0?0:1}return n=u(e),r=l[n]=o[n](e),{c(){t=V("main"),r.c(),m(t,"class","svelte-ffcqb3")},m(a,s){q(a,t,s),l[n].m(t,null),i=!0},p(a,[s]){let f=n;n=u(a),n===f?l[n].p(a,s):(bt(),ce(l[f],1,1,()=>{l[f]=null}),kt(),r=l[n],r?r.p(a,s):(r=l[n]=o[n](a),r.c()),le(r,1),r.m(t,null))},i(a){i||(le(r),i=!0)},o(a){ce(r),i=!1},d(a){a&&z(t),l[n].d()}}}function To(e,t){const n=P0(e),r=new Blob([n],{type:"text/csv;charset=utf-8;"}),i=URL.createObjectURL(r),o=document.createElement("a");o.setAttribute("href",i),o.setAttribute("download",t),o.style.visibility="hidden",document.body.appendChild(o),o.click(),document.body.removeChild(o)}function P0(e){if(!e||e.length===0)return"";const t=Object.keys(e[0]);let n=t.join(",")+`
`;return e.forEach(r=>{const i=t.map(o=>{let l=r[o];return typeof l=="object"&&l!==null&&(l=JSON.stringify(l)),typeof l=="string"&&(l=l.replace(/"/g,'""'),(l.includes(",")||l.includes('"')||l.includes(`
`))&&(l=`"${l}"`)),l}).join(",");n+=i+`
`}),n}function Y0(e,t,n){let r,i,o,l;const u=T0("en");let a=[],s=[],f="japan",c="2024-04-01",h="2024-04-15",g="hourly",d=[],w;function p(L,H){return js[H][L]||L}let _;u.subscribe(L=>{n(4,_=L)});async function b(){try{const L=new URLSearchParams({start_date:c,end_date:h,region:f,aggregation:g}),R=await(await fetch(`http://localhost:3000/api/data?${L}`)).json();n(5,a=JSON.parse(R.type.daily)),n(6,s=JSON.parse(R.categorized.monthly)),An.length>0&&!f&&n(1,f=An[0]),a.length>0&&(d=a.map(W=>new Date(W.date)),d.sort((W,k)=>W-k))}catch(L){console.error("Error fetching data:",L)}finally{}}Yn(b);function y(L){n(1,f=L.target.value)}function x(L){const{startDate:H,endDate:R,aggregationLevel:W}=L.detail;n(2,c=H),n(3,h=R),n(7,g=W),console.log(`Date range changed: ${c} to ${h} with aggregation: ${g}`)}function M(L){a.length>0&&To(a,`${f}_daily_${c}_to_${h}.csv`),s.length>0&&To(s,`${f}_monthly_data.csv`)}const v=()=>u.set("jp"),S=()=>u.set("en"),Y=()=>M();function X(L){w=L,n(8,w)}function F(L){w=L,n(8,w)}function T(L){w=L,n(8,w)}return e.$$.update=()=>{e.$$.dirty&16&&n(16,r=Object.entries(xr).map(([L,H])=>({color:H,shape:L==="demand"||L==="spot_price"?"rect":"circle",text:p(L,_),key:L}))),e.$$.dirty&65536&&n(11,i=r.filter(L=>Zs.indexOf(L.key)!==-1)),e.$$.dirty&65536&&n(10,o=r.filter(L=>$s.indexOf(L.key)!==-1)),e.$$.dirty&65536&&n(9,l=r.filter(L=>Qs.indexOf(L.key)!==-1)),e.$$.dirty&14&&(f||c||h)&&b()},[u,f,c,h,_,a,s,g,w,l,o,i,p,y,x,M,r,v,S,Y,X,F,T]}class O0 extends Qe{constructor(t){super(),$e(this,t,Y0,U0,ze,{currentLanguage:0})}get currentLanguage(){return this.$$.ctx[0]}}new O0({target:document.getElementById("app")});
