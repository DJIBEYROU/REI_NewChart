var Cl=Object.defineProperty;var Al=(e,t,n)=>t in e?Cl(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Gn=(e,t,n)=>(Al(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function re(){}const Un=e=>e;function To(e){return e()}function li(){return Object.create(null)}function We(e){e.forEach(To)}function Kt(e){return typeof e=="function"}function ze(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function Nl(e){return Object.keys(e).length===0}function ai(e){const t=typeof e=="string"&&e.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return t?[parseFloat(t[1]),t[2]||"px"]:[e,"px"]}const Co=typeof window<"u";let Lr=Co?()=>window.performance.now():()=>Date.now(),Ur=Co?e=>requestAnimationFrame(e):re;const wt=new Set;function Ao(e){wt.forEach(t=>{t.c(e)||(wt.delete(t),t.f())}),wt.size!==0&&Ur(Ao)}function Pr(e){let t;return wt.size===0&&Ur(Ao),{promise:new Promise(n=>{wt.add(t={c:e,f:n})}),abort(){wt.delete(t)}}}function E(e,t){e.appendChild(t)}function No(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function El(e){const t=X("style");return t.textContent="/* empty */",Fl(No(e),t),t.sheet}function Fl(e,t){return E(e.head||e,t),t.sheet}function R(e,t,n){e.insertBefore(t,n||null)}function W(e){e.parentNode&&e.parentNode.removeChild(e)}function tt(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function X(e){return document.createElement(e)}function fe(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function de(e){return document.createTextNode(e)}function ae(){return de(" ")}function Lt(){return de("")}function Ue(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function m(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Ll(e){return Array.from(e.childNodes)}function xe(e,t){t=""+t,e.data!==t&&(e.data=t)}function Ul(e,t){e.value=t??""}function Ye(e,t,n,r){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,r?"important":"")}function si(e,t,n){for(let r=0;r<e.options.length;r+=1){const i=e.options[r];if(i.__value===t){i.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}let jt;function Pl(){if(jt===void 0){jt=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{jt=!0}}return jt}function Yl(e,t){getComputedStyle(e).position==="static"&&(e.style.position="relative");const r=X("iframe");r.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),r.setAttribute("aria-hidden","true"),r.tabIndex=-1;const i=Pl();let o;return i?(r.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",o=Ue(window,"message",l=>{l.source===r.contentWindow&&t()})):(r.src="about:blank",r.onload=()=>{o=Ue(r.contentWindow,"resize",t),t()}),E(e,r),()=>{(i||o&&r.contentWindow)&&o(),W(r)}}function Eo(e,t,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:r})}const hn=new Map;let gn=0;function Ol(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}function Hl(e,t){const n={stylesheet:El(t),rules:{}};return hn.set(e,n),n}function dn(e,t,n,r,i,o,l,s=0){const a=16.666/r;let u=`{
`;for(let p=0;p<=1;p+=a){const y=t+(n-t)*o(p);u+=p*100+`%{${l(y,1-y)}}
`}const f=u+`100% {${l(n,1-n)}}
}`,c=`__svelte_${Ol(f)}_${s}`,h=No(e),{stylesheet:g,rules:d}=hn.get(h)||Hl(h,e);d[c]||(d[c]=!0,g.insertRule(`@keyframes ${c} ${f}`,g.cssRules.length));const w=e.style.animation||"";return e.style.animation=`${w?`${w}, `:""}${c} ${r}ms linear ${i}ms 1 both`,gn+=1,c}function mn(e,t){const n=(e.style.animation||"").split(", "),r=n.filter(t?o=>o.indexOf(t)<0:o=>o.indexOf("__svelte")===-1),i=n.length-r.length;i&&(e.style.animation=r.join(", "),gn-=i,gn||Il())}function Il(){Ur(()=>{gn||(hn.forEach(e=>{const{ownerNode:t}=e.stylesheet;t&&W(t)}),hn.clear())})}let Xt;function zt(e){Xt=e}function Yr(){if(!Xt)throw new Error("Function called outside component initialization");return Xt}function Pn(e){Yr().$$.on_mount.push(e)}function Fo(e){Yr().$$.after_update.push(e)}function Wl(){const e=Yr();return(t,n,{cancelable:r=!1}={})=>{const i=e.$$.callbacks[t];if(i){const o=Eo(t,n,{cancelable:r});return i.slice().forEach(l=>{l.call(e,o)}),!o.defaultPrevented}return!0}}const pt=[],Oe=[];let vt=[];const cr=[],zl=Promise.resolve();let hr=!1;function Rl(){hr||(hr=!0,zl.then(Lo))}function Ie(e){vt.push(e)}function Rt(e){cr.push(e)}const Bn=new Set;let ct=0;function Lo(){if(ct!==0)return;const e=Xt;do{try{for(;ct<pt.length;){const t=pt[ct];ct++,zt(t),ql(t.$$)}}catch(t){throw pt.length=0,ct=0,t}for(zt(null),pt.length=0,ct=0;Oe.length;)Oe.pop()();for(let t=0;t<vt.length;t+=1){const n=vt[t];Bn.has(n)||(Bn.add(n),n())}vt.length=0}while(pt.length);for(;cr.length;)cr.pop()();hr=!1,Bn.clear(),zt(e)}function ql(e){if(e.fragment!==null){e.update(),We(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Ie)}}function Xl(e){const t=[],n=[];vt.forEach(r=>e.indexOf(r)===-1?t.push(r):n.push(r)),n.forEach(r=>r()),vt=t}let Ut;function Or(){return Ut||(Ut=Promise.resolve(),Ut.then(()=>{Ut=null})),Ut}function it(e,t,n){e.dispatchEvent(Eo(`${t?"intro":"outro"}${n}`))}const ln=new Set;let Pe;function bt(){Pe={r:0,c:[],p:Pe}}function kt(){Pe.r||We(Pe.c),Pe=Pe.p}function le(e,t){e&&e.i&&(ln.delete(e),e.i(t))}function ce(e,t,n,r){if(e&&e.o){if(ln.has(e))return;ln.add(e),Pe.c.push(()=>{ln.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}else r&&r()}const Hr={duration:0};function Vl(e,t,n){const r={direction:"in"};let i=t(e,n,r),o=!1,l,s,a=0;function u(){l&&mn(e,l)}function f(){const{delay:h=0,duration:g=300,easing:d=Un,tick:w=re,css:p}=i||Hr;p&&(l=dn(e,0,1,g,h,d,p,a++)),w(0,1);const y=Lr()+h,k=y+g;s&&s.abort(),o=!0,Ie(()=>it(e,!0,"start")),s=Pr(_=>{if(o){if(_>=k)return w(1,0),it(e,!0,"end"),u(),o=!1;if(_>=y){const x=d((_-y)/g);w(x,1-x)}}return o})}let c=!1;return{start(){c||(c=!0,mn(e),Kt(i)?(i=i(r),Or().then(f)):f())},invalidate(){c=!1},end(){o&&(u(),o=!1)}}}function Gl(e,t,n){const r={direction:"out"};let i=t(e,n,r),o=!0,l;const s=Pe;s.r+=1;let a;function u(){const{delay:f=0,duration:c=300,easing:h=Un,tick:g=re,css:d}=i||Hr;d&&(l=dn(e,1,0,c,f,h,d));const w=Lr()+f,p=w+c;Ie(()=>it(e,!1,"start")),"inert"in e&&(a=e.inert,e.inert=!0),Pr(y=>{if(o){if(y>=p)return g(0,1),it(e,!1,"end"),--s.r||We(s.c),!1;if(y>=w){const k=h((y-w)/c);g(1-k,k)}}return o})}return Kt(i)?Or().then(()=>{i=i(r),u()}):u(),{end(f){f&&"inert"in e&&(e.inert=a),f&&i.tick&&i.tick(1,0),o&&(l&&mn(e,l),o=!1)}}}function pn(e,t,n,r){let o=t(e,n,{direction:"both"}),l=r?0:1,s=null,a=null,u=null,f;function c(){u&&mn(e,u)}function h(d,w){const p=d.b-l;return w*=Math.abs(p),{a:l,b:d.b,d:p,duration:w,start:d.start,end:d.start+w,group:d.group}}function g(d){const{delay:w=0,duration:p=300,easing:y=Un,tick:k=re,css:_}=o||Hr,x={start:Lr()+w,b:d};d||(x.group=Pe,Pe.r+=1),"inert"in e&&(d?f!==void 0&&(e.inert=f):(f=e.inert,e.inert=!0)),s||a?a=x:(_&&(c(),u=dn(e,l,d,p,w,y,_)),d&&k(0,1),s=h(x,p),Ie(()=>it(e,d,"start")),Pr(M=>{if(a&&M>a.start&&(s=h(a,p),a=null,it(e,s.b,"start"),_&&(c(),u=dn(e,l,s.b,s.duration,0,y,o.css))),s){if(M>=s.end)k(l=s.b,1-l),it(e,s.b,"end"),a||(s.b?c():--s.group.r||We(s.group.c)),s=null;else if(M>=s.start){const v=M-s.start;l=s.a+s.d*y(v/s.duration),k(l,1-l)}}return!!(s||a)}))}return{run(d){Kt(o)?Or().then(()=>{o=o({direction:d?"in":"out"}),g(d)}):g(d)},end(){c(),s=a=null}}}function be(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function qt(e,t,n){const r=e.$$.props[t];r!==void 0&&(e.$$.bound[r]=n,n(e.$$.ctx[r]))}function Se(e){e&&e.c()}function ke(e,t,n){const{fragment:r,after_update:i}=e.$$;r&&r.m(t,n),Ie(()=>{const o=e.$$.on_mount.map(To).filter(Kt);e.$$.on_destroy?e.$$.on_destroy.push(...o):We(o),e.$$.on_mount=[]}),i.forEach(Ie)}function Me(e,t){const n=e.$$;n.fragment!==null&&(Xl(n.after_update),We(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Bl(e,t){e.$$.dirty[0]===-1&&(pt.push(e),Rl(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function $e(e,t,n,r,i,o,l,s=[-1]){const a=Xt;zt(e);const u=e.$$={fragment:null,ctx:[],props:o,update:re,not_equal:i,bound:li(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(a?a.$$.context:[])),callbacks:li(),dirty:s,skip_bound:!1,root:t.target||a.$$.root};l&&l(u.root);let f=!1;if(u.ctx=n?n(e,t.props||{},(c,h,...g)=>{const d=g.length?g[0]:h;return u.ctx&&i(u.ctx[c],u.ctx[c]=d)&&(!u.skip_bound&&u.bound[c]&&u.bound[c](d),f&&Bl(e,c)),h}):[],u.update(),f=!0,We(u.before_update),u.fragment=r?r(u.ctx):!1,t.target){if(t.hydrate){const c=Ll(t.target);u.fragment&&u.fragment.l(c),c.forEach(W)}else u.fragment&&u.fragment.c();t.intro&&le(e.$$.fragment),ke(e,t.target,t.anchor),Lo()}zt(a)}class Qe{constructor(){Gn(this,"$$");Gn(this,"$$set")}$destroy(){Me(this,1),this.$destroy=re}$on(t,n){if(!Kt(n))return re;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(t){this.$$set&&!Nl(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Jl="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Jl);function an(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Kl(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Ir(e){let t,n,r;e.length!==2?(t=an,n=(s,a)=>an(e(s),a),r=(s,a)=>e(s)-a):(t=e===an||e===Kl?e:Zl,n=e,r=e);function i(s,a,u=0,f=s.length){if(u<f){if(t(a,a)!==0)return f;do{const c=u+f>>>1;n(s[c],a)<0?u=c+1:f=c}while(u<f)}return u}function o(s,a,u=0,f=s.length){if(u<f){if(t(a,a)!==0)return f;do{const c=u+f>>>1;n(s[c],a)<=0?u=c+1:f=c}while(u<f)}return u}function l(s,a,u=0,f=s.length){const c=i(s,a,u,f-1);return c>u&&r(s[c-1],a)>-r(s[c],a)?c-1:c}return{left:i,center:l,right:o}}function Zl(){return 0}function $l(e){return e===null?NaN:+e}const Ql=Ir(an),jl=Ql.right;Ir($l).center;const ea=jl;function ta(e,t){let n,r;if(t===void 0)for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let o of e)(o=t(o,++i,e))!=null&&(n===void 0?o>=o&&(n=r=o):(n>o&&(n=o),r<o&&(r=o)))}return[n,r]}class gr extends Map{constructor(t,n=ia){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(ui(this,t))}has(t){return super.has(ui(this,t))}set(t,n){return super.set(na(this,t),n)}delete(t){return super.delete(ra(this,t))}}function ui({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function na({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function ra({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function ia(e){return e!==null&&typeof e=="object"?e.valueOf():e}function oa(e){return e}function la(e,...t){return aa(e,Array.from,oa,t)}function aa(e,t,n,r){return function i(o,l){if(l>=r.length)return n(o);const s=new gr,a=r[l++];let u=-1;for(const f of o){const c=a(f,++u,o),h=s.get(c);h?h.push(f):s.set(c,[f])}for(const[f,c]of s)s.set(f,i(c,l));return t(s)}(e,0)}const sa=Math.sqrt(50),ua=Math.sqrt(10),fa=Math.sqrt(2);function _n(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),l=o>=sa?10:o>=ua?5:o>=fa?2:1;let s,a,u;return i<0?(u=Math.pow(10,-i)/l,s=Math.round(e*u),a=Math.round(t*u),s/u<e&&++s,a/u>t&&--a,u=-u):(u=Math.pow(10,i)*l,s=Math.round(e/u),a=Math.round(t/u),s*u<e&&++s,a*u>t&&--a),a<s&&.5<=n&&n<2?_n(e,t,n*2):[s,a,u]}function ca(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,o,l]=r?_n(t,e,n):_n(e,t,n);if(!(o>=i))return[];const s=o-i+1,a=new Array(s);if(r)if(l<0)for(let u=0;u<s;++u)a[u]=(o-u)/-l;else for(let u=0;u<s;++u)a[u]=(o-u)*l;else if(l<0)for(let u=0;u<s;++u)a[u]=(i+u)/-l;else for(let u=0;u<s;++u)a[u]=(i+u)*l;return a}function dr(e,t,n){return t=+t,e=+e,n=+n,_n(e,t,n)[2]}function mr(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?dr(t,e,n):dr(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function pr(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function fi(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function Wr(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}const ci=Symbol("implicit");function Uo(){var e=new gr,t=[],n=[],r=ci;function i(o){let l=e.get(o);if(l===void 0){if(r!==ci)return r;e.set(o,l=t.push(o)-1)}return n[l%n.length]}return i.domain=function(o){if(!arguments.length)return t.slice();t=[],e=new gr;for(const l of o)e.has(l)||e.set(l,t.push(l)-1);return i},i.range=function(o){return arguments.length?(n=Array.from(o),i):n.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return Uo(t,n).unknown(r)},Wr.apply(i,arguments),i}function zr(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Po(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Zt(){}var Vt=.7,yn=1/Vt,Mt="\\s*([+-]?\\d+)\\s*",Gt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",He="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ha=/^#([0-9a-f]{3,8})$/,ga=new RegExp(`^rgb\\(${Mt},${Mt},${Mt}\\)$`),da=new RegExp(`^rgb\\(${He},${He},${He}\\)$`),ma=new RegExp(`^rgba\\(${Mt},${Mt},${Mt},${Gt}\\)$`),pa=new RegExp(`^rgba\\(${He},${He},${He},${Gt}\\)$`),_a=new RegExp(`^hsl\\(${Gt},${He},${He}\\)$`),ya=new RegExp(`^hsla\\(${Gt},${He},${He},${Gt}\\)$`),hi={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};zr(Zt,lt,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:gi,formatHex:gi,formatHex8:wa,formatHsl:va,formatRgb:di,toString:di});function gi(){return this.rgb().formatHex()}function wa(){return this.rgb().formatHex8()}function va(){return Yo(this).formatHsl()}function di(){return this.rgb().formatRgb()}function lt(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=ha.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?mi(t):n===3?new De(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?en(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?en(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=ga.exec(e))?new De(t[1],t[2],t[3],1):(t=da.exec(e))?new De(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=ma.exec(e))?en(t[1],t[2],t[3],t[4]):(t=pa.exec(e))?en(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=_a.exec(e))?yi(t[1],t[2]/100,t[3]/100,1):(t=ya.exec(e))?yi(t[1],t[2]/100,t[3]/100,t[4]):hi.hasOwnProperty(e)?mi(hi[e]):e==="transparent"?new De(NaN,NaN,NaN,0):null}function mi(e){return new De(e>>16&255,e>>8&255,e&255,1)}function en(e,t,n,r){return r<=0&&(e=t=n=NaN),new De(e,t,n,r)}function ba(e){return e instanceof Zt||(e=lt(e)),e?(e=e.rgb(),new De(e.r,e.g,e.b,e.opacity)):new De}function _r(e,t,n,r){return arguments.length===1?ba(e):new De(e,t,n,r??1)}function De(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}zr(De,_r,Po(Zt,{brighter(e){return e=e==null?yn:Math.pow(yn,e),new De(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Vt:Math.pow(Vt,e),new De(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new De(ot(this.r),ot(this.g),ot(this.b),wn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:pi,formatHex:pi,formatHex8:ka,formatRgb:_i,toString:_i}));function pi(){return`#${rt(this.r)}${rt(this.g)}${rt(this.b)}`}function ka(){return`#${rt(this.r)}${rt(this.g)}${rt(this.b)}${rt((isNaN(this.opacity)?1:this.opacity)*255)}`}function _i(){const e=wn(this.opacity);return`${e===1?"rgb(":"rgba("}${ot(this.r)}, ${ot(this.g)}, ${ot(this.b)}${e===1?")":`, ${e})`}`}function wn(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function ot(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function rt(e){return e=ot(e),(e<16?"0":"")+e.toString(16)}function yi(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Fe(e,t,n,r)}function Yo(e){if(e instanceof Fe)return new Fe(e.h,e.s,e.l,e.opacity);if(e instanceof Zt||(e=lt(e)),!e)return new Fe;if(e instanceof Fe)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),l=NaN,s=o-i,a=(o+i)/2;return s?(t===o?l=(n-r)/s+(n<r)*6:n===o?l=(r-t)/s+2:l=(t-n)/s+4,s/=a<.5?o+i:2-o-i,l*=60):s=a>0&&a<1?0:l,new Fe(l,s,a,e.opacity)}function Ma(e,t,n,r){return arguments.length===1?Yo(e):new Fe(e,t,n,r??1)}function Fe(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}zr(Fe,Ma,Po(Zt,{brighter(e){return e=e==null?yn:Math.pow(yn,e),new Fe(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Vt:Math.pow(Vt,e),new Fe(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new De(Jn(e>=240?e-240:e+120,i,r),Jn(e,i,r),Jn(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Fe(wi(this.h),tn(this.s),tn(this.l),wn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=wn(this.opacity);return`${e===1?"hsl(":"hsla("}${wi(this.h)}, ${tn(this.s)*100}%, ${tn(this.l)*100}%${e===1?")":`, ${e})`}`}}));function wi(e){return e=(e||0)%360,e<0?e+360:e}function tn(e){return Math.max(0,Math.min(1,e||0))}function Jn(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Rr=e=>()=>e;function Da(e,t){return function(n){return e+n*t}}function xa(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function Sa(e){return(e=+e)==1?Oo:function(t,n){return n-t?xa(t,n,e):Rr(isNaN(t)?n:t)}}function Oo(e,t){var n=t-e;return n?Da(e,n):Rr(isNaN(e)?t:e)}const vn=function e(t){var n=Sa(t);function r(i,o){var l=n((i=_r(i)).r,(o=_r(o)).r),s=n(i.g,o.g),a=n(i.b,o.b),u=Oo(i.opacity,o.opacity);return function(f){return i.r=l(f),i.g=s(f),i.b=a(f),i.opacity=u(f),i+""}}return r.gamma=e,r}(1);function Ta(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=e[i]*(1-o)+t[i]*o;return r}}function Ca(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Aa(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),o=new Array(n),l;for(l=0;l<r;++l)i[l]=Yn(e[l],t[l]);for(;l<n;++l)o[l]=t[l];return function(s){for(l=0;l<r;++l)o[l]=i[l](s);return o}}function Na(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Ee(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Ea(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Yn(e[i],t[i]):r[i]=t[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var yr=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Kn=new RegExp(yr.source,"g");function Fa(e){return function(){return e}}function La(e){return function(t){return e(t)+""}}function Ho(e,t){var n=yr.lastIndex=Kn.lastIndex=0,r,i,o,l=-1,s=[],a=[];for(e=e+"",t=t+"";(r=yr.exec(e))&&(i=Kn.exec(t));)(o=i.index)>n&&(o=t.slice(n,o),s[l]?s[l]+=o:s[++l]=o),(r=r[0])===(i=i[0])?s[l]?s[l]+=i:s[++l]=i:(s[++l]=null,a.push({i:l,x:Ee(r,i)})),n=Kn.lastIndex;return n<t.length&&(o=t.slice(n),s[l]?s[l]+=o:s[++l]=o),s.length<2?a[0]?La(a[0].x):Fa(t):(t=a.length,function(u){for(var f=0,c;f<t;++f)s[(c=a[f]).i]=c.x(u);return s.join("")})}function Yn(e,t){var n=typeof t,r;return t==null||n==="boolean"?Rr(t):(n==="number"?Ee:n==="string"?(r=lt(t))?(t=r,vn):Ho:t instanceof lt?vn:t instanceof Date?Na:Ca(t)?Ta:Array.isArray(t)?Aa:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Ea:Ee)(e,t)}function Ua(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var vi=180/Math.PI,wr={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Io(e,t,n,r,i,o){var l,s,a;return(l=Math.sqrt(e*e+t*t))&&(e/=l,t/=l),(a=e*n+t*r)&&(n-=e*a,r-=t*a),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,a/=s),e*r<t*n&&(e=-e,t=-t,a=-a,l=-l),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*vi,skewX:Math.atan(a)*vi,scaleX:l,scaleY:s}}var nn;function Pa(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?wr:Io(t.a,t.b,t.c,t.d,t.e,t.f)}function Ya(e){return e==null||(nn||(nn=document.createElementNS("http://www.w3.org/2000/svg","g")),nn.setAttribute("transform",e),!(e=nn.transform.baseVal.consolidate()))?wr:(e=e.matrix,Io(e.a,e.b,e.c,e.d,e.e,e.f))}function Wo(e,t,n,r){function i(u){return u.length?u.pop()+" ":""}function o(u,f,c,h,g,d){if(u!==c||f!==h){var w=g.push("translate(",null,t,null,n);d.push({i:w-4,x:Ee(u,c)},{i:w-2,x:Ee(f,h)})}else(c||h)&&g.push("translate("+c+t+h+n)}function l(u,f,c,h){u!==f?(u-f>180?f+=360:f-u>180&&(u+=360),h.push({i:c.push(i(c)+"rotate(",null,r)-2,x:Ee(u,f)})):f&&c.push(i(c)+"rotate("+f+r)}function s(u,f,c,h){u!==f?h.push({i:c.push(i(c)+"skewX(",null,r)-2,x:Ee(u,f)}):f&&c.push(i(c)+"skewX("+f+r)}function a(u,f,c,h,g,d){if(u!==c||f!==h){var w=g.push(i(g)+"scale(",null,",",null,")");d.push({i:w-4,x:Ee(u,c)},{i:w-2,x:Ee(f,h)})}else(c!==1||h!==1)&&g.push(i(g)+"scale("+c+","+h+")")}return function(u,f){var c=[],h=[];return u=e(u),f=e(f),o(u.translateX,u.translateY,f.translateX,f.translateY,c,h),l(u.rotate,f.rotate,c,h),s(u.skewX,f.skewX,c,h),a(u.scaleX,u.scaleY,f.scaleX,f.scaleY,c,h),u=f=null,function(g){for(var d=-1,w=h.length,p;++d<w;)c[(p=h[d]).i]=p.x(g);return c.join("")}}}var Oa=Wo(Pa,"px, ","px)","deg)"),Ha=Wo(Ya,", ",")",")");function Ia(e){return function(){return e}}function Wa(e){return+e}var bi=[0,1];function _t(e){return e}function vr(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Ia(isNaN(t)?NaN:.5)}function za(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function Ra(e,t,n){var r=e[0],i=e[1],o=t[0],l=t[1];return i<r?(r=vr(i,r),o=n(l,o)):(r=vr(r,i),o=n(o,l)),function(s){return o(r(s))}}function qa(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),o=new Array(r),l=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++l<r;)i[l]=vr(e[l],e[l+1]),o[l]=n(t[l],t[l+1]);return function(s){var a=ea(e,s,1,r)-1;return o[a](i[a](s))}}function zo(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Xa(){var e=bi,t=bi,n=Yn,r,i,o,l=_t,s,a,u;function f(){var h=Math.min(e.length,t.length);return l!==_t&&(l=za(e[0],e[h-1])),s=h>2?qa:Ra,a=u=null,c}function c(h){return h==null||isNaN(h=+h)?o:(a||(a=s(e.map(r),t,n)))(r(l(h)))}return c.invert=function(h){return l(i((u||(u=s(t,e.map(r),Ee)))(h)))},c.domain=function(h){return arguments.length?(e=Array.from(h,Wa),f()):e.slice()},c.range=function(h){return arguments.length?(t=Array.from(h),f()):t.slice()},c.rangeRound=function(h){return t=Array.from(h),n=Ua,f()},c.clamp=function(h){return arguments.length?(l=h?!0:_t,f()):l!==_t},c.interpolate=function(h){return arguments.length?(n=h,f()):n},c.unknown=function(h){return arguments.length?(o=h,c):o},function(h,g){return r=h,i=g,f()}}function Ro(){return Xa()(_t,_t)}function Va(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function bn(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function xt(e){return e=bn(Math.abs(e)),e?e[1]:NaN}function Ga(e,t){return function(n,r){for(var i=n.length,o=[],l=0,s=e[0],a=0;i>0&&s>0&&(a+s+1>r&&(s=Math.max(1,r-a)),o.push(n.substring(i-=s,i+s)),!((a+=s+1)>r));)s=e[l=(l+1)%e.length];return o.reverse().join(t)}}function Ba(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var Ja=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function kn(e){if(!(t=Ja.exec(e)))throw new Error("invalid format: "+e);var t;return new qr({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}kn.prototype=qr.prototype;function qr(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}qr.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Ka(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var qo;function Za(e,t){var n=bn(e,t);if(!n)return e+"";var r=n[0],i=n[1],o=i-(qo=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,l=r.length;return o===l?r:o>l?r+new Array(o-l+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+bn(e,Math.max(0,t+o-1))[0]}function ki(e,t){var n=bn(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Mi={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Va,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>ki(e*100,t),r:ki,s:Za,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Di(e){return e}var xi=Array.prototype.map,Si=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function $a(e){var t=e.grouping===void 0||e.thousands===void 0?Di:Ga(xi.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?Di:Ba(xi.call(e.numerals,String)),l=e.percent===void 0?"%":e.percent+"",s=e.minus===void 0?"−":e.minus+"",a=e.nan===void 0?"NaN":e.nan+"";function u(c){c=kn(c);var h=c.fill,g=c.align,d=c.sign,w=c.symbol,p=c.zero,y=c.width,k=c.comma,_=c.precision,x=c.trim,M=c.type;M==="n"?(k=!0,M="g"):Mi[M]||(_===void 0&&(_=12),x=!0,M="g"),(p||h==="0"&&g==="=")&&(p=!0,h="0",g="=");var v=w==="$"?n:w==="#"&&/[boxX]/.test(M)?"0"+M.toLowerCase():"",S=w==="$"?r:/[%p]/.test(M)?l:"",Y=Mi[M],q=/[defgprs%]/.test(M);_=_===void 0?6:/[gprs]/.test(M)?Math.max(1,Math.min(21,_)):Math.max(0,Math.min(20,_));function L(T){var J=v,A=S,I,z,b;if(M==="c")A=Y(T)+A,T="";else{T=+T;var C=T<0||1/T<0;if(T=isNaN(T)?a:Y(Math.abs(T),_),x&&(T=Ka(T)),C&&+T==0&&d!=="+"&&(C=!1),J=(C?d==="("?d:s:d==="-"||d==="("?"":d)+J,A=(M==="s"?Si[8+qo/3]:"")+A+(C&&d==="("?")":""),q){for(I=-1,z=T.length;++I<z;)if(b=T.charCodeAt(I),48>b||b>57){A=(b===46?i+T.slice(I+1):T.slice(I))+A,T=T.slice(0,I);break}}}k&&!p&&(T=t(T,1/0));var G=J.length+T.length+A.length,K=G<y?new Array(y-G+1).join(h):"";switch(k&&p&&(T=t(K+T,K.length?y-A.length:1/0),K=""),g){case"<":T=J+T+A+K;break;case"=":T=J+K+T+A;break;case"^":T=K.slice(0,G=K.length>>1)+J+T+A+K.slice(G);break;default:T=K+J+T+A;break}return o(T)}return L.toString=function(){return c+""},L}function f(c,h){var g=u((c=kn(c),c.type="f",c)),d=Math.max(-8,Math.min(8,Math.floor(xt(h)/3)))*3,w=Math.pow(10,-d),p=Si[8+d/3];return function(y){return g(w*y)+p}}return{format:u,formatPrefix:f}}var rn,Xo,Vo;Qa({thousands:",",grouping:[3],currency:["$",""]});function Qa(e){return rn=$a(e),Xo=rn.format,Vo=rn.formatPrefix,rn}function ja(e){return Math.max(0,-xt(Math.abs(e)))}function es(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(xt(t)/3)))*3-xt(Math.abs(e)))}function ts(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,xt(t)-xt(e))+1}function ns(e,t,n,r){var i=mr(e,t,n),o;switch(r=kn(r??",f"),r.type){case"s":{var l=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(o=es(i,l))&&(r.precision=o),Vo(r,l)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=ts(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=ja(i))&&(r.precision=o-(r.type==="%")*2);break}}return Xo(r)}function rs(e){var t=e.domain;return e.ticks=function(n){var r=t();return ca(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return ns(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,o=r.length-1,l=r[i],s=r[o],a,u,f=10;for(s<l&&(u=l,l=s,s=u,u=i,i=o,o=u);f-- >0;){if(u=dr(l,s,n),u===a)return r[i]=l,r[o]=s,t(r);if(u>0)l=Math.floor(l/u)*u,s=Math.ceil(s/u)*u;else if(u<0)l=Math.ceil(l*u)/u,s=Math.floor(s*u)/u;else break;a=u}return e},e}function Mn(){var e=Ro();return e.copy=function(){return zo(e,Mn())},Wr.apply(e,arguments),rs(e)}function is(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],o=e[r],l;return o<i&&(l=n,n=r,r=l,l=i,i=o,o=l),e[n]=t.floor(i),e[r]=t.ceil(o),e}const Zn=new Date,$n=new Date;function pe(e,t,n,r){function i(o){return e(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(e(o=new Date(+o)),o),i.ceil=o=>(e(o=new Date(o-1)),t(o,1),e(o),o),i.round=o=>{const l=i(o),s=i.ceil(o);return o-l<s-o?l:s},i.offset=(o,l)=>(t(o=new Date(+o),l==null?1:Math.floor(l)),o),i.range=(o,l,s)=>{const a=[];if(o=i.ceil(o),s=s==null?1:Math.floor(s),!(o<l)||!(s>0))return a;let u;do a.push(u=new Date(+o)),t(o,s),e(o);while(u<o&&o<l);return a},i.filter=o=>pe(l=>{if(l>=l)for(;e(l),!o(l);)l.setTime(l-1)},(l,s)=>{if(l>=l)if(s<0)for(;++s<=0;)for(;t(l,-1),!o(l););else for(;--s>=0;)for(;t(l,1),!o(l););}),n&&(i.count=(o,l)=>(Zn.setTime(+o),$n.setTime(+l),e(Zn),e($n),Math.floor(n(Zn,$n))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(r?l=>r(l)%o===0:l=>i.count(0,l)%o===0):i)),i}const Dn=pe(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Dn.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?pe(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):Dn);Dn.range;const Ge=1e3,Ae=Ge*60,Be=Ae*60,Je=Be*24,Xr=Je*7,Ti=Je*30,Qn=Je*365,yt=pe(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Ge)},(e,t)=>(t-e)/Ge,e=>e.getUTCSeconds());yt.range;const Vr=pe(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ge)},(e,t)=>{e.setTime(+e+t*Ae)},(e,t)=>(t-e)/Ae,e=>e.getMinutes());Vr.range;const os=pe(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Ae)},(e,t)=>(t-e)/Ae,e=>e.getUTCMinutes());os.range;const On=pe(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ge-e.getMinutes()*Ae)},(e,t)=>{e.setTime(+e+t*Be)},(e,t)=>(t-e)/Be,e=>e.getHours());On.range;const ls=pe(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Be)},(e,t)=>(t-e)/Be,e=>e.getUTCHours());ls.range;const et=pe(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Ae)/Je,e=>e.getDate()-1);et.range;const Gr=pe(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Je,e=>e.getUTCDate()-1);Gr.range;const as=pe(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Je,e=>Math.floor(e/Je));as.range;function ut(e){return pe(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Ae)/Xr)}const St=ut(0),xn=ut(1),ss=ut(2),us=ut(3),Tt=ut(4),fs=ut(5),cs=ut(6);St.range;xn.range;ss.range;us.range;Tt.range;fs.range;cs.range;function ft(e){return pe(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/Xr)}const Go=ft(0),Sn=ft(1),hs=ft(2),gs=ft(3),Ct=ft(4),ds=ft(5),ms=ft(6);Go.range;Sn.range;hs.range;gs.range;Ct.range;ds.range;ms.range;const Dt=pe(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Dt.range;const ps=pe(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());ps.range;const Ke=pe(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Ke.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:pe(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Ke.range;const at=pe(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());at.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:pe(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});at.range;function _s(e,t,n,r,i,o){const l=[[yt,1,Ge],[yt,5,5*Ge],[yt,15,15*Ge],[yt,30,30*Ge],[o,1,Ae],[o,5,5*Ae],[o,15,15*Ae],[o,30,30*Ae],[i,1,Be],[i,3,3*Be],[i,6,6*Be],[i,12,12*Be],[r,1,Je],[r,2,2*Je],[n,1,Xr],[t,1,Ti],[t,3,3*Ti],[e,1,Qn]];function s(u,f,c){const h=f<u;h&&([u,f]=[f,u]);const g=c&&typeof c.range=="function"?c:a(u,f,c),d=g?g.range(u,+f+1):[];return h?d.reverse():d}function a(u,f,c){const h=Math.abs(f-u)/c,g=Ir(([,,p])=>p).right(l,h);if(g===l.length)return e.every(mr(u/Qn,f/Qn,c));if(g===0)return Dn.every(Math.max(mr(u,f,c),1));const[d,w]=l[h/l[g-1][2]<l[g][2]/h?g-1:g];return d.every(w)}return[s,a]}const[ys,ws]=_s(Ke,Dt,St,et,On,Vr);function jn(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function er(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Pt(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function vs(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,o=e.days,l=e.shortDays,s=e.months,a=e.shortMonths,u=Yt(i),f=Ot(i),c=Yt(o),h=Ot(o),g=Yt(l),d=Ot(l),w=Yt(s),p=Ot(s),y=Yt(a),k=Ot(a),_={a:C,A:G,b:K,B:Z,c:null,d:Li,e:Li,f:qs,g:js,G:tu,H:Ws,I:zs,j:Rs,L:Bo,m:Xs,M:Vs,p:$,q:O,Q:Yi,s:Oi,S:Gs,u:Bs,U:Js,V:Ks,w:Zs,W:$s,x:null,X:null,y:Qs,Y:eu,Z:nu,"%":Pi},x={a:F,A:te,b:ie,B:oe,c:null,d:Ui,e:Ui,f:lu,g:pu,G:yu,H:ru,I:iu,j:ou,L:Ko,m:au,M:su,p:j,q:_e,Q:Yi,s:Oi,S:uu,u:fu,U:cu,V:hu,w:gu,W:du,x:null,X:null,y:mu,Y:_u,Z:wu,"%":Pi},M={a:L,A:T,b:J,B:A,c:I,d:Ei,e:Ei,f:Ys,g:Ni,G:Ai,H:Fi,I:Fi,j:Fs,L:Ps,m:Es,M:Ls,p:q,q:Ns,Q:Hs,s:Is,S:Us,u:xs,U:Ss,V:Ts,w:Ds,W:Cs,x:z,X:b,y:Ni,Y:Ai,Z:As,"%":Os};_.x=v(n,_),_.X=v(r,_),_.c=v(t,_),x.x=v(n,x),x.X=v(r,x),x.c=v(t,x);function v(N,H){return function(V){var D=[],ne=-1,B=0,Q=N.length,ge,P,se;for(V instanceof Date||(V=new Date(+V));++ne<Q;)N.charCodeAt(ne)===37&&(D.push(N.slice(B,ne)),(P=Ci[ge=N.charAt(++ne)])!=null?ge=N.charAt(++ne):P=ge==="e"?" ":"0",(se=H[ge])&&(ge=se(V,P)),D.push(ge),B=ne+1);return D.push(N.slice(B,ne)),D.join("")}}function S(N,H){return function(V){var D=Pt(1900,void 0,1),ne=Y(D,N,V+="",0),B,Q;if(ne!=V.length)return null;if("Q"in D)return new Date(D.Q);if("s"in D)return new Date(D.s*1e3+("L"in D?D.L:0));if(H&&!("Z"in D)&&(D.Z=0),"p"in D&&(D.H=D.H%12+D.p*12),D.m===void 0&&(D.m="q"in D?D.q:0),"V"in D){if(D.V<1||D.V>53)return null;"w"in D||(D.w=1),"Z"in D?(B=er(Pt(D.y,0,1)),Q=B.getUTCDay(),B=Q>4||Q===0?Sn.ceil(B):Sn(B),B=Gr.offset(B,(D.V-1)*7),D.y=B.getUTCFullYear(),D.m=B.getUTCMonth(),D.d=B.getUTCDate()+(D.w+6)%7):(B=jn(Pt(D.y,0,1)),Q=B.getDay(),B=Q>4||Q===0?xn.ceil(B):xn(B),B=et.offset(B,(D.V-1)*7),D.y=B.getFullYear(),D.m=B.getMonth(),D.d=B.getDate()+(D.w+6)%7)}else("W"in D||"U"in D)&&("w"in D||(D.w="u"in D?D.u%7:"W"in D?1:0),Q="Z"in D?er(Pt(D.y,0,1)).getUTCDay():jn(Pt(D.y,0,1)).getDay(),D.m=0,D.d="W"in D?(D.w+6)%7+D.W*7-(Q+5)%7:D.w+D.U*7-(Q+6)%7);return"Z"in D?(D.H+=D.Z/100|0,D.M+=D.Z%100,er(D)):jn(D)}}function Y(N,H,V,D){for(var ne=0,B=H.length,Q=V.length,ge,P;ne<B;){if(D>=Q)return-1;if(ge=H.charCodeAt(ne++),ge===37){if(ge=H.charAt(ne++),P=M[ge in Ci?H.charAt(ne++):ge],!P||(D=P(N,V,D))<0)return-1}else if(ge!=V.charCodeAt(D++))return-1}return D}function q(N,H,V){var D=u.exec(H.slice(V));return D?(N.p=f.get(D[0].toLowerCase()),V+D[0].length):-1}function L(N,H,V){var D=g.exec(H.slice(V));return D?(N.w=d.get(D[0].toLowerCase()),V+D[0].length):-1}function T(N,H,V){var D=c.exec(H.slice(V));return D?(N.w=h.get(D[0].toLowerCase()),V+D[0].length):-1}function J(N,H,V){var D=y.exec(H.slice(V));return D?(N.m=k.get(D[0].toLowerCase()),V+D[0].length):-1}function A(N,H,V){var D=w.exec(H.slice(V));return D?(N.m=p.get(D[0].toLowerCase()),V+D[0].length):-1}function I(N,H,V){return Y(N,t,H,V)}function z(N,H,V){return Y(N,n,H,V)}function b(N,H,V){return Y(N,r,H,V)}function C(N){return l[N.getDay()]}function G(N){return o[N.getDay()]}function K(N){return a[N.getMonth()]}function Z(N){return s[N.getMonth()]}function $(N){return i[+(N.getHours()>=12)]}function O(N){return 1+~~(N.getMonth()/3)}function F(N){return l[N.getUTCDay()]}function te(N){return o[N.getUTCDay()]}function ie(N){return a[N.getUTCMonth()]}function oe(N){return s[N.getUTCMonth()]}function j(N){return i[+(N.getUTCHours()>=12)]}function _e(N){return 1+~~(N.getUTCMonth()/3)}return{format:function(N){var H=v(N+="",_);return H.toString=function(){return N},H},parse:function(N){var H=S(N+="",!1);return H.toString=function(){return N},H},utcFormat:function(N){var H=v(N+="",x);return H.toString=function(){return N},H},utcParse:function(N){var H=S(N+="",!0);return H.toString=function(){return N},H}}}var Ci={"-":"",_:" ",0:"0"},ye=/^\s*\d+/,bs=/^%/,ks=/[\\^$*+?|[\]().{}]/g;function ee(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(t)+i:i)}function Ms(e){return e.replace(ks,"\\$&")}function Yt(e){return new RegExp("^(?:"+e.map(Ms).join("|")+")","i")}function Ot(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function Ds(e,t,n){var r=ye.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function xs(e,t,n){var r=ye.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function Ss(e,t,n){var r=ye.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function Ts(e,t,n){var r=ye.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function Cs(e,t,n){var r=ye.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function Ai(e,t,n){var r=ye.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function Ni(e,t,n){var r=ye.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function As(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Ns(e,t,n){var r=ye.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function Es(e,t,n){var r=ye.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function Ei(e,t,n){var r=ye.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function Fs(e,t,n){var r=ye.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function Fi(e,t,n){var r=ye.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function Ls(e,t,n){var r=ye.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function Us(e,t,n){var r=ye.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function Ps(e,t,n){var r=ye.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function Ys(e,t,n){var r=ye.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Os(e,t,n){var r=bs.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function Hs(e,t,n){var r=ye.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function Is(e,t,n){var r=ye.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function Li(e,t){return ee(e.getDate(),t,2)}function Ws(e,t){return ee(e.getHours(),t,2)}function zs(e,t){return ee(e.getHours()%12||12,t,2)}function Rs(e,t){return ee(1+et.count(Ke(e),e),t,3)}function Bo(e,t){return ee(e.getMilliseconds(),t,3)}function qs(e,t){return Bo(e,t)+"000"}function Xs(e,t){return ee(e.getMonth()+1,t,2)}function Vs(e,t){return ee(e.getMinutes(),t,2)}function Gs(e,t){return ee(e.getSeconds(),t,2)}function Bs(e){var t=e.getDay();return t===0?7:t}function Js(e,t){return ee(St.count(Ke(e)-1,e),t,2)}function Jo(e){var t=e.getDay();return t>=4||t===0?Tt(e):Tt.ceil(e)}function Ks(e,t){return e=Jo(e),ee(Tt.count(Ke(e),e)+(Ke(e).getDay()===4),t,2)}function Zs(e){return e.getDay()}function $s(e,t){return ee(xn.count(Ke(e)-1,e),t,2)}function Qs(e,t){return ee(e.getFullYear()%100,t,2)}function js(e,t){return e=Jo(e),ee(e.getFullYear()%100,t,2)}function eu(e,t){return ee(e.getFullYear()%1e4,t,4)}function tu(e,t){var n=e.getDay();return e=n>=4||n===0?Tt(e):Tt.ceil(e),ee(e.getFullYear()%1e4,t,4)}function nu(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+ee(t/60|0,"0",2)+ee(t%60,"0",2)}function Ui(e,t){return ee(e.getUTCDate(),t,2)}function ru(e,t){return ee(e.getUTCHours(),t,2)}function iu(e,t){return ee(e.getUTCHours()%12||12,t,2)}function ou(e,t){return ee(1+Gr.count(at(e),e),t,3)}function Ko(e,t){return ee(e.getUTCMilliseconds(),t,3)}function lu(e,t){return Ko(e,t)+"000"}function au(e,t){return ee(e.getUTCMonth()+1,t,2)}function su(e,t){return ee(e.getUTCMinutes(),t,2)}function uu(e,t){return ee(e.getUTCSeconds(),t,2)}function fu(e){var t=e.getUTCDay();return t===0?7:t}function cu(e,t){return ee(Go.count(at(e)-1,e),t,2)}function Zo(e){var t=e.getUTCDay();return t>=4||t===0?Ct(e):Ct.ceil(e)}function hu(e,t){return e=Zo(e),ee(Ct.count(at(e),e)+(at(e).getUTCDay()===4),t,2)}function gu(e){return e.getUTCDay()}function du(e,t){return ee(Sn.count(at(e)-1,e),t,2)}function mu(e,t){return ee(e.getUTCFullYear()%100,t,2)}function pu(e,t){return e=Zo(e),ee(e.getUTCFullYear()%100,t,2)}function _u(e,t){return ee(e.getUTCFullYear()%1e4,t,4)}function yu(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Ct(e):Ct.ceil(e),ee(e.getUTCFullYear()%1e4,t,4)}function wu(){return"+0000"}function Pi(){return"%"}function Yi(e){return+e}function Oi(e){return Math.floor(+e/1e3)}var ht,Br;vu({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function vu(e){return ht=vs(e),Br=ht.format,ht.parse,ht.utcFormat,ht.utcParse,ht}function bu(e){return new Date(e)}function ku(e){return e instanceof Date?+e:+new Date(+e)}function $o(e,t,n,r,i,o,l,s,a,u){var f=Ro(),c=f.invert,h=f.domain,g=u(".%L"),d=u(":%S"),w=u("%I:%M"),p=u("%I %p"),y=u("%a %d"),k=u("%b %d"),_=u("%B"),x=u("%Y");function M(v){return(a(v)<v?g:s(v)<v?d:l(v)<v?w:o(v)<v?p:r(v)<v?i(v)<v?y:k:n(v)<v?_:x)(v)}return f.invert=function(v){return new Date(c(v))},f.domain=function(v){return arguments.length?h(Array.from(v,ku)):h().map(bu)},f.ticks=function(v){var S=h();return e(S[0],S[S.length-1],v??10)},f.tickFormat=function(v,S){return S==null?M:u(S)},f.nice=function(v){var S=h();return(!v||typeof v.range!="function")&&(v=t(S[0],S[S.length-1],v??10)),v?h(is(S,v)):f},f.copy=function(){return zo(f,$o(e,t,n,r,i,o,l,s,a,u))},f}function Jr(){return Wr.apply($o(ys,ws,Ke,Dt,St,et,On,Vr,yt,Br).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function he(e){return function(){return e}}const br=Math.PI,kr=2*br,nt=1e-6,Mu=kr-nt;function Qo(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function Du(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return Qo;const n=10**t;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class xu{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?Qo:Du(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,o,l){this._append`C${+t},${+n},${+r},${+i},${this._x1=+o},${this._y1=+l}`}arcTo(t,n,r,i,o){if(t=+t,n=+n,r=+r,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let l=this._x1,s=this._y1,a=r-t,u=i-n,f=l-t,c=s-n,h=f*f+c*c;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(h>nt)if(!(Math.abs(c*a-u*f)>nt)||!o)this._append`L${this._x1=t},${this._y1=n}`;else{let g=r-l,d=i-s,w=a*a+u*u,p=g*g+d*d,y=Math.sqrt(w),k=Math.sqrt(h),_=o*Math.tan((br-Math.acos((w+h-p)/(2*y*k)))/2),x=_/k,M=_/y;Math.abs(x-1)>nt&&this._append`L${t+x*f},${n+x*c}`,this._append`A${o},${o},0,0,${+(c*g>f*d)},${this._x1=t+M*a},${this._y1=n+M*u}`}}arc(t,n,r,i,o,l){if(t=+t,n=+n,r=+r,l=!!l,r<0)throw new Error(`negative radius: ${r}`);let s=r*Math.cos(i),a=r*Math.sin(i),u=t+s,f=n+a,c=1^l,h=l?i-o:o-i;this._x1===null?this._append`M${u},${f}`:(Math.abs(this._x1-u)>nt||Math.abs(this._y1-f)>nt)&&this._append`L${u},${f}`,r&&(h<0&&(h=h%kr+kr),h>Mu?this._append`A${r},${r},0,1,${c},${t-s},${n-a}A${r},${r},0,1,${c},${this._x1=u},${this._y1=f}`:h>nt&&this._append`A${r},${r},0,${+(h>=br)},${c},${this._x1=t+r*Math.cos(o)},${this._y1=n+r*Math.sin(o)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function jo(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new xu(t)}function Kr(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function el(e){this._context=e}el.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function tl(e){return new el(e)}function nl(e){return e[0]}function rl(e){return e[1]}function Tn(e,t){var n=he(!0),r=null,i=tl,o=null,l=jo(s);e=typeof e=="function"?e:e===void 0?nl:he(e),t=typeof t=="function"?t:t===void 0?rl:he(t);function s(a){var u,f=(a=Kr(a)).length,c,h=!1,g;for(r==null&&(o=i(g=l())),u=0;u<=f;++u)!(u<f&&n(c=a[u],u,a))===h&&((h=!h)?o.lineStart():o.lineEnd()),h&&o.point(+e(c,u,a),+t(c,u,a));if(g)return o=null,g+""||null}return s.x=function(a){return arguments.length?(e=typeof a=="function"?a:he(+a),s):e},s.y=function(a){return arguments.length?(t=typeof a=="function"?a:he(+a),s):t},s.defined=function(a){return arguments.length?(n=typeof a=="function"?a:he(!!a),s):n},s.curve=function(a){return arguments.length?(i=a,r!=null&&(o=i(r)),s):i},s.context=function(a){return arguments.length?(a==null?r=o=null:o=i(r=a),s):r},s}function Su(e,t,n){var r=null,i=he(!0),o=null,l=tl,s=null,a=jo(u);e=typeof e=="function"?e:e===void 0?nl:he(+e),t=typeof t=="function"?t:he(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?rl:he(+n);function u(c){var h,g,d,w=(c=Kr(c)).length,p,y=!1,k,_=new Array(w),x=new Array(w);for(o==null&&(s=l(k=a())),h=0;h<=w;++h){if(!(h<w&&i(p=c[h],h,c))===y)if(y=!y)g=h,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),d=h-1;d>=g;--d)s.point(_[d],x[d]);s.lineEnd(),s.areaEnd()}y&&(_[h]=+e(p,h,c),x[h]=+t(p,h,c),s.point(r?+r(p,h,c):_[h],n?+n(p,h,c):x[h]))}if(k)return s=null,k+""||null}function f(){return Tn().defined(i).curve(l).context(o)}return u.x=function(c){return arguments.length?(e=typeof c=="function"?c:he(+c),r=null,u):e},u.x0=function(c){return arguments.length?(e=typeof c=="function"?c:he(+c),u):e},u.x1=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:he(+c),u):r},u.y=function(c){return arguments.length?(t=typeof c=="function"?c:he(+c),n=null,u):t},u.y0=function(c){return arguments.length?(t=typeof c=="function"?c:he(+c),u):t},u.y1=function(c){return arguments.length?(n=c==null?null:typeof c=="function"?c:he(+c),u):n},u.lineX0=u.lineY0=function(){return f().x(e).y(t)},u.lineY1=function(){return f().x(e).y(n)},u.lineX1=function(){return f().x(r).y(t)},u.defined=function(c){return arguments.length?(i=typeof c=="function"?c:he(!!c),u):i},u.curve=function(c){return arguments.length?(l=c,o!=null&&(s=l(o)),u):l},u.context=function(c){return arguments.length?(c==null?o=s=null:s=l(o=c),u):o},u}function Hi(e,t){if((l=e.length)>1)for(var n=1,r,i,o=e[t[0]],l,s=o.length;n<l;++n)for(i=o,o=e[t[n]],r=0;r<s;++r)o[r][1]+=o[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function Ii(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function Tu(e,t){return e[t]}function Cu(e){const t=[];return t.key=e,t}function Wi(){var e=he([]),t=Ii,n=Hi,r=Tu;function i(o){var l=Array.from(e.apply(this,arguments),Cu),s,a=l.length,u=-1,f;for(const c of o)for(s=0,++u;s<a;++s)(l[s][u]=[0,+r(c,l[s].key,u,o)]).data=c;for(s=0,f=Kr(t(l));s<a;++s)l[f[s]].index=s;return n(l,f),l}return i.keys=function(o){return arguments.length?(e=typeof o=="function"?o:he(Array.from(o)),i):e},i.value=function(o){return arguments.length?(r=typeof o=="function"?o:he(+o),i):r},i.order=function(o){return arguments.length?(t=o==null?Ii:typeof o=="function"?o:he(Array.from(o)),i):t},i.offset=function(o){return arguments.length?(n=o??Hi,i):n},i}function zi(e,t,n){const r=e.slice();return r[8]=t[n],r[10]=n,r}function Ri(e){let t,n,r,i,o,l;function s(f,c){if(f[2]==="hourly"||f[2]==="daily"||f[2]==="weekly")return Nu;if(f[2]==="monthly")return Au}let a=s(e),u=a&&a(e);return{c(){t=fe("line"),o=ae(),u&&u.c(),l=Lt(),m(t,"x1",n=e[1](new Date(e[8]))),m(t,"x2",r=e[1](new Date(e[8]))),m(t,"y1",e[0]),m(t,"y2",i=e[0]+At),m(t,"stroke","#808080")},m(f,c){R(f,t,c),R(f,o,c),u&&u.m(f,c),R(f,l,c)},p(f,c){c&10&&n!==(n=f[1](new Date(f[8])))&&m(t,"x1",n),c&10&&r!==(r=f[1](new Date(f[8])))&&m(t,"x2",r),c&1&&m(t,"y1",f[0]),c&1&&i!==(i=f[0]+At)&&m(t,"y2",i),a===(a=s(f))&&u?u.p(f,c):(u&&u.d(1),u=a&&a(f),u&&(u.c(),u.m(l.parentNode,l)))},d(f){f&&(W(t),W(o),W(l)),u&&u.d(f)}}}function Au(e){let t,n=Cn(e[8],"month")+"",r,i,o;return{c(){t=fe("text"),r=de(n),m(t,"x",i=e[1](new Date(e[8]))),m(t,"y",o=e[0]+At),m(t,"dy","6"),m(t,"dominant-baseline","hanging"),m(t,"text-anchor","middle"),m(t,"class","svelte-e1340v")},m(l,s){R(l,t,s),E(t,r)},p(l,s){s&8&&n!==(n=Cn(l[8],"month")+"")&&xe(r,n),s&10&&i!==(i=l[1](new Date(l[8])))&&m(t,"x",i),s&1&&o!==(o=l[0]+At)&&m(t,"y",o)},d(l){l&&W(t)}}}function Nu(e){let t,n=Cn(e[8],"day")+"",r,i,o;return{c(){t=fe("text"),r=de(n),m(t,"x",i=e[1](new Date(e[8]))),m(t,"y",o=e[0]+At),m(t,"dy","6"),m(t,"dominant-baseline","hanging"),m(t,"text-anchor","middle"),m(t,"class","svelte-e1340v")},m(l,s){R(l,t,s),E(t,r)},p(l,s){s&8&&n!==(n=Cn(l[8],"day")+"")&&xe(r,n),s&10&&i!==(i=l[1](new Date(l[8])))&&m(t,"x",i),s&1&&o!==(o=l[0]+At)&&m(t,"y",o)},d(l){l&&W(t)}}}function qi(e){let t,n=e[8]&&Ri(e);return{c(){n&&n.c(),t=Lt()},m(r,i){n&&n.m(r,i),R(r,t,i)},p(r,i){r[8]?n?n.p(r,i):(n=Ri(r),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(r){r&&W(t),n&&n.d(r)}}}function Eu(e){let t,n=be(e[3]),r=[];for(let i=0;i<n.length;i+=1)r[i]=qi(zi(e,n,i));return{c(){for(let i=0;i<r.length;i+=1)r[i].c();t=Lt()},m(i,o){for(let l=0;l<r.length;l+=1)r[l]&&r[l].m(i,o);R(i,t,o)},p(i,[o]){if(o&15){n=be(i[3]);let l;for(l=0;l<n.length;l+=1){const s=zi(i,n,l);r[l]?r[l].p(s,o):(r[l]=qi(s),r[l].c(),r[l].m(t.parentNode,t))}for(;l<r.length;l+=1)r[l].d(1);r.length=n.length}},i:re,o:re,d(i){i&&W(t),tt(r,i)}}}const At=4;function Cn(e,t){const n=new Date(e);if(t==="day"){const r=n.getDate(),i=n.toLocaleDateString("en-US",{month:"short"});return`${r} ${i}`}else if(t==="month"){const r=n.toLocaleDateString("en-US",{month:"short"}),i=n.getFullYear().toString().substr(-2);return`${r} ${i}`}return e}function Fu(e,t,n){let r,{height:i}=t,{xScale:o}=t,{interval:l}=t,{width:s=0}=t,{customTicks:a=null}=t;const u=s<300?80:50;function f(c,h,g){if(!g||g<=0)return[];const d=c.domain(),w=c.range(),p=w[1]-w[0],y=Math.max(2,Math.floor(p/u)),_=(d[1]-d[0])/(1e3*60*60*24);if(h==="hourly")return _<=2?On.every(Math.max(1,Math.floor(12/y))).range(d[0],d[1]):_<=7?et.every(1).range(d[0],d[1]):et.every(Math.max(1,Math.floor(_/y))).range(d[0],d[1]);if(h==="daily")if(_<=30){const x=Math.max(1,Math.floor(_/y)),M=et.every(x).range(d[0],d[1]),v=M[M.length-1],S=(d[1]-v)/(1e3*60*60);if(S>12&&S<24){const Y=new Date(v);Y.setDate(Y.getDate()+1),M.push(Y)}return M}else return _<=90?St.every(Math.max(1,Math.floor(_/7/y))).range(d[0],d[1]):Dt.every(Math.max(1,Math.floor(_/30/y))).range(d[0],d[1]);else if(h==="weekly"){const x=Math.ceil(_/7);if(_<=120){const M=Math.max(1,Math.floor(x/y)),v=St.every(M).range(d[0],d[1]);if(v.length>0){const S=v[v.length-1],Y=(d[1]-S)/(1e3*60*60*24);if(Y>3.5&&Y<7){const q=new Date(S);q.setDate(q.getDate()+7),v.push(q)}}return v}else return Dt.every(Math.max(1,Math.floor(_/30/y))).range(d[0],d[1])}else if(h==="monthly"){const x=(d[1].getFullYear()-d[0].getFullYear())*12+(d[1].getMonth()-d[0].getMonth());if(x<=5){const M=[];let v=new Date(d[0]);for(v.setDate(1);v<=d[1];)M.push(new Date(v)),v.setMonth(v.getMonth()+1);const S=new Date(d[1]);return S.setDate(1),(M.length===0||M[M.length-1].getMonth()!==S.getMonth()||M[M.length-1].getFullYear()!==S.getFullYear())&&M.push(S),M}else{const M=Math.max(1,Math.floor(x/y)),v=Dt.every(M).range(d[0],d[1]),S=new Date(d[1]);return S.setDate(1),!v.some(q=>q.getMonth()===S.getMonth()&&q.getFullYear()===S.getFullYear())&&d[1].getDate()>1&&v.push(S),v}}return c.ticks(y)}return e.$$set=c=>{"height"in c&&n(0,i=c.height),"xScale"in c&&n(1,o=c.xScale),"interval"in c&&n(2,l=c.interval),"width"in c&&n(4,s=c.width),"customTicks"in c&&n(5,a=c.customTicks)},e.$$.update=()=>{e.$$.dirty&54&&n(3,r=a||f(o,l,s)),e.$$.dirty&28&&r&&r.length>0&&console.log(`Generated ${r.length} ticks for interval: ${l}, width: ${s}px`)},[i,o,l,r,s,a]}class il extends Qe{constructor(t){super(),$e(this,t,Fu,Eu,ze,{height:0,xScale:1,interval:2,width:4,customTicks:5})}}function Xi(e,t,n){const r=e.slice();return r[5]=t[n],r[7]=n,r}function Lu(e){let t,n,r=e[5]+"",i;return{c(){t=fe("line"),n=fe("text"),i=de(r),m(t,"x1",0),m(t,"x2",Nt),m(t,"y1",0),m(t,"y2",0),m(t,"stroke",e[7]===0?"#8f8f8f":"#e5e7eb"),m(n,"x",Nt+ol),m(n,"dominant-baseline","middle"),m(n,"text-anchor","start"),m(n,"class","svelte-8lm8ea")},m(o,l){R(o,t,l),R(o,n,l),E(n,i)},p(o,l){l&8&&r!==(r=o[5]+"")&&xe(i,r)},d(o){o&&(W(t),W(n))}}}function Uu(e){let t,n,r=e[5]+"",i;return{c(){t=fe("line"),n=fe("text"),i=de(r),m(t,"x1",-Nt),m(t,"x2",e[0]),m(t,"y1",0),m(t,"y2",0),m(t,"stroke",e[7]===0?"#8f8f8f":"#e5e7eb"),m(n,"x",-Nt-ol),m(n,"dominant-baseline","middle"),m(n,"text-anchor","end"),m(n,"class","svelte-8lm8ea")},m(o,l){R(o,t,l),R(o,n,l),E(n,i)},p(o,l){l&1&&m(t,"x2",o[0]),l&8&&r!==(r=o[5]+"")&&xe(i,r)},d(o){o&&(W(t),W(n))}}}function Vi(e){let t,n;function r(l,s){return l[4]==="left"?Uu:Lu}let i=r(e),o=i(e);return{c(){t=fe("g"),o.c(),m(t,"class","tick"),m(t,"transform",n="translate(0, "+e[1](e[5])+")")},m(l,s){R(l,t,s),o.m(t,null)},p(l,s){i===(i=r(l))&&o?o.p(l,s):(o.d(1),o=i(l),o&&(o.c(),o.m(t,null))),s&10&&n!==(n="translate(0, "+l[1](l[5])+")")&&m(t,"transform",n)},d(l){l&&W(t),o.d()}}}function Pu(e){let t,n;return{c(){t=fe("text"),n=de(e[2]),m(t,"class","axis-title svelte-8lm8ea"),m(t,"x",Nt+30),m(t,"y",-36),m(t,"dy","4"),m(t,"dominant-baseline","hanging"),m(t,"text-anchor","end")},m(r,i){R(r,t,i),E(t,n)},p(r,i){i&4&&xe(n,r[2])},d(r){r&&W(t)}}}function Yu(e){let t,n;return{c(){t=fe("text"),n=de(e[2]),m(t,"class","axis-title svelte-8lm8ea"),m(t,"x",-Nt-30),m(t,"y",-36),m(t,"dy","4"),m(t,"dominant-baseline","hanging"),m(t,"text-anchor","start")},m(r,i){R(r,t,i),E(t,n)},p(r,i){i&4&&xe(n,r[2])},d(r){r&&W(t)}}}function Ou(e){let t,n,r=be(e[3]),i=[];for(let a=0;a<r.length;a+=1)i[a]=Vi(Xi(e,r,a));function o(a,u){return a[4]==="left"?Yu:Pu}let l=o(e),s=l(e);return{c(){t=fe("g");for(let a=0;a<i.length;a+=1)i[a].c();n=Lt(),s.c(),m(t,"class","axis y")},m(a,u){R(a,t,u);for(let f=0;f<i.length;f+=1)i[f]&&i[f].m(t,null);E(t,n),s.m(t,null)},p(a,[u]){if(u&27){r=be(a[3]);let f;for(f=0;f<r.length;f+=1){const c=Xi(a,r,f);i[f]?i[f].p(c,u):(i[f]=Vi(c),i[f].c(),i[f].m(t,n))}for(;f<i.length;f+=1)i[f].d(1);i.length=r.length}l===(l=o(a))&&s?s.p(a,u):(s.d(1),s=l(a),s&&(s.c(),s.m(t,null)))},i:re,o:re,d(a){a&&W(t),tt(i,a),s.d()}}}const Nt=10,ol=8;function Hu(e,t,n){let{width:r}=t,{yScale:i}=t,{title:o}=t,{ticks:l}=t,{orientation:s="left"}=t;return e.$$set=a=>{"width"in a&&n(0,r=a.width),"yScale"in a&&n(1,i=a.yScale),"title"in a&&n(2,o=a.title),"ticks"in a&&n(3,l=a.ticks),"orientation"in a&&n(4,s=a.orientation)},[r,i,o,l,s]}class Mr extends Qe{constructor(t){super(),$e(this,t,Hu,Ou,ze,{width:0,yScale:1,title:2,ticks:3,orientation:4})}}function Gi(e){let t;return{c(){t=fe("line"),m(t,"x1",e[1]),m(t,"x2",e[1]),m(t,"y1",0),m(t,"y2",e[3]),m(t,"stroke","darkgrey"),m(t,"stroke-dasharray","2, 2"),m(t,"pointer-events","none")},m(n,r){R(n,t,r)},p(n,r){r&2&&m(t,"x1",n[1]),r&2&&m(t,"x2",n[1]),r&8&&m(t,"y2",n[3])},d(n){n&&W(t)}}}function Iu(e){let t,n,r,i,o,l=e[0]&&Gi(e);return{c(){t=fe("rect"),n=ae(),l&&l.c(),r=Lt(),m(t,"class","hover-listener svelte-hiaj90"),m(t,"fill","transparent"),m(t,"width",e[2]),m(t,"height",e[3])},m(s,a){R(s,t,a),R(s,n,a),l&&l.m(s,a),R(s,r,a),i||(o=[Ue(t,"mousemove",e[4]),Ue(t,"mouseleave",e[5])],i=!0)},p(s,[a]){a&4&&m(t,"width",s[2]),a&8&&m(t,"height",s[3]),s[0]?l?l.p(s,a):(l=Gi(s),l.c(),l.m(r.parentNode,r)):l&&(l.d(1),l=null)},i:re,o:re,d(s){s&&(W(t),W(n),W(r)),l&&l.d(s),i=!1,We(o)}}}function Wu(e,t,n){let{xScale:r}=t,{margin:i}=t,{width:o}=t,{height:l}=t,{hoveredDate:s}=t,{xPos:a}=t,{aggregationLevel:u="hourly"}=t;const f=function(h){const g=h.offsetX-i.left,d=r.invert(g);n(0,s=d.getTime()),n(1,a=g)},c=function(){n(0,s=null),n(1,a=0)};return e.$$set=h=>{"xScale"in h&&n(6,r=h.xScale),"margin"in h&&n(7,i=h.margin),"width"in h&&n(2,o=h.width),"height"in h&&n(3,l=h.height),"hoveredDate"in h&&n(0,s=h.hoveredDate),"xPos"in h&&n(1,a=h.xPos),"aggregationLevel"in h&&n(8,u=h.aggregationLevel)},[s,a,o,l,f,c,r,i,u]}class zu extends Qe{constructor(t){super(),$e(this,t,Wu,Iu,ze,{xScale:6,margin:7,width:2,height:3,hoveredDate:0,xPos:1,aggregationLevel:8})}}function Ru(e){const t=e-1;return t*t*t+1}function Bt(e,{delay:t=0,duration:n=400,easing:r=Un}={}){const i=+getComputedStyle(e).opacity;return{delay:t,duration:n,easing:r,css:o=>`opacity: ${o*i}`}}function qu(e,{delay:t=0,duration:n=400,easing:r=Ru,x:i=0,y:o=0,opacity:l=0}={}){const s=getComputedStyle(e),a=+s.opacity,u=s.transform==="none"?"":s.transform,f=a*(1-l),[c,h]=ai(i),[g,d]=ai(o);return{delay:t,duration:n,easing:r,css:(w,p)=>`
			transform: ${u} translate(${(1-w)*c}${h}, ${(1-w)*g}${d});
			opacity: ${a-f*p}`}}function Bi(e,t,n){const r=e.slice();return r[13]=t[n],r}function Ji(e){let t,n,r=e[13]+"",i,o,l,s=(typeof e[0][e[13]]=="number"?e[0][e[13]].toFixed(2):e[0][e[13]])+"",a,u;return{c(){t=X("div"),n=X("span"),i=de(r),o=ae(),l=X("span"),a=de(s),u=ae(),m(n,"class","key svelte-11vy6zu"),Ye(n,"background",e[1](e[13])),m(t,"class","info svelte-11vy6zu")},m(f,c){R(f,t,c),E(t,n),E(n,i),E(t,o),E(t,l),E(l,a),E(t,u)},p(f,c){c&32&&r!==(r=f[13]+"")&&xe(i,r),c&34&&Ye(n,"background",f[1](f[13])),c&33&&s!==(s=(typeof f[0][f[13]]=="number"?f[0][f[13]].toFixed(2):f[0][f[13]])+"")&&xe(a,s)},d(f){f&&W(t)}}}function Ki(e){let t,n,r,i,o,l,s=(typeof e[0].demand=="number"?e[0].demand.toFixed(2):e[0].demand)+"",a;return{c(){t=X("div"),n=ae(),r=X("div"),i=X("span"),i.textContent="Demand",o=ae(),l=X("span"),a=de(s),m(t,"class","separator svelte-11vy6zu"),m(i,"class","key demand-key svelte-11vy6zu"),m(r,"class","info special-row svelte-11vy6zu")},m(u,f){R(u,t,f),R(u,n,f),R(u,r,f),E(r,i),E(r,o),E(r,l),E(l,a)},p(u,f){f&1&&s!==(s=(typeof u[0].demand=="number"?u[0].demand.toFixed(2):u[0].demand)+"")&&xe(a,s)},d(u){u&&(W(t),W(n),W(r))}}}function Zi(e){let t,n,r,i,o,l,s=(typeof e[0].spot_price=="number"?e[0].spot_price.toFixed(2):e[0].spot_price)+"",a,u;return{c(){t=X("div"),n=ae(),r=X("div"),i=X("span"),i.textContent="Spot Price",o=ae(),l=X("span"),a=de(s),u=de(" ¥/kWh"),m(t,"class","separator svelte-11vy6zu"),m(i,"class","key spot_price-key svelte-11vy6zu"),m(r,"class","info special-row svelte-11vy6zu")},m(f,c){R(f,t,c),R(f,n,c),R(f,r,c),E(r,i),E(r,o),E(r,l),E(l,a),E(l,u)},p(f,c){c&1&&s!==(s=(typeof f[0].spot_price=="number"?f[0].spot_price.toFixed(2):f[0].spot_price)+"")&&xe(a,s)},d(f){f&&(W(t),W(n),W(r))}}}function Xu(e){let t,n,r,i,o,l,s,a,u,f,c=be(e[5]),h=[];for(let w=0;w<c.length;w+=1)h[w]=Ji(Bi(e,c,w));let g=e[2]&&e[0].demand!==void 0&&Ki(e),d=e[3]&&e[0].spot_price!==void 0&&Zi(e);return{c(){t=X("div"),n=X("h1"),r=de(e[6]),i=ae();for(let w=0;w<h.length;w+=1)h[w].c();o=ae(),g&&g.c(),l=ae(),d&&d.c(),m(n,"class","svelte-11vy6zu"),m(t,"class","tooltip svelte-11vy6zu"),Ye(t,"left",e[7]+"px"),Ye(t,"top",e[8]+"px"),Ie(()=>e[12].call(t))},m(w,p){R(w,t,p),E(t,n),E(n,r),E(t,i);for(let y=0;y<h.length;y+=1)h[y]&&h[y].m(t,null);E(t,o),g&&g.m(t,null),E(t,l),d&&d.m(t,null),s=Yl(t,e[12].bind(t)),f=!0},p(w,[p]){if((!f||p&64)&&xe(r,w[6]),p&35){c=be(w[5]);let y;for(y=0;y<c.length;y+=1){const k=Bi(w,c,y);h[y]?h[y].p(k,p):(h[y]=Ji(k),h[y].c(),h[y].m(t,o))}for(;y<h.length;y+=1)h[y].d(1);h.length=c.length}w[2]&&w[0].demand!==void 0?g?g.p(w,p):(g=Ki(w),g.c(),g.m(t,l)):g&&(g.d(1),g=null),w[3]&&w[0].spot_price!==void 0?d?d.p(w,p):(d=Zi(w),d.c(),d.m(t,null)):d&&(d.d(1),d=null),(!f||p&128)&&Ye(t,"left",w[7]+"px")},i(w){f||(w&&Ie(()=>{f&&(u&&u.end(1),a=Vl(t,qu,{y:10,duration:200,delay:200}),a.start())}),f=!0)},o(w){a&&a.invalidate(),w&&(u=Gl(t,Bt,{})),f=!1},d(w){w&&W(t),tt(h,w),g&&g.d(),d&&d.d(),s(),w&&u&&u.end()}}}const tr=5,Vu=5;function Gu(e,t){console.log("aggregation",t);const n=new Date(e),r=f=>{if(f>3&&f<21)return"th";switch(f%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},i=n.getDate(),o=i+r(i),s=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][n.getMonth()],a=n.getFullYear();let u=`${o} ${s} ${a}`;if(t==="hourly"){let f=n.getHours();const c=n.getMinutes(),h=f>=12?"pm":"am";f=f%12,f=f||12;const g=c<10?"0"+c:c;u+=`, ${f}.${g}${h}`}return u}function Bu(e,t,n){let r,i,{width:o}=t,{data:l}=t,{colorScale:s}=t,{x:a}=t,{showDemand:u=!1}=t,{showSpotPrice:f=!1}=t,{aggregationLevel:c="hourly"}=t,h,g,d=Vu;function w(){h=this.clientWidth,n(4,h)}return e.$$set=p=>{"width"in p&&n(9,o=p.width),"data"in p&&n(0,l=p.data),"colorScale"in p&&n(1,s=p.colorScale),"x"in p&&n(10,a=p.x),"showDemand"in p&&n(2,u=p.showDemand),"showSpotPrice"in p&&n(3,f=p.showSpotPrice),"aggregationLevel"in p&&n(11,c=p.aggregationLevel)},e.$$.update=()=>{if(e.$$.dirty&1552&&n(7,r=a+h+tr>o?a-h-tr:a+tr),e.$$.dirty&2049&&n(6,i=Gu(l.date,c)),e.$$.dirty&13&&l){let p=Object.entries(l);p.sort((k,_)=>_[1]-k[1]);let y=Object.fromEntries(p);n(5,g=Object.keys(y).filter(k=>k!=="date"&&k!=="region"&&(!u||k!=="demand")&&(!f||k!=="spot_price")))}},[l,s,u,f,h,g,i,r,d,o,a,c,w]}class Ju extends Qe{constructor(t){super(),$e(this,t,Bu,Xu,ze,{width:9,data:0,colorScale:1,x:10,showDemand:2,showSpotPrice:3,aggregationLevel:11})}}const Ku=["hydropower","geothermal","bioenergy","solar","wind","pumping_up","pumping_down","battery_charge","battery_generate","solar_curtailment","wind_curtailment"],Zu=["nuclear","thermal","thermal_lng","thermal_coal","thermal_oil","thermal_others","others"],$u=["demand","spot_price"],Dr={hydropower:"blue",geothermal:"darkgray",bioenergy:"#009933",solar:"gold",wind:"#99CCFF",pumping_up:"#FFB6C1",pumping_down:"#FFB6C1",battery_charge:"#DAB1DA",battery_generate:"#DAB1DA",nuclear:"#FF0000",thermal_lng:"#FFDBBB",thermal_coal:"#808080",thermal_oil:"#996633",thermal_others:"#FFA500",thermal:"#FFA500",others:"#36454F",demand:"#000",spot_price:"purple",solar_curtailment:"yellow",wind_curtailment:"#40E0D0"},Qu={en:{hydropower:"Hydropower",geothermal:"Geothermal",bioenergy:"Bioenergy",solar:"Solar",wind:"Wind",pumping_up:"Pumping Up",pumping_down:"Pumping Down",battery_charge:"Battery Charge",battery_generate:"Battery Generate",nuclear:"Nuclear",thermal_lng:"LNG",thermal_coal:"Coal",thermal_oil:"Oil",thermal_others:"Thermal Others",thermal:"Thermal",others:"Others",demand:"Demand",spot_price:"JEPX System Price",solar_curtailment:"Solar Curtailment",wind_curtailment:"Wind Curtailment",powerGeneration:"Power Generation (GW)",systemPrice:"JEPX System Price (JPY/kWh)"},jp:{hydropower:"揚水(発力)",geothermal:"地熱",bioenergy:"バイオエネルギー",solar:"太陽光",wind:"風力",pumping_up:"揚水(揚水)",pumping_down:"揚水(発電)",battery_charge:"蓄電池(充電)",battery_generate:"蓄電池(放電)",nuclear:"原子力",thermal_lng:"LNG",thermal_coal:"石炭",thermal_oil:"石油",thermal_others:"火力その他",thermal:"火力",others:"その他",demand:"需要",spot_price:"JEPXシステムプライス",solar_curtailment:"太陽光(出力制御)",wind_curtailment:"風力(出力制御)",powerGeneration:"発電量 (GW)",systemPrice:"JEPXシステムプライス (円/kWh)"}};function $i(e,t,n){const r=e.slice();return r[36]=t[n],r[38]=n,r}function Qi(e,t,n){const r=e.slice();return r[36]=t[n],r[38]=n,r}function ji(e){let t,n,r,i,o,l,s;return{c(){t=fe("path"),m(t,"d",n=e[16](e[36])),m(t,"stroke",r=e[20](e[36].key)),m(t,"fill",i=e[20](e[36].key)),m(t,"stroke-width","1"),m(t,"opacity",o=e[2]?e[2]===e[36].key?1:.2:1)},m(a,u){R(a,t,u),s=!0},p(a,u){(!s||u[0]&327680&&n!==(n=a[16](a[36])))&&m(t,"d",n),(!s||u[0]&262144&&r!==(r=a[20](a[36].key)))&&m(t,"stroke",r),(!s||u[0]&262144&&i!==(i=a[20](a[36].key)))&&m(t,"fill",i),(!s||u[0]&262148&&o!==(o=a[2]?a[2]===a[36].key?1:.2:1))&&m(t,"opacity",o)},i(a){s||(a&&Ie(()=>{s&&(l||(l=pn(t,Bt,{},!0)),l.run(1))}),s=!0)},o(a){a&&(l||(l=pn(t,Bt,{},!1)),l.run(0)),s=!1},d(a){a&&W(t),a&&l&&l.end()}}}function eo(e){let t,n,r,i,o,l,s;return{c(){t=fe("path"),m(t,"d",n=e[16](e[36])),m(t,"stroke",r=e[20](e[36].key)),m(t,"fill",i=e[20](e[36].key)),m(t,"stroke-width","1"),m(t,"opacity",o=e[2]?e[2]===e[36].key?1:.2:1)},m(a,u){R(a,t,u),s=!0},p(a,u){(!s||u[0]&196608&&n!==(n=a[16](a[36])))&&m(t,"d",n),(!s||u[0]&131072&&r!==(r=a[20](a[36].key)))&&m(t,"stroke",r),(!s||u[0]&131072&&i!==(i=a[20](a[36].key)))&&m(t,"fill",i),(!s||u[0]&131076&&o!==(o=a[2]?a[2]===a[36].key?1:.2:1))&&m(t,"opacity",o)},i(a){s||(a&&Ie(()=>{s&&(l||(l=pn(t,Bt,{},!0)),l.run(1))}),s=!0)},o(a){a&&(l||(l=pn(t,Bt,{},!1)),l.run(0)),s=!1},d(a){a&&W(t),a&&l&&l.end()}}}function to(e){let t,n;return t=new Ju({props:{data:e[13],x:e[19],colorScale:e[20],width:e[12],showDemand:!0,showSpotPrice:!0,aggregationLevel:e[1]}}),{c(){Se(t.$$.fragment)},m(r,i){ke(t,r,i),n=!0},p(r,i){const o={};i[0]&8192&&(o.data=r[13]),i[0]&524288&&(o.x=r[19]),i[0]&4096&&(o.width=r[12]),i[0]&2&&(o.aggregationLevel=r[1]),t.$set(o)},i(r){n||(le(t.$$.fragment,r),n=!0)},o(r){ce(t.$$.fragment,r),n=!1},d(r){Me(t,r)}}}function ju(e){let t,n,r,i,o,l,s,a,u,f,c,h,g,d,w,p,y,k,_,x,M;i=new Mr({props:{width:e[5],yScale:e[9],ticks:e[9].ticks(8),title:e[3]==="en"?"Power Generation (GW)":"発電量 (GW)",orientation:"left"}}),l=new Mr({props:{width:0,yScale:e[7],ticks:e[7].ticks(8),title:e[3]==="en"?"JEPX System Price (JPY/kWh)":"JEPXシステムプライス (円/kWh)",orientation:"right"}}),a=new il({props:{height:e[4],width:e[5],interval:e[1],xScale:e[8]}});let v=be(e[18]),S=[];for(let b=0;b<v.length;b+=1)S[b]=ji(Qi(e,v,b));const Y=b=>ce(S[b],1,1,()=>{S[b]=null});let q=be(e[17]),L=[];for(let b=0;b<q.length;b+=1)L[b]=eo($i(e,q,b));const T=b=>ce(L[b],1,1,()=>{L[b]=null});function J(b){e[30](b)}function A(b){e[31](b)}let I={width:e[5],height:e[4],xScale:e[8],margin:e[21]};e[6]!==void 0&&(I.hoveredDate=e[6]),e[19]!==void 0&&(I.xPos=e[19]),y=new zu({props:I}),Oe.push(()=>qt(y,"hoveredDate",J)),Oe.push(()=>qt(y,"xPos",A));let z=e[6]&&e[13]&&to(e);return{c(){t=X("div"),n=fe("svg"),r=fe("g"),Se(i.$$.fragment),o=fe("g"),Se(l.$$.fragment),Se(a.$$.fragment),u=fe("line");for(let b=0;b<S.length;b+=1)S[b].c();h=Lt();for(let b=0;b<L.length;b+=1)L[b].c();g=fe("path"),w=fe("path"),Se(y.$$.fragment),x=ae(),z&&z.c(),m(o,"transform",s="translate("+e[5]+", 0)"),m(u,"x1","0"),m(u,"y1",f=e[9](0)),m(u,"x2",e[5]),m(u,"y2",c=e[9](0)),m(u,"stroke","black"),m(u,"stroke-width","1"),m(u,"stroke-dasharray","4,4"),m(g,"d",d=e[15](e[0])),m(g,"fill","none"),m(g,"stroke","black"),m(g,"stroke-width","2"),m(w,"d",p=e[14](e[0])),m(w,"fill","none"),m(w,"stroke","purple"),m(w,"stroke-width","2"),m(r,"transform","translate("+e[21].left+" "+e[21].top+")"),m(n,"width",e[12]),m(n,"height",e[11]),m(t,"class","chart-container svelte-ou68eo")},m(b,C){R(b,t,C),E(t,n),E(n,r),ke(i,r,null),E(r,o),ke(l,o,null),ke(a,r,null),E(r,u);for(let G=0;G<S.length;G+=1)S[G]&&S[G].m(r,null);E(r,h);for(let G=0;G<L.length;G+=1)L[G]&&L[G].m(r,null);E(r,g),E(r,w),ke(y,r,null),E(t,x),z&&z.m(t,null),e[32](t),M=!0},p(b,C){const G={};C[0]&32&&(G.width=b[5]),C[0]&512&&(G.yScale=b[9]),C[0]&512&&(G.ticks=b[9].ticks(8)),C[0]&8&&(G.title=b[3]==="en"?"Power Generation (GW)":"発電量 (GW)"),i.$set(G);const K={};C[0]&128&&(K.yScale=b[7]),C[0]&128&&(K.ticks=b[7].ticks(8)),C[0]&8&&(K.title=b[3]==="en"?"JEPX System Price (JPY/kWh)":"JEPXシステムプライス (円/kWh)"),l.$set(K),(!M||C[0]&32&&s!==(s="translate("+b[5]+", 0)"))&&m(o,"transform",s);const Z={};if(C[0]&16&&(Z.height=b[4]),C[0]&32&&(Z.width=b[5]),C[0]&2&&(Z.interval=b[1]),C[0]&256&&(Z.xScale=b[8]),a.$set(Z),(!M||C[0]&512&&f!==(f=b[9](0)))&&m(u,"y1",f),(!M||C[0]&32)&&m(u,"x2",b[5]),(!M||C[0]&512&&c!==(c=b[9](0)))&&m(u,"y2",c),C[0]&1376260){v=be(b[18]);let O;for(O=0;O<v.length;O+=1){const F=Qi(b,v,O);S[O]?(S[O].p(F,C),le(S[O],1)):(S[O]=ji(F),S[O].c(),le(S[O],1),S[O].m(r,h))}for(bt(),O=v.length;O<S.length;O+=1)Y(O);kt()}if(C[0]&1245188){q=be(b[17]);let O;for(O=0;O<q.length;O+=1){const F=$i(b,q,O);L[O]?(L[O].p(F,C),le(L[O],1)):(L[O]=eo(F),L[O].c(),le(L[O],1),L[O].m(r,g))}for(bt(),O=q.length;O<L.length;O+=1)T(O);kt()}(!M||C[0]&32769&&d!==(d=b[15](b[0])))&&m(g,"d",d),(!M||C[0]&16385&&p!==(p=b[14](b[0])))&&m(w,"d",p);const $={};C[0]&32&&($.width=b[5]),C[0]&16&&($.height=b[4]),C[0]&256&&($.xScale=b[8]),!k&&C[0]&64&&(k=!0,$.hoveredDate=b[6],Rt(()=>k=!1)),!_&&C[0]&524288&&(_=!0,$.xPos=b[19],Rt(()=>_=!1)),y.$set($),(!M||C[0]&4096)&&m(n,"width",b[12]),(!M||C[0]&2048)&&m(n,"height",b[11]),b[6]&&b[13]?z?(z.p(b,C),C[0]&8256&&le(z,1)):(z=to(b),z.c(),le(z,1),z.m(t,null)):z&&(bt(),ce(z,1,1,()=>{z=null}),kt())},i(b){if(!M){le(i.$$.fragment,b),le(l.$$.fragment,b),le(a.$$.fragment,b);for(let C=0;C<v.length;C+=1)le(S[C]);for(let C=0;C<q.length;C+=1)le(L[C]);le(y.$$.fragment,b),le(z),M=!0}},o(b){ce(i.$$.fragment,b),ce(l.$$.fragment,b),ce(a.$$.fragment,b),S=S.filter(Boolean);for(let C=0;C<S.length;C+=1)ce(S[C]);L=L.filter(Boolean);for(let C=0;C<L.length;C+=1)ce(L[C]);ce(y.$$.fragment,b),ce(z),M=!1},d(b){b&&W(t),Me(i),Me(l),Me(a),tt(S,b),tt(L,b),Me(y),z&&z.d(),e[32](null)}}}function ef(e){const t=Object.keys(e[0]||{}).filter(r=>r!=="date"&&r!=="region"&&r!=="demand"&&r!=="spot_price"),n={};return t.forEach(r=>{n[r]=e.reduce((i,o)=>i+(o[r]||0),0)}),t.sort((r,i)=>n[i]-n[r])}function no(e,t){if(e.length)for(let n=0,r=e[0].length;n<r;++n){let i=0,o=0;for(let l=0;l<e.length;++l){const s=e[l][n][1]-e[l][n][0];s<0?(e[l][n][1]=o,e[l][n][0]=o+=s):(e[l][n][0]=i,e[l][n][1]=i+=s)}}}function nr(e){const t=new Date(e),n=t.getDay();return t.setDate(t.getDate()-n),t.setHours(0,0,0,0),t}function tf(e,t,n){let r,i,o,l,s,a,u,f,c,h,g,d,w,p,y,k,_,x,M,{data:v,aggregationLevel:S,clickedItem:Y}=t,{currentLang:q="en"}=t;const L=Uo().domain(Object.keys(Dr)).range(Object.values(Dr)),T={top:40,right:50,bottom:30,left:50};let J,A=520,I=600,z=A-T.top-T.bottom,b=I-T.left-T.right;Pn(()=>{C()}),Fo(()=>{C()});function C(){J&&(n(12,I=J.clientWidth),n(5,b=I-T.left-T.right),n(11,A=J.clientHeight),n(4,z=A-T.top-T.bottom))}function G(F,te){const ie=[],oe=[];return te.forEach(j=>{const _e=F.some(H=>(H[j]||0)<0),N=F.some(H=>(H[j]||0)>0);_e&&oe.push(j),N&&ie.push(j)}),{positiveKeys:ie,negativeKeys:oe}}function K(F,te,ie){return F.length?F.reduce((oe,j)=>{const _e=new Date(j.date),N=_e.getTime(),H=oe?new Date(oe.date):null,V=H?H.getTime():null;if(!oe||N===te)return j;if(ie==="hourly"){if(Math.abs(N-te)<Math.abs(V-te))return j}else if(ie==="daily"){const D=new Date(te).setHours(0,0,0,0),ne=new Date(_e).setHours(0,0,0,0),B=new Date(H).setHours(0,0,0,0);if(Math.abs(ne-D)<Math.abs(B-D))return j}else if(ie==="weekly"){const D=nr(new Date(te)),ne=nr(_e),B=nr(H);if(Math.abs(ne.getTime()-D.getTime())<Math.abs(B.getTime()-D.getTime()))return j}else if(ie==="monthly"){const D=new Date(te),ne=D.getMonth(),B=D.getFullYear(),Q=_e.getMonth(),ge=_e.getFullYear(),P=H.getMonth(),se=H.getFullYear(),Ne=B*12+ne,me=ge*12+Q,Qt=se*12+P;if(Math.abs(me-Ne)<Math.abs(Qt-Ne))return j}return oe},null):null}function Z(F){r=F,n(6,r)}function $(F){i=F,n(19,i)}function O(F){Oe[F?"unshift":"push"](()=>{J=F,n(10,J)})}return e.$$set=F=>{"data"in F&&n(0,v=F.data),"aggregationLevel"in F&&n(1,S=F.aggregationLevel),"clickedItem"in F&&n(2,Y=F.clickedItem),"currentLang"in F&&n(3,q=F.currentLang)},e.$$.update=()=>{e.$$.dirty[0]&1&&n(22,o=ef(v)),e.$$.dirty[0]&4194305&&n(29,l=G(v,o)),e.$$.dirty[0]&536870912&&n(24,s=l.positiveKeys),e.$$.dirty[0]&536870912&&n(23,a=l.negativeKeys),e.$$.dirty[0]&8388609&&n(28,u=Math.min(fi(v,F=>{let te=0;return a.forEach(ie=>{const oe=F[ie]||0;oe<0&&(te+=oe)}),te}),fi(v,F=>F.demand||0))*1.1),e.$$.dirty[0]&16777217&&n(27,f=Math.max(pr(v,F=>{let te=0;return s.forEach(ie=>{const oe=F[ie]||0;oe>0&&(te+=oe)}),te}),pr(v,F=>F.demand||0))*1.1),e.$$.dirty[0]&402653200&&n(9,g=Mn().domain([u,f]).range([z,0])),e.$$.dirty[0]&100663312&&n(7,d=Mn().domain([c,h]).range([z,0])),e.$$.dirty[0]&33&&n(8,w=Jr().domain([new Date(v[0].date),new Date(v[v.length-1].date)]).range([0,b])),e.$$.dirty[0]&20971521&&n(18,p=Wi().keys(s).offset(no)(v.map(F=>{const te={...F};return o.forEach(ie=>{te[ie]=F[ie]>0?F[ie]:0}),te}))),e.$$.dirty[0]&12582913&&n(17,y=Wi().keys(a).offset(no)(v.map(F=>{const te={...F};return o.forEach(ie=>{te[ie]=F[ie]<0?F[ie]:0}),te}))),e.$$.dirty[0]&768&&n(16,k=Su().x(F=>w(new Date(F.data.date))).y0(F=>g(F[0])).y1(F=>g(F[1]))),e.$$.dirty[0]&768&&n(15,_=Tn().x(F=>w(new Date(F.date))).y(F=>g(F.demand||0))),e.$$.dirty[0]&384&&n(14,x=Tn().x(F=>w(new Date(F.date))).y(F=>d(F.spot_price||0))),e.$$.dirty[0]&67&&n(13,M=r?K(v,r,S):null)},n(6,r=null),n(19,i=0),n(26,c=0),n(25,h=130),[v,S,Y,q,z,b,r,d,w,g,J,A,I,M,x,_,k,y,p,i,L,T,o,a,s,h,c,f,u,l,Z,$,O]}class nf extends Qe{constructor(t){super(),$e(this,t,tf,ju,ze,{data:0,aggregationLevel:1,clickedItem:2,currentLang:3},null,[-1,-1])}}function ro(e,t,n){const r=e.slice();return r[15]=t[n],r}function io(e){let t,n,r,i,o,l,s,a,u,f=e[15][0]+"",c,h,g;return{c(){t=fe("path"),r=fe("circle"),l=fe("circle"),u=fe("text"),c=de(f),m(t,"d",n=e[9](e[15][1])),m(t,"stroke","black"),m(t,"fill","transparent"),m(t,"stroke-width","3"),m(r,"cx",i=e[5](new Date(e[15][1][0].date_id))),m(r,"cy",o=e[4](e[15][1][0].value)),m(r,"r",5),m(r,"fill","black"),m(l,"cx",s=e[5](new Date(e[15][1][e[15][1].length-1].date_id))),m(l,"cy",a=e[4](e[15][1][e[15][1].length-1].value)),m(l,"r",5),m(l,"fill","black"),m(u,"x",h=e[5](new Date(e[15][1][0].date_id))+10),m(u,"y",g=e[4](e[15][1][0].value)-10),m(u,"fill","black"),m(u,"text-anchor","start")},m(d,w){R(d,t,w),R(d,r,w),R(d,l,w),R(d,u,w),E(u,c)},p(d,w){w&520&&n!==(n=d[9](d[15][1]))&&m(t,"d",n),w&40&&i!==(i=d[5](new Date(d[15][1][0].date_id)))&&m(r,"cx",i),w&24&&o!==(o=d[4](d[15][1][0].value))&&m(r,"cy",o),w&40&&s!==(s=d[5](new Date(d[15][1][d[15][1].length-1].date_id)))&&m(l,"cx",s),w&24&&a!==(a=d[4](d[15][1][d[15][1].length-1].value))&&m(l,"cy",a),w&8&&f!==(f=d[15][0]+"")&&xe(c,f),w&40&&h!==(h=d[5](new Date(d[15][1][0].date_id))+10)&&m(u,"x",h),w&24&&g!==(g=d[4](d[15][1][0].value)-10)&&m(u,"y",g)},d(d){d&&(W(t),W(r),W(l),W(u))}}}function rf(e){let t,n,r,i,o,l;i=new il({props:{height:e[1],width:e[2],xScale:e[5],interval:"monthly"}}),o=new Mr({props:{width:e[2],yScale:e[4],ticks:e[4].ticks(6),title:e[0]==="en"?"Power Generation (GW)":"発電量 (GW)"}});let s=be(e[3]),a=[];for(let u=0;u<s.length;u+=1)a[u]=io(ro(e,s,u));return{c(){t=X("div"),n=fe("svg"),r=fe("g"),Se(i.$$.fragment),Se(o.$$.fragment);for(let u=0;u<a.length;u+=1)a[u].c();m(r,"transform","translate("+e[10].left+" "+e[10].top+")"),m(n,"width",e[7]),m(n,"height",e[8]),m(t,"class","chart-container svelte-h4stok")},m(u,f){R(u,t,f),E(t,n),E(n,r),ke(i,r,null),ke(o,r,null);for(let c=0;c<a.length;c+=1)a[c]&&a[c].m(r,null);e[13](t),l=!0},p(u,[f]){const c={};f&2&&(c.height=u[1]),f&4&&(c.width=u[2]),f&32&&(c.xScale=u[5]),i.$set(c);const h={};if(f&4&&(h.width=u[2]),f&16&&(h.yScale=u[4]),f&16&&(h.ticks=u[4].ticks(6)),f&1&&(h.title=u[0]==="en"?"Power Generation (GW)":"発電量 (GW)"),o.$set(h),f&568){s=be(u[3]);let g;for(g=0;g<s.length;g+=1){const d=ro(u,s,g);a[g]?a[g].p(d,f):(a[g]=io(d),a[g].c(),a[g].m(r,null))}for(;g<a.length;g+=1)a[g].d(1);a.length=s.length}(!l||f&128)&&m(n,"width",u[7]),(!l||f&256)&&m(n,"height",u[8])},i(u){l||(le(i.$$.fragment,u),le(o.$$.fragment,u),l=!0)},o(u){ce(i.$$.fragment,u),ce(o.$$.fragment,u),l=!1},d(u){u&&W(t),Me(i),Me(o),tt(a,u),e[13](null)}}}function of(e,t,n){let r,i,o,l,s,{data:a}=t,{currentLang:u="en"}=t;const f={top:40,right:60,bottom:30,left:60};let c,h=200,g=520,d=g-f.top-f.bottom,w=h-f.left-f.right;Pn(()=>{p()}),Fo(()=>{p()});function p(){c&&(n(7,h=c.clientWidth),n(2,w=h-f.left-f.right),n(8,g=c.clientHeight),n(1,d=g-f.top-f.bottom))}function y(k){Oe[k?"unshift":"push"](()=>{c=k,n(6,c)})}return e.$$set=k=>{"data"in k&&n(11,a=k.data),"currentLang"in k&&n(0,u=k.currentLang)},e.$$.update=()=>{e.$$.dirty&2048&&n(12,r=a&&a.length>0?pr(a,k=>k.value)*1.1:1e3),e.$$.dirty&2048&&n(3,i=la(a,k=>k.type)),e.$$.dirty&4098&&n(4,o=Mn().domain([0,r]).range([d,0])),e.$$.dirty&2052&&n(5,l=Jr().domain([new Date(a[0].date_id),new Date(a[a.length-1].date_id)]).range([0,w])),e.$$.dirty&48&&n(9,s=Tn().x((k,_)=>l(new Date(k.date_id))).y(k=>o(k.value))),e.$$.dirty&8&&console.log(i)},[u,d,w,i,o,l,c,h,g,s,f,a,r,y]}class lf extends Qe{constructor(t){super(),$e(this,t,of,rf,ze,{data:11,currentLang:0})}}var xr="http://www.w3.org/1999/xhtml";const oo={svg:"http://www.w3.org/2000/svg",xhtml:xr,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Hn(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),oo.hasOwnProperty(t)?{space:oo[t],local:e}:e}function af(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===xr&&t.documentElement.namespaceURI===xr?t.createElement(e):t.createElementNS(n,e)}}function sf(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function ll(e){var t=Hn(e);return(t.local?sf:af)(t)}function uf(){}function Zr(e){return e==null?uf:function(){return this.querySelector(e)}}function ff(e){typeof e!="function"&&(e=Zr(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],l=o.length,s=r[i]=new Array(l),a,u,f=0;f<l;++f)(a=o[f])&&(u=e.call(a,a.__data__,f,o))&&("__data__"in a&&(u.__data__=a.__data__),s[f]=u);return new Te(r,this._parents)}function cf(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function hf(){return[]}function al(e){return e==null?hf:function(){return this.querySelectorAll(e)}}function gf(e){return function(){return cf(e.apply(this,arguments))}}function df(e){typeof e=="function"?e=gf(e):e=al(e);for(var t=this._groups,n=t.length,r=[],i=[],o=0;o<n;++o)for(var l=t[o],s=l.length,a,u=0;u<s;++u)(a=l[u])&&(r.push(e.call(a,a.__data__,u,l)),i.push(a));return new Te(r,i)}function sl(e){return function(){return this.matches(e)}}function ul(e){return function(t){return t.matches(e)}}var mf=Array.prototype.find;function pf(e){return function(){return mf.call(this.children,e)}}function _f(){return this.firstElementChild}function yf(e){return this.select(e==null?_f:pf(typeof e=="function"?e:ul(e)))}var wf=Array.prototype.filter;function vf(){return Array.from(this.children)}function bf(e){return function(){return wf.call(this.children,e)}}function kf(e){return this.selectAll(e==null?vf:bf(typeof e=="function"?e:ul(e)))}function Mf(e){typeof e!="function"&&(e=sl(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],l=o.length,s=r[i]=[],a,u=0;u<l;++u)(a=o[u])&&e.call(a,a.__data__,u,o)&&s.push(a);return new Te(r,this._parents)}function fl(e){return new Array(e.length)}function Df(){return new Te(this._enter||this._groups.map(fl),this._parents)}function An(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}An.prototype={constructor:An,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function xf(e){return function(){return e}}function Sf(e,t,n,r,i,o){for(var l=0,s,a=t.length,u=o.length;l<u;++l)(s=t[l])?(s.__data__=o[l],r[l]=s):n[l]=new An(e,o[l]);for(;l<a;++l)(s=t[l])&&(i[l]=s)}function Tf(e,t,n,r,i,o,l){var s,a,u=new Map,f=t.length,c=o.length,h=new Array(f),g;for(s=0;s<f;++s)(a=t[s])&&(h[s]=g=l.call(a,a.__data__,s,t)+"",u.has(g)?i[s]=a:u.set(g,a));for(s=0;s<c;++s)g=l.call(e,o[s],s,o)+"",(a=u.get(g))?(r[s]=a,a.__data__=o[s],u.delete(g)):n[s]=new An(e,o[s]);for(s=0;s<f;++s)(a=t[s])&&u.get(h[s])===a&&(i[s]=a)}function Cf(e){return e.__data__}function Af(e,t){if(!arguments.length)return Array.from(this,Cf);var n=t?Tf:Sf,r=this._parents,i=this._groups;typeof e!="function"&&(e=xf(e));for(var o=i.length,l=new Array(o),s=new Array(o),a=new Array(o),u=0;u<o;++u){var f=r[u],c=i[u],h=c.length,g=Nf(e.call(f,f&&f.__data__,u,r)),d=g.length,w=s[u]=new Array(d),p=l[u]=new Array(d),y=a[u]=new Array(h);n(f,c,w,p,y,g,t);for(var k=0,_=0,x,M;k<d;++k)if(x=w[k]){for(k>=_&&(_=k+1);!(M=p[_])&&++_<d;);x._next=M||null}}return l=new Te(l,r),l._enter=s,l._exit=a,l}function Nf(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Ef(){return new Te(this._exit||this._groups.map(fl),this._parents)}function Ff(e,t,n){var r=this.enter(),i=this,o=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function Lf(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,o=r.length,l=Math.min(i,o),s=new Array(i),a=0;a<l;++a)for(var u=n[a],f=r[a],c=u.length,h=s[a]=new Array(c),g,d=0;d<c;++d)(g=u[d]||f[d])&&(h[d]=g);for(;a<i;++a)s[a]=n[a];return new Te(s,this._parents)}function Uf(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,o=r[i],l;--i>=0;)(l=r[i])&&(o&&l.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(l,o),o=l);return this}function Pf(e){e||(e=Yf);function t(c,h){return c&&h?e(c.__data__,h.__data__):!c-!h}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var l=n[o],s=l.length,a=i[o]=new Array(s),u,f=0;f<s;++f)(u=l[f])&&(a[f]=u);a.sort(t)}return new Te(i,this._parents).order()}function Yf(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Of(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Hf(){return Array.from(this)}function If(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var l=r[i];if(l)return l}return null}function Wf(){let e=0;for(const t of this)++e;return e}function zf(){return!this.node()}function Rf(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],o=0,l=i.length,s;o<l;++o)(s=i[o])&&e.call(s,s.__data__,o,i);return this}function qf(e){return function(){this.removeAttribute(e)}}function Xf(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Vf(e,t){return function(){this.setAttribute(e,t)}}function Gf(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Bf(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Jf(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Kf(e,t){var n=Hn(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?Xf:qf:typeof t=="function"?n.local?Jf:Bf:n.local?Gf:Vf)(n,t))}function cl(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Zf(e){return function(){this.style.removeProperty(e)}}function $f(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Qf(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function jf(e,t,n){return arguments.length>1?this.each((t==null?Zf:typeof t=="function"?Qf:$f)(e,t,n??"")):Et(this.node(),e)}function Et(e,t){return e.style.getPropertyValue(t)||cl(e).getComputedStyle(e,null).getPropertyValue(t)}function ec(e){return function(){delete this[e]}}function tc(e,t){return function(){this[e]=t}}function nc(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function rc(e,t){return arguments.length>1?this.each((t==null?ec:typeof t=="function"?nc:tc)(e,t)):this.node()[e]}function hl(e){return e.trim().split(/^|\s+/)}function $r(e){return e.classList||new gl(e)}function gl(e){this._node=e,this._names=hl(e.getAttribute("class")||"")}gl.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function dl(e,t){for(var n=$r(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function ml(e,t){for(var n=$r(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function ic(e){return function(){dl(this,e)}}function oc(e){return function(){ml(this,e)}}function lc(e,t){return function(){(t.apply(this,arguments)?dl:ml)(this,e)}}function ac(e,t){var n=hl(e+"");if(arguments.length<2){for(var r=$r(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?lc:t?ic:oc)(n,t))}function sc(){this.textContent=""}function uc(e){return function(){this.textContent=e}}function fc(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function cc(e){return arguments.length?this.each(e==null?sc:(typeof e=="function"?fc:uc)(e)):this.node().textContent}function hc(){this.innerHTML=""}function gc(e){return function(){this.innerHTML=e}}function dc(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function mc(e){return arguments.length?this.each(e==null?hc:(typeof e=="function"?dc:gc)(e)):this.node().innerHTML}function pc(){this.nextSibling&&this.parentNode.appendChild(this)}function _c(){return this.each(pc)}function yc(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function wc(){return this.each(yc)}function vc(e){var t=typeof e=="function"?e:ll(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function bc(){return null}function kc(e,t){var n=typeof e=="function"?e:ll(e),r=t==null?bc:typeof t=="function"?t:Zr(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Mc(){var e=this.parentNode;e&&e.removeChild(this)}function Dc(){return this.each(Mc)}function xc(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Sc(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Tc(e){return this.select(e?Sc:xc)}function Cc(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Ac(e){return function(t){e.call(this,t,this.__data__)}}function Nc(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function Ec(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,o;n<i;++n)o=t[n],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):t[++r]=o;++r?t.length=r:delete this.__on}}}function Fc(e,t,n){return function(){var r=this.__on,i,o=Ac(t);if(r){for(var l=0,s=r.length;l<s;++l)if((i=r[l]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=t;return}}this.addEventListener(e.type,o,n),i={type:e.type,name:e.name,value:t,listener:o,options:n},r?r.push(i):this.__on=[i]}}function Lc(e,t,n){var r=Nc(e+""),i,o=r.length,l;if(arguments.length<2){var s=this.node().__on;if(s){for(var a=0,u=s.length,f;a<u;++a)for(i=0,f=s[a];i<o;++i)if((l=r[i]).type===f.type&&l.name===f.name)return f.value}return}for(s=t?Fc:Ec,i=0;i<o;++i)this.each(s(r[i],t,n));return this}function pl(e,t,n){var r=cl(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Uc(e,t){return function(){return pl(this,e,t)}}function Pc(e,t){return function(){return pl(this,e,t.apply(this,arguments))}}function Yc(e,t){return this.each((typeof t=="function"?Pc:Uc)(e,t))}function*Oc(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length,l;i<o;++i)(l=r[i])&&(yield l)}var _l=[null];function Te(e,t){this._groups=e,this._parents=t}function $t(){return new Te([[document.documentElement]],_l)}function Hc(){return this}Te.prototype=$t.prototype={constructor:Te,select:ff,selectAll:df,selectChild:yf,selectChildren:kf,filter:Mf,data:Af,enter:Df,exit:Ef,join:Ff,merge:Lf,selection:Hc,order:Uf,sort:Pf,call:Of,nodes:Hf,node:If,size:Wf,empty:zf,each:Rf,attr:Kf,style:jf,property:rc,classed:ac,text:cc,html:mc,raise:_c,lower:wc,append:vc,insert:kc,remove:Dc,clone:Tc,datum:Cc,on:Lc,dispatch:Yc,[Symbol.iterator]:Oc};function Ve(e){return typeof e=="string"?new Te([[document.querySelector(e)]],[document.documentElement]):new Te([[e]],_l)}function Ic(e){let t;for(;t=e.sourceEvent;)e=t;return e}function lo(e,t){if(e=Ic(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}var Wc={value:()=>{}};function Qr(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new sn(n)}function sn(e){this._=e}function zc(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}sn.prototype=Qr.prototype={constructor:sn,on:function(e,t){var n=this._,r=zc(e+"",n),i,o=-1,l=r.length;if(arguments.length<2){for(;++o<l;)if((i=(e=r[o]).type)&&(i=Rc(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<l;)if(i=(e=r[o]).type)n[i]=ao(n[i],e.name,t);else if(t==null)for(i in n)n[i]=ao(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new sn(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};function Rc(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function ao(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=Wc,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}const Sr={capture:!0,passive:!1};function Tr(e){e.preventDefault(),e.stopImmediatePropagation()}function qc(e){var t=e.document.documentElement,n=Ve(e).on("dragstart.drag",Tr,Sr);"onselectstart"in t?n.on("selectstart.drag",Tr,Sr):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Xc(e,t){var n=e.document.documentElement,r=Ve(e).on("dragstart.drag",null);t&&(r.on("click.drag",Tr,Sr),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}var Ft=0,It=0,Ht=0,yl=1e3,Nn,Wt,En=0,st=0,In=0,Jt=typeof performance=="object"&&performance.now?performance:Date,wl=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function jr(){return st||(wl(Vc),st=Jt.now()+In)}function Vc(){st=0}function Fn(){this._call=this._time=this._next=null}Fn.prototype=vl.prototype={constructor:Fn,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?jr():+n)+(t==null?0:+t),!this._next&&Wt!==this&&(Wt?Wt._next=this:Nn=this,Wt=this),this._call=e,this._time=n,Cr()},stop:function(){this._call&&(this._call=null,this._time=1/0,Cr())}};function vl(e,t,n){var r=new Fn;return r.restart(e,t,n),r}function Gc(){jr(),++Ft;for(var e=Nn,t;e;)(t=st-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Ft}function so(){st=(En=Jt.now())+In,Ft=It=0;try{Gc()}finally{Ft=0,Jc(),st=0}}function Bc(){var e=Jt.now(),t=e-En;t>yl&&(In-=t,En=e)}function Jc(){for(var e,t=Nn,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Nn=n);Wt=e,Cr(r)}function Cr(e){if(!Ft){It&&(It=clearTimeout(It));var t=e-st;t>24?(e<1/0&&(It=setTimeout(so,e-Jt.now()-In)),Ht&&(Ht=clearInterval(Ht))):(Ht||(En=Jt.now(),Ht=setInterval(Bc,yl)),Ft=1,wl(so))}}function uo(e,t,n){var r=new Fn;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var Kc=Qr("start","end","cancel","interrupt"),Zc=[],bl=0,fo=1,Ar=2,un=3,co=4,Nr=5,fn=6;function Wn(e,t,n,r,i,o){var l=e.__transition;if(!l)e.__transition={};else if(n in l)return;$c(e,n,{name:t,index:r,group:i,on:Kc,tween:Zc,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:bl})}function ei(e,t){var n=Le(e,t);if(n.state>bl)throw new Error("too late; already scheduled");return n}function Re(e,t){var n=Le(e,t);if(n.state>un)throw new Error("too late; already running");return n}function Le(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function $c(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=vl(o,0,n.time);function o(u){n.state=fo,n.timer.restart(l,n.delay,n.time),n.delay<=u&&l(u-n.delay)}function l(u){var f,c,h,g;if(n.state!==fo)return a();for(f in r)if(g=r[f],g.name===n.name){if(g.state===un)return uo(l);g.state===co?(g.state=fn,g.timer.stop(),g.on.call("interrupt",e,e.__data__,g.index,g.group),delete r[f]):+f<t&&(g.state=fn,g.timer.stop(),g.on.call("cancel",e,e.__data__,g.index,g.group),delete r[f])}if(uo(function(){n.state===un&&(n.state=co,n.timer.restart(s,n.delay,n.time),s(u))}),n.state=Ar,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Ar){for(n.state=un,i=new Array(h=n.tween.length),f=0,c=-1;f<h;++f)(g=n.tween[f].value.call(e,e.__data__,n.index,n.group))&&(i[++c]=g);i.length=c+1}}function s(u){for(var f=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(a),n.state=Nr,1),c=-1,h=i.length;++c<h;)i[c].call(e,f);n.state===Nr&&(n.on.call("end",e,e.__data__,n.index,n.group),a())}function a(){n.state=fn,n.timer.stop(),delete r[t];for(var u in r)return;delete e.__transition}}function Er(e,t){var n=e.__transition,r,i,o=!0,l;if(n){t=t==null?null:t+"";for(l in n){if((r=n[l]).name!==t){o=!1;continue}i=r.state>Ar&&r.state<Nr,r.state=fn,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[l]}o&&delete e.__transition}}function Qc(e){return this.each(function(){Er(this,e)})}function jc(e,t){var n,r;return function(){var i=Re(this,e),o=i.tween;if(o!==n){r=n=o;for(var l=0,s=r.length;l<s;++l)if(r[l].name===t){r=r.slice(),r.splice(l,1);break}}i.tween=r}}function eh(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=Re(this,e),l=o.tween;if(l!==r){i=(r=l).slice();for(var s={name:t,value:n},a=0,u=i.length;a<u;++a)if(i[a].name===t){i[a]=s;break}a===u&&i.push(s)}o.tween=i}}function th(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Le(this.node(),n).tween,i=0,o=r.length,l;i<o;++i)if((l=r[i]).name===e)return l.value;return null}return this.each((t==null?jc:eh)(n,e,t))}function ti(e,t,n){var r=e._id;return e.each(function(){var i=Re(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return Le(i,r).value[t]}}function kl(e,t){var n;return(typeof t=="number"?Ee:t instanceof lt?vn:(n=lt(t))?(t=n,vn):Ho)(e,t)}function nh(e){return function(){this.removeAttribute(e)}}function rh(e){return function(){this.removeAttributeNS(e.space,e.local)}}function ih(e,t,n){var r,i=n+"",o;return function(){var l=this.getAttribute(e);return l===i?null:l===r?o:o=t(r=l,n)}}function oh(e,t,n){var r,i=n+"",o;return function(){var l=this.getAttributeNS(e.space,e.local);return l===i?null:l===r?o:o=t(r=l,n)}}function lh(e,t,n){var r,i,o;return function(){var l,s=n(this),a;return s==null?void this.removeAttribute(e):(l=this.getAttribute(e),a=s+"",l===a?null:l===r&&a===i?o:(i=a,o=t(r=l,s)))}}function ah(e,t,n){var r,i,o;return function(){var l,s=n(this),a;return s==null?void this.removeAttributeNS(e.space,e.local):(l=this.getAttributeNS(e.space,e.local),a=s+"",l===a?null:l===r&&a===i?o:(i=a,o=t(r=l,s)))}}function sh(e,t){var n=Hn(e),r=n==="transform"?Ha:kl;return this.attrTween(e,typeof t=="function"?(n.local?ah:lh)(n,r,ti(this,"attr."+e,t)):t==null?(n.local?rh:nh)(n):(n.local?oh:ih)(n,r,t))}function uh(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function fh(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function ch(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&fh(e,o)),n}return i._value=t,i}function hh(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&uh(e,o)),n}return i._value=t,i}function gh(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=Hn(e);return this.tween(n,(r.local?ch:hh)(r,t))}function dh(e,t){return function(){ei(this,e).delay=+t.apply(this,arguments)}}function mh(e,t){return t=+t,function(){ei(this,e).delay=t}}function ph(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?dh:mh)(t,e)):Le(this.node(),t).delay}function _h(e,t){return function(){Re(this,e).duration=+t.apply(this,arguments)}}function yh(e,t){return t=+t,function(){Re(this,e).duration=t}}function wh(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?_h:yh)(t,e)):Le(this.node(),t).duration}function vh(e,t){if(typeof t!="function")throw new Error;return function(){Re(this,e).ease=t}}function bh(e){var t=this._id;return arguments.length?this.each(vh(t,e)):Le(this.node(),t).ease}function kh(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Re(this,e).ease=n}}function Mh(e){if(typeof e!="function")throw new Error;return this.each(kh(this._id,e))}function Dh(e){typeof e!="function"&&(e=sl(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],l=o.length,s=r[i]=[],a,u=0;u<l;++u)(a=o[u])&&e.call(a,a.__data__,u,o)&&s.push(a);return new Ze(r,this._parents,this._name,this._id)}function xh(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),l=new Array(r),s=0;s<o;++s)for(var a=t[s],u=n[s],f=a.length,c=l[s]=new Array(f),h,g=0;g<f;++g)(h=a[g]||u[g])&&(c[g]=h);for(;s<r;++s)l[s]=t[s];return new Ze(l,this._parents,this._name,this._id)}function Sh(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Th(e,t,n){var r,i,o=Sh(t)?ei:Re;return function(){var l=o(this,e),s=l.on;s!==r&&(i=(r=s).copy()).on(t,n),l.on=i}}function Ch(e,t){var n=this._id;return arguments.length<2?Le(this.node(),n).on.on(e):this.each(Th(n,e,t))}function Ah(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Nh(){return this.on("end.remove",Ah(this._id))}function Eh(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Zr(e));for(var r=this._groups,i=r.length,o=new Array(i),l=0;l<i;++l)for(var s=r[l],a=s.length,u=o[l]=new Array(a),f,c,h=0;h<a;++h)(f=s[h])&&(c=e.call(f,f.__data__,h,s))&&("__data__"in f&&(c.__data__=f.__data__),u[h]=c,Wn(u[h],t,n,h,u,Le(f,n)));return new Ze(o,this._parents,t,n)}function Fh(e){var t=this._name,n=this._id;typeof e!="function"&&(e=al(e));for(var r=this._groups,i=r.length,o=[],l=[],s=0;s<i;++s)for(var a=r[s],u=a.length,f,c=0;c<u;++c)if(f=a[c]){for(var h=e.call(f,f.__data__,c,a),g,d=Le(f,n),w=0,p=h.length;w<p;++w)(g=h[w])&&Wn(g,t,n,w,h,d);o.push(h),l.push(f)}return new Ze(o,l,t,n)}var Lh=$t.prototype.constructor;function Uh(){return new Lh(this._groups,this._parents)}function Ph(e,t){var n,r,i;return function(){var o=Et(this,e),l=(this.style.removeProperty(e),Et(this,e));return o===l?null:o===n&&l===r?i:i=t(n=o,r=l)}}function Ml(e){return function(){this.style.removeProperty(e)}}function Yh(e,t,n){var r,i=n+"",o;return function(){var l=Et(this,e);return l===i?null:l===r?o:o=t(r=l,n)}}function Oh(e,t,n){var r,i,o;return function(){var l=Et(this,e),s=n(this),a=s+"";return s==null&&(a=s=(this.style.removeProperty(e),Et(this,e))),l===a?null:l===r&&a===i?o:(i=a,o=t(r=l,s))}}function Hh(e,t){var n,r,i,o="style."+t,l="end."+o,s;return function(){var a=Re(this,e),u=a.on,f=a.value[o]==null?s||(s=Ml(t)):void 0;(u!==n||i!==f)&&(r=(n=u).copy()).on(l,i=f),a.on=r}}function Ih(e,t,n){var r=(e+="")=="transform"?Oa:kl;return t==null?this.styleTween(e,Ph(e,r)).on("end.style."+e,Ml(e)):typeof t=="function"?this.styleTween(e,Oh(e,r,ti(this,"style."+e,t))).each(Hh(this._id,e)):this.styleTween(e,Yh(e,r,t),n).on("end.style."+e,null)}function Wh(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function zh(e,t,n){var r,i;function o(){var l=t.apply(this,arguments);return l!==i&&(r=(i=l)&&Wh(e,l,n)),r}return o._value=t,o}function Rh(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,zh(e,t,n??""))}function qh(e){return function(){this.textContent=e}}function Xh(e){return function(){var t=e(this);this.textContent=t??""}}function Vh(e){return this.tween("text",typeof e=="function"?Xh(ti(this,"text",e)):qh(e==null?"":e+""))}function Gh(e){return function(t){this.textContent=e.call(this,t)}}function Bh(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&Gh(i)),t}return r._value=e,r}function Jh(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Bh(e))}function Kh(){for(var e=this._name,t=this._id,n=Dl(),r=this._groups,i=r.length,o=0;o<i;++o)for(var l=r[o],s=l.length,a,u=0;u<s;++u)if(a=l[u]){var f=Le(a,t);Wn(a,e,n,u,l,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new Ze(r,this._parents,e,n)}function Zh(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(o,l){var s={value:l},a={value:function(){--i===0&&o()}};n.each(function(){var u=Re(this,r),f=u.on;f!==e&&(t=(e=f).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(a)),u.on=t}),i===0&&o()})}var $h=0;function Ze(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Dl(){return++$h}var qe=$t.prototype;Ze.prototype={constructor:Ze,select:Eh,selectAll:Fh,selectChild:qe.selectChild,selectChildren:qe.selectChildren,filter:Dh,merge:xh,selection:Uh,transition:Kh,call:qe.call,nodes:qe.nodes,node:qe.node,size:qe.size,empty:qe.empty,each:qe.each,on:Ch,attr:sh,attrTween:gh,style:Ih,styleTween:Rh,text:Vh,textTween:Jh,remove:Nh,tween:th,delay:ph,duration:wh,ease:bh,easeVarying:Mh,end:Zh,[Symbol.iterator]:qe[Symbol.iterator]};function Qh(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var jh={time:null,delay:0,duration:250,ease:Qh};function e0(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function t0(e){var t,n;e instanceof Ze?(t=e._id,e=e._name):(t=Dl(),(n=jh).time=jr(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var l=r[o],s=l.length,a,u=0;u<s;++u)(a=l[u])&&Wn(a,e,t,u,l,n||e0(a,t));return new Ze(r,this._parents,e,t)}$t.prototype.interrupt=Qc;$t.prototype.transition=t0;const rr=e=>()=>e;function n0(e,{sourceEvent:t,target:n,selection:r,mode:i,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:o}})}function r0(e){e.stopImmediatePropagation()}function ir(e){e.preventDefault(),e.stopImmediatePropagation()}var ho={name:"drag"},or={name:"space"},gt={name:"handle"},dt={name:"center"};const{abs:go,max:we,min:ve}=Math;function mo(e){return[+e[0],+e[1]]}function po(e){return[mo(e[0]),mo(e[1])]}var cn={name:"x",handles:["w","e"].map(Ln),input:function(e,t){return e==null?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},lr={name:"y",handles:["n","s"].map(Ln),input:function(e,t){return e==null?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},Xe={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},_o={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},yo={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},i0={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},o0={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function Ln(e){return{type:e}}function l0(e){return!e.ctrlKey&&!e.button}function a0(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function s0(){return navigator.maxTouchPoints||"ontouchstart"in this}function ar(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function u0(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function f0(){return c0(cn)}function c0(e){var t=a0,n=l0,r=s0,i=!0,o=Qr("start","brush","end"),l=6,s;function a(p){var y=p.property("__brush",w).selectAll(".overlay").data([Ln("overlay")]);y.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Xe.overlay).merge(y).each(function(){var _=ar(this).extent;Ve(this).attr("x",_[0][0]).attr("y",_[0][1]).attr("width",_[1][0]-_[0][0]).attr("height",_[1][1]-_[0][1])}),p.selectAll(".selection").data([Ln("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Xe.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var k=p.selectAll(".handle").data(e.handles,function(_){return _.type});k.exit().remove(),k.enter().append("rect").attr("class",function(_){return"handle handle--"+_.type}).attr("cursor",function(_){return Xe[_.type]}),p.each(u).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",h).filter(r).on("touchstart.brush",h).on("touchmove.brush",g).on("touchend.brush touchcancel.brush",d).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}a.move=function(p,y,k){p.tween?p.on("start.brush",function(_){f(this,arguments).beforestart().start(_)}).on("interrupt.brush end.brush",function(_){f(this,arguments).end(_)}).tween("brush",function(){var _=this,x=_.__brush,M=f(_,arguments),v=x.selection,S=e.input(typeof y=="function"?y.apply(this,arguments):y,x.extent),Y=Yn(v,S);function q(L){x.selection=L===1&&S===null?null:Y(L),u.call(_),M.brush()}return v!==null&&S!==null?q:q(1)}):p.each(function(){var _=this,x=arguments,M=_.__brush,v=e.input(typeof y=="function"?y.apply(_,x):y,M.extent),S=f(_,x).beforestart();Er(_),M.selection=v===null?null:v,u.call(_),S.start(k).brush(k).end(k)})},a.clear=function(p,y){a.move(p,null,y)};function u(){var p=Ve(this),y=ar(this).selection;y?(p.selectAll(".selection").style("display",null).attr("x",y[0][0]).attr("y",y[0][1]).attr("width",y[1][0]-y[0][0]).attr("height",y[1][1]-y[0][1]),p.selectAll(".handle").style("display",null).attr("x",function(k){return k.type[k.type.length-1]==="e"?y[1][0]-l/2:y[0][0]-l/2}).attr("y",function(k){return k.type[0]==="s"?y[1][1]-l/2:y[0][1]-l/2}).attr("width",function(k){return k.type==="n"||k.type==="s"?y[1][0]-y[0][0]+l:l}).attr("height",function(k){return k.type==="e"||k.type==="w"?y[1][1]-y[0][1]+l:l})):p.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function f(p,y,k){var _=p.__brush.emitter;return _&&(!k||!_.clean)?_:new c(p,y,k)}function c(p,y,k){this.that=p,this.args=y,this.state=p.__brush,this.active=0,this.clean=k}c.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(p,y){return this.starting?(this.starting=!1,this.emit("start",p,y)):this.emit("brush",p),this},brush:function(p,y){return this.emit("brush",p,y),this},end:function(p,y){return--this.active===0&&(delete this.state.emitter,this.emit("end",p,y)),this},emit:function(p,y,k){var _=Ve(this.that).datum();o.call(p,this.that,new n0(p,{sourceEvent:y,target:a,selection:e.output(this.state.selection),mode:k,dispatch:o}),_)}};function h(p){if(s&&!p.touches||!n.apply(this,arguments))return;var y=this,k=p.target.__data__.type,_=(i&&p.metaKey?k="overlay":k)==="selection"?ho:i&&p.altKey?dt:gt,x=e===lr?null:i0[k],M=e===cn?null:o0[k],v=ar(y),S=v.extent,Y=v.selection,q=S[0][0],L,T,J=S[0][1],A,I,z=S[1][0],b,C,G=S[1][1],K,Z,$=0,O=0,F,te=x&&M&&i&&p.shiftKey,ie,oe,j=Array.from(p.touches||[p],P=>{const se=P.identifier;return P=lo(P,y),P.point0=P.slice(),P.identifier=se,P});Er(y);var _e=f(y,arguments,!0).beforestart();if(k==="overlay"){Y&&(F=!0);const P=[j[0],j[1]||j[0]];v.selection=Y=[[L=e===lr?q:ve(P[0][0],P[1][0]),A=e===cn?J:ve(P[0][1],P[1][1])],[b=e===lr?z:we(P[0][0],P[1][0]),K=e===cn?G:we(P[0][1],P[1][1])]],j.length>1&&ne(p)}else L=Y[0][0],A=Y[0][1],b=Y[1][0],K=Y[1][1];T=L,I=A,C=b,Z=K;var N=Ve(y).attr("pointer-events","none"),H=N.selectAll(".overlay").attr("cursor",Xe[k]);if(p.touches)_e.moved=D,_e.ended=B;else{var V=Ve(p.view).on("mousemove.brush",D,!0).on("mouseup.brush",B,!0);i&&V.on("keydown.brush",Q,!0).on("keyup.brush",ge,!0),qc(p.view)}u.call(y),_e.start(p,_.name);function D(P){for(const se of P.changedTouches||[P])for(const Ne of j)Ne.identifier===se.identifier&&(Ne.cur=lo(se,y));if(te&&!ie&&!oe&&j.length===1){const se=j[0];go(se.cur[0]-se[0])>go(se.cur[1]-se[1])?oe=!0:ie=!0}for(const se of j)se.cur&&(se[0]=se.cur[0],se[1]=se.cur[1]);F=!0,ir(P),ne(P)}function ne(P){const se=j[0],Ne=se.point0;var me;switch($=se[0]-Ne[0],O=se[1]-Ne[1],_){case or:case ho:{x&&($=we(q-L,ve(z-b,$)),T=L+$,C=b+$),M&&(O=we(J-A,ve(G-K,O)),I=A+O,Z=K+O);break}case gt:{j[1]?(x&&(T=we(q,ve(z,j[0][0])),C=we(q,ve(z,j[1][0])),x=1),M&&(I=we(J,ve(G,j[0][1])),Z=we(J,ve(G,j[1][1])),M=1)):(x<0?($=we(q-L,ve(z-L,$)),T=L+$,C=b):x>0&&($=we(q-b,ve(z-b,$)),T=L,C=b+$),M<0?(O=we(J-A,ve(G-A,O)),I=A+O,Z=K):M>0&&(O=we(J-K,ve(G-K,O)),I=A,Z=K+O));break}case dt:{x&&(T=we(q,ve(z,L-$*x)),C=we(q,ve(z,b+$*x))),M&&(I=we(J,ve(G,A-O*M)),Z=we(J,ve(G,K+O*M)));break}}C<T&&(x*=-1,me=L,L=b,b=me,me=T,T=C,C=me,k in _o&&H.attr("cursor",Xe[k=_o[k]])),Z<I&&(M*=-1,me=A,A=K,K=me,me=I,I=Z,Z=me,k in yo&&H.attr("cursor",Xe[k=yo[k]])),v.selection&&(Y=v.selection),ie&&(T=Y[0][0],C=Y[1][0]),oe&&(I=Y[0][1],Z=Y[1][1]),(Y[0][0]!==T||Y[0][1]!==I||Y[1][0]!==C||Y[1][1]!==Z)&&(v.selection=[[T,I],[C,Z]],u.call(y),_e.brush(P,_.name))}function B(P){if(r0(P),P.touches){if(P.touches.length)return;s&&clearTimeout(s),s=setTimeout(function(){s=null},500)}else Xc(P.view,F),V.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);N.attr("pointer-events","all"),H.attr("cursor",Xe.overlay),v.selection&&(Y=v.selection),u0(Y)&&(v.selection=null,u.call(y)),_e.end(P,_.name)}function Q(P){switch(P.keyCode){case 16:{te=x&&M;break}case 18:{_===gt&&(x&&(b=C-$*x,L=T+$*x),M&&(K=Z-O*M,A=I+O*M),_=dt,ne(P));break}case 32:{(_===gt||_===dt)&&(x<0?b=C-$:x>0&&(L=T-$),M<0?K=Z-O:M>0&&(A=I-O),_=or,H.attr("cursor",Xe.selection),ne(P));break}default:return}ir(P)}function ge(P){switch(P.keyCode){case 16:{te&&(ie=oe=te=!1,ne(P));break}case 18:{_===dt&&(x<0?b=C:x>0&&(L=T),M<0?K=Z:M>0&&(A=I),_=gt,ne(P));break}case 32:{_===or&&(P.altKey?(x&&(b=C-$*x,L=T+$*x),M&&(K=Z-O*M,A=I+O*M),_=dt):(x<0?b=C:x>0&&(L=T),M<0?K=Z:M>0&&(A=I),_=gt),H.attr("cursor",Xe[k]),ne(P));break}default:return}ir(P)}}function g(p){f(this,arguments).moved(p)}function d(p){f(this,arguments).ended(p)}function w(){var p=this.__brush||{selection:null};return p.extent=po(t.apply(this,arguments)),p.dim=e,p}return a.extent=function(p){return arguments.length?(t=typeof p=="function"?p:rr(po(p)),a):t},a.filter=function(p){return arguments.length?(n=typeof p=="function"?p:rr(!!p),a):n},a.touchable=function(p){return arguments.length?(r=typeof p=="function"?p:rr(!!p),a):r},a.handleSize=function(p){return arguments.length?(l=+p,a):l},a.keyModifiers=function(p){return arguments.length?(i=!!p,a):i},a.on=function(){var p=o.on.apply(o,arguments);return p===o?a:p},a}function h0(e){return e}var sr=1,ur=2,Fr=3,on=4,wo=1e-6;function g0(e){return"translate("+e+",0)"}function d0(e){return"translate(0,"+e+")"}function m0(e){return t=>+e(t)}function p0(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),n=>+e(n)+t}function _0(){return!this.__axis}function y0(e,t){var n=[],r=null,i=null,o=6,l=6,s=3,a=typeof window<"u"&&window.devicePixelRatio>1?0:.5,u=e===sr||e===on?-1:1,f=e===on||e===ur?"x":"y",c=e===sr||e===Fr?g0:d0;function h(g){var d=r??(t.ticks?t.ticks.apply(t,n):t.domain()),w=i??(t.tickFormat?t.tickFormat.apply(t,n):h0),p=Math.max(o,0)+s,y=t.range(),k=+y[0]+a,_=+y[y.length-1]+a,x=(t.bandwidth?p0:m0)(t.copy(),a),M=g.selection?g.selection():g,v=M.selectAll(".domain").data([null]),S=M.selectAll(".tick").data(d,t).order(),Y=S.exit(),q=S.enter().append("g").attr("class","tick"),L=S.select("line"),T=S.select("text");v=v.merge(v.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),S=S.merge(q),L=L.merge(q.append("line").attr("stroke","currentColor").attr(f+"2",u*o)),T=T.merge(q.append("text").attr("fill","currentColor").attr(f,u*p).attr("dy",e===sr?"0em":e===Fr?"0.71em":"0.32em")),g!==M&&(v=v.transition(g),S=S.transition(g),L=L.transition(g),T=T.transition(g),Y=Y.transition(g).attr("opacity",wo).attr("transform",function(J){return isFinite(J=x(J))?c(J+a):this.getAttribute("transform")}),q.attr("opacity",wo).attr("transform",function(J){var A=this.parentNode.__axis;return c((A&&isFinite(A=A(J))?A:x(J))+a)})),Y.remove(),v.attr("d",e===on||e===ur?l?"M"+u*l+","+k+"H"+a+"V"+_+"H"+u*l:"M"+a+","+k+"V"+_:l?"M"+k+","+u*l+"V"+a+"H"+_+"V"+u*l:"M"+k+","+a+"H"+_),S.attr("opacity",1).attr("transform",function(J){return c(x(J)+a)}),L.attr(f+"2",u*o),T.attr(f,u*p).text(w),M.filter(_0).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===ur?"start":e===on?"end":"middle"),M.each(function(){this.__axis=x})}return h.scale=function(g){return arguments.length?(t=g,h):t},h.ticks=function(){return n=Array.from(arguments),h},h.tickArguments=function(g){return arguments.length?(n=g==null?[]:Array.from(g),h):n.slice()},h.tickValues=function(g){return arguments.length?(r=g==null?null:Array.from(g),h):r&&r.slice()},h.tickFormat=function(g){return arguments.length?(i=g,h):i},h.tickSize=function(g){return arguments.length?(o=l=+g,h):o},h.tickSizeInner=function(g){return arguments.length?(o=+g,h):o},h.tickSizeOuter=function(g){return arguments.length?(l=+g,h):l},h.tickPadding=function(g){return arguments.length?(s=+g,h):s},h.offset=function(g){return arguments.length?(a=+g,h):a},h}function w0(e){return y0(Fr,e)}function v0(e){let t;return{c(){t=X("div"),t.innerHTML="",m(t,"class","timeslider-container svelte-rv4t1k")},m(n,r){R(n,t,r),e[6](t)},p:re,i:re,o:re,d(n){n&&W(t),e[6](null)}}}function b0(e,t){const n=Math.abs(t-e),r=Math.ceil(n/(1e3*60*60*24));return r>365?"monthly":r>90?"weekly":r>30?"daily":"hourly"}function vo(e){return e.toISOString().split("T")[0]}function k0(e,t,n){let{startDate:r=null}=t,{endDate:i=null}=t,{height:o=60}=t,{margin:l={top:10,right:40,bottom:30,left:40}}=t;const s=Wl();let a,u,f,c,h,g;Pn(()=>{if(g)return d(),()=>{}});function d(){h=g.clientWidth-l.left-l.right;const _=new Date("2022-01-01"),x=new Date("2024-12-31"),M=[];let v=new Date(_);for(;v<=x;)M.push(new Date(v)),v.setMonth(v.getMonth()+1);r||n(1,r="2022-01-01"),i||n(2,i="2024-09-31");const S=r instanceof Date?r:new Date(r),Y=i instanceof Date?i:new Date(i);f=Jr().domain(ta(M)).range([0,h]),n(5,a=Ve(g).append("svg").attr("width",h+l.left+l.right).attr("height",o+l.top+l.bottom).append("g").attr("transform",`translate(${l.left},${l.top})`)),c=w0(f).tickFormat(Br("%b %Y")).ticks(h>600?10:5),a.append("g").attr("class","x-axis").attr("transform",`translate(0,${o-l.bottom})`).call(c),a.selectAll(".x-axis path, .x-axis line").style("stroke","#000").style("shape-rendering","crispEdges"),a.selectAll(".x-axis text").style("font-size","10px").style("font-family","Avenir, sans-serif"),u=f0().extent([[0,0],[h,o-l.bottom]]).on("brush",w).on("end",p);const q=a.append("g").attr("class","brush").call(u);q.selectAll(".selection").style("fill","#000").style("fill-opacity",.3).style("stroke","#000").style("stroke-width",2),o-l.bottom,q.selectAll(".handle").style("fill","#000").style("stroke","#000").style("stroke-width",1).attr("rx",3).attr("ry",3),u.move(q,[f(S),f(Y)])}function w(_){if(!_.selection)return;const[x,M]=_.selection,v=f.invert(x),S=f.invert(M);y(v,S,!1)}function p(_){if(!_.selection)return;const[x,M]=_.selection,v=f.invert(x),S=f.invert(M);y(v,S,!0)}function y(_,x,M){const v=vo(_),S=vo(x);n(1,r=v),n(2,i=S);const Y=b0(_,x);M&&s("dateRangeChange",{startDate:v,endDate:S,aggregationLevel:Y})}function k(_){Oe[_?"unshift":"push"](()=>{g=_,n(0,g)})}return e.$$set=_=>{"startDate"in _&&n(1,r=_.startDate),"endDate"in _&&n(2,i=_.endDate),"height"in _&&n(3,o=_.height),"margin"in _&&n(4,l=_.margin)},e.$$.update=()=>{e.$$.dirty&33&&g&&g.clientWidth>0&&a&&(Ve(g).selectAll("*").remove(),d())},[g,r,i,o,l,a,k]}class M0 extends Qe{constructor(t){super(),$e(this,t,k0,v0,ze,{startDate:1,endDate:2,height:3,margin:4})}}function bo(e,t,n){const r=e.slice();return r[5]=t[n].color,r[6]=t[n].text,r[7]=t[n].shape!==void 0?t[n].shape:"circle",r}function ko(e){let t,n;return{c(){t=X("h3"),n=de(e[2]),Ye(t,"margin","5px 20px")},m(r,i){R(r,t,i),E(t,n)},p(r,i){i&4&&xe(n,r[2])},d(r){r&&W(t)}}}function Mo(e){let t,n,r,i,o,l=e[6]+"",s,a,u,f,c;function h(...g){return e[3](e[6],...g)}return{c(){t=X("div"),n=X("div"),i=ae(),o=X("span"),s=de(l),a=ae(),m(n,"class",r="color-indicator "+(e[7]==="circle"?"shape-circle":"shape-rect")+" svelte-1sge84g"),Ye(n,"background-color",e[5]),m(t,"class",u="legend-item "+(e[0]===e[6]?"selected":"")+" svelte-1sge84g")},m(g,d){R(g,t,d),E(t,n),E(t,i),E(t,o),E(o,s),E(t,a),f||(c=[Ue(t,"click",h),Ue(t,"dblclick",e[4])],f=!0)},p(g,d){e=g,d&2&&r!==(r="color-indicator "+(e[7]==="circle"?"shape-circle":"shape-rect")+" svelte-1sge84g")&&m(n,"class",r),d&2&&Ye(n,"background-color",e[5]),d&2&&l!==(l=e[6]+"")&&xe(s,l),d&3&&u!==(u="legend-item "+(e[0]===e[6]?"selected":"")+" svelte-1sge84g")&&m(t,"class",u)},d(g){g&&W(t),f=!1,We(c)}}}function D0(e){let t,n,r=e[2]&&ko(e),i=be(e[1]),o=[];for(let l=0;l<i.length;l+=1)o[l]=Mo(bo(e,i,l));return{c(){r&&r.c(),t=ae(),n=X("div");for(let l=0;l<o.length;l+=1)o[l].c();m(n,"class","legend-container svelte-1sge84g")},m(l,s){r&&r.m(l,s),R(l,t,s),R(l,n,s);for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(n,null)},p(l,[s]){if(l[2]?r?r.p(l,s):(r=ko(l),r.c(),r.m(t.parentNode,t)):r&&(r.d(1),r=null),s&3){i=be(l[1]);let a;for(a=0;a<i.length;a+=1){const u=bo(l,i,a);o[a]?o[a].p(u,s):(o[a]=Mo(u),o[a].c(),o[a].m(n,null))}for(;a<o.length;a+=1)o[a].d(1);o.length=i.length}},i:re,o:re,d(l){l&&(W(t),W(n)),r&&r.d(l),tt(o,l)}}}function x0(e,t,n){let{legendData:r}=t,{title:i}=t,{clicked:o}=t;const l=(a,u)=>{u.stopImmediatePropagation(),n(0,o=a)},s=a=>{a.stopImmediatePropagation(),n(0,o=null)};return e.$$set=a=>{"legendData"in a&&n(1,r=a.legendData),"title"in a&&n(2,i=a.title),"clicked"in a&&n(0,o=a.clicked)},[o,r,i,l,s]}class fr extends Qe{constructor(t){super(),$e(this,t,x0,D0,ze,{legendData:1,title:2,clicked:0})}}const mt=[];function S0(e,t=re){let n;const r=new Set;function i(s){if(ze(e,s)&&(e=s,n)){const a=!mt.length;for(const u of r)u[1](),mt.push(u,e);if(a){for(let u=0;u<mt.length;u+=2)mt[u][0](mt[u+1]);mt.length=0}}}function o(s){i(s(e))}function l(s,a=re){const u=[s,a];return r.add(u),r.size===1&&(n=t(i,o)||re),s(e),()=>{r.delete(u),r.size===0&&n&&(n(),n=null)}}return{set:i,update:o,subscribe:l}}function Do(e,t,n){const r=e.slice();return r[26]=t[n],r}function T0(e){let t;return{c(){t=X("div"),t.textContent="Loading...",m(t,"class","wrapper svelte-ffcqb3")},m(n,r){R(n,t,r)},p:re,i:re,o:re,d(n){n&&W(t)}}}function C0(e){let t,n,r,i,o,l,s,a,u,f,c,h,g,d,w,p,y,k,_,x,M,v,S,Y,q,L,T,J,A,I,z,b,C,G,K,Z,$,O,F,te,ie,oe,j,_e,N,H,V,D,ne,B=be(e[12]),Q=[];for(let U=0;U<B.length;U+=1)Q[U]=xo(Do(e,B,U));const ge=[N0,A0],P=[];function se(U,ue){return U[5].length>0?0:1}L=se(e),T=P[L]=ge[L](e);const Ne=[F0,E0],me=[];function Qt(U,ue){return U[6].length>0?0:1}I=Qt(e),z=me[I]=Ne[I](e),G=new M0({props:{startDate:e[2],endDate:e[3]}}),G.$on("dateRangeChange",e[14]);function xl(U){e[20](U)}let ni={legendData:e[11],title:"Renewables"};e[8]!==void 0&&(ni.clicked=e[8]),F=new fr({props:ni}),Oe.push(()=>qt(F,"clicked",xl));function Sl(U){e[21](U)}let ri={legendData:e[10],title:"Non-renewables"};e[8]!==void 0&&(ri.clicked=e[8]),oe=new fr({props:ri}),Oe.push(()=>qt(oe,"clicked",Sl));function Tl(U){e[22](U)}let ii={legendData:e[9],title:""};return e[8]!==void 0&&(ii.clicked=e[8]),N=new fr({props:ii}),Oe.push(()=>qt(N,"clicked",Tl)),{c(){t=X("div"),n=X("div"),n.innerHTML="",r=ae(),i=X("div"),o=X("div"),l=X("button"),s=de("JP"),u=ae(),f=X("span"),f.textContent="|",c=ae(),h=X("button"),g=de("English"),w=ae(),p=X("div"),y=X("button"),y.textContent="Download CSV",k=ae(),_=X("div"),x=X("select");for(let U=0;U<Q.length;U+=1)Q[U].c();M=ae(),v=X("span"),S=ae(),Y=X("div"),q=X("div"),T.c(),J=ae(),A=X("div"),z.c(),b=ae(),C=X("div"),Se(G.$$.fragment),K=ae(),Z=X("div"),$=X("div"),$.innerHTML='<span style="font-size: 0.7em; margin-left: 20px;">Click on a legend item to highlight the fuel source. Double-click on any item to un-highlight.</span>',O=ae(),Se(F.$$.fragment),ie=ae(),Se(oe.$$.fragment),_e=ae(),Se(N.$$.fragment),m(n,"class","title"),Ye(n,"margin-left","20px"),m(l,"class",a="lang-btn "+(e[4]==="jp"?"active":"")+" svelte-ffcqb3"),m(f,"class","divider svelte-ffcqb3"),m(h,"class",d="lang-btn "+(e[4]==="en"?"active":"")+" svelte-ffcqb3"),m(o,"class","language-toggle svelte-ffcqb3"),m(y,"class","download-btn svelte-ffcqb3"),m(p,"class","download-buttons svelte-ffcqb3"),m(x,"class","svelte-ffcqb3"),m(v,"class","caret svelte-ffcqb3"),m(_,"class","dropdown svelte-ffcqb3"),m(i,"class","panel svelte-ffcqb3"),m(t,"class","header svelte-ffcqb3"),m(q,"class","left svelte-ffcqb3"),m(A,"class","right svelte-ffcqb3"),m(Y,"class","wrapper svelte-ffcqb3"),m(C,"class","timeslider-wrapper svelte-ffcqb3"),Ye(Z,"width","90%")},m(U,ue){R(U,t,ue),E(t,n),E(t,r),E(t,i),E(i,o),E(o,l),E(l,s),E(o,u),E(o,f),E(o,c),E(o,h),E(h,g),E(i,w),E(i,p),E(p,y),E(i,k),E(i,_),E(_,x);for(let je=0;je<Q.length;je+=1)Q[je]&&Q[je].m(x,null);si(x,e[1]),E(_,M),E(_,v),R(U,S,ue),R(U,Y,ue),E(Y,q),P[L].m(q,null),E(Y,J),E(Y,A),me[I].m(A,null),R(U,b,ue),R(U,C,ue),ke(G,C,null),R(U,K,ue),R(U,Z,ue),E(Z,$),E(Z,O),ke(F,Z,null),E(Z,ie),ke(oe,Z,null),E(Z,_e),ke(N,Z,null),V=!0,D||(ne=[Ue(l,"click",e[17]),Ue(h,"click",e[18]),Ue(y,"click",e[19]),Ue(x,"change",e[13])],D=!0)},p(U,ue){if((!V||ue&16&&a!==(a="lang-btn "+(U[4]==="jp"?"active":"")+" svelte-ffcqb3"))&&m(l,"class",a),(!V||ue&16&&d!==(d="lang-btn "+(U[4]==="en"?"active":"")+" svelte-ffcqb3"))&&m(h,"class",d),ue&4096){B=be(U[12]);let Ce;for(Ce=0;Ce<B.length;Ce+=1){const oi=Do(U,B,Ce);Q[Ce]?Q[Ce].p(oi,ue):(Q[Ce]=xo(oi),Q[Ce].c(),Q[Ce].m(x,null))}for(;Ce<Q.length;Ce+=1)Q[Ce].d(1);Q.length=B.length}(!V||ue&4098)&&si(x,U[1]);let je=L;L=se(U),L===je?P[L].p(U,ue):(bt(),ce(P[je],1,1,()=>{P[je]=null}),kt(),T=P[L],T?T.p(U,ue):(T=P[L]=ge[L](U),T.c()),le(T,1),T.m(q,null));let zn=I;I=Qt(U),I===zn?me[I].p(U,ue):(bt(),ce(me[zn],1,1,()=>{me[zn]=null}),kt(),z=me[I],z?z.p(U,ue):(z=me[I]=Ne[I](U),z.c()),le(z,1),z.m(A,null));const Rn={};ue&4&&(Rn.startDate=U[2]),ue&8&&(Rn.endDate=U[3]),G.$set(Rn);const qn={};ue&2048&&(qn.legendData=U[11]),!te&&ue&256&&(te=!0,qn.clicked=U[8],Rt(()=>te=!1)),F.$set(qn);const Xn={};ue&1024&&(Xn.legendData=U[10]),!j&&ue&256&&(j=!0,Xn.clicked=U[8],Rt(()=>j=!1)),oe.$set(Xn);const Vn={};ue&512&&(Vn.legendData=U[9]),!H&&ue&256&&(H=!0,Vn.clicked=U[8],Rt(()=>H=!1)),N.$set(Vn)},i(U){V||(le(T),le(z),le(G.$$.fragment,U),le(F.$$.fragment,U),le(oe.$$.fragment,U),le(N.$$.fragment,U),V=!0)},o(U){ce(T),ce(z),ce(G.$$.fragment,U),ce(F.$$.fragment,U),ce(oe.$$.fragment,U),ce(N.$$.fragment,U),V=!1},d(U){U&&(W(t),W(S),W(Y),W(b),W(C),W(K),W(Z)),tt(Q,U),P[L].d(),me[I].d(),Me(G),Me(F),Me(oe),Me(N),D=!1,We(ne)}}}function xo(e){let t,n=e[26]+"",r;return{c(){t=X("option"),r=de(n),t.__value=e[26],Ul(t,t.__value)},m(i,o){R(i,t,o),E(t,r)},p:re,d(i){i&&W(t)}}}function A0(e){let t;return{c(){t=X("div"),t.textContent="Loading..."},m(n,r){R(n,t,r)},p:re,i:re,o:re,d(n){n&&W(t)}}}function N0(e){let t,n;return t=new nf({props:{data:e[5],aggregationLevel:e[7],clickedItem:e[8],currentLang:e[4]}}),{c(){Se(t.$$.fragment)},m(r,i){ke(t,r,i),n=!0},p(r,i){const o={};i&32&&(o.data=r[5]),i&128&&(o.aggregationLevel=r[7]),i&256&&(o.clickedItem=r[8]),i&16&&(o.currentLang=r[4]),t.$set(o)},i(r){n||(le(t.$$.fragment,r),n=!0)},o(r){ce(t.$$.fragment,r),n=!1},d(r){Me(t,r)}}}function E0(e){let t;return{c(){t=X("div"),t.textContent="Loading..."},m(n,r){R(n,t,r)},p:re,i:re,o:re,d(n){n&&W(t)}}}function F0(e){let t,n;return t=new lf({props:{data:e[6],currentLang:e[4]}}),{c(){Se(t.$$.fragment)},m(r,i){ke(t,r,i),n=!0},p(r,i){const o={};i&64&&(o.data=r[6]),i&16&&(o.currentLang=r[4]),t.$set(o)},i(r){n||(le(t.$$.fragment,r),n=!0)},o(r){ce(t.$$.fragment,r),n=!1},d(r){Me(t,r)}}}function L0(e){let t,n,r,i;const o=[C0,T0],l=[];function s(a,u){return a[6].length>0?0:1}return n=s(e),r=l[n]=o[n](e),{c(){t=X("main"),r.c(),m(t,"class","svelte-ffcqb3")},m(a,u){R(a,t,u),l[n].m(t,null),i=!0},p(a,[u]){let f=n;n=s(a),n===f?l[n].p(a,u):(bt(),ce(l[f],1,1,()=>{l[f]=null}),kt(),r=l[n],r?r.p(a,u):(r=l[n]=o[n](a),r.c()),le(r,1),r.m(t,null))},i(a){i||(le(r),i=!0)},o(a){ce(r),i=!1},d(a){a&&W(t),l[n].d()}}}function So(e,t){const n=U0(e),r=new Blob([n],{type:"text/csv;charset=utf-8;"}),i=URL.createObjectURL(r),o=document.createElement("a");o.setAttribute("href",i),o.setAttribute("download",t),o.style.visibility="hidden",document.body.appendChild(o),o.click(),document.body.removeChild(o)}function U0(e){if(!e||e.length===0)return"";const t=Object.keys(e[0]);let n=t.join(",")+`
`;return e.forEach(r=>{const i=t.map(o=>{let l=r[o];return typeof l=="object"&&l!==null&&(l=JSON.stringify(l)),typeof l=="string"&&(l=l.replace(/"/g,'""'),(l.includes(",")||l.includes('"')||l.includes(`
`))&&(l=`"${l}"`)),l}).join(",");n+=i+`
`}),n}function P0(e,t,n){let r,i,o,l;const s=S0("en");let a=[],u=[],f=["japan","tokyo","hokkaido","tohuku","chubu","hokuriku","kansai","chugoku","shikoku","kyushu"],c="japan",h="2024-04-01",g="2024-04-15",d="hourly",w=[],p;function y(A,I){return Qu[I][A]||A}let k;s.subscribe(A=>{n(4,k=A)});async function _(){try{const A=new URLSearchParams({start_date:h,end_date:g,region:c,aggregation:d}),z=await(await fetch(`http://localhost:3000/api/data?${A}`)).json();n(5,a=JSON.parse(z.type.daily)),n(6,u=JSON.parse(z.categorized.monthly)),f.length>0&&!c&&n(1,c=f[0]),a.length>0&&(w=a.map(b=>new Date(b.date)),w.sort((b,C)=>b-C))}catch(A){console.error("Error fetching data:",A)}finally{}}Pn(_);function x(A){n(1,c=A.target.value)}function M(A){const{startDate:I,endDate:z,aggregationLevel:b}=A.detail;n(2,h=I),n(3,g=z),n(7,d=b),console.log(`Date range changed: ${h} to ${g} with aggregation: ${d}`)}function v(A){a.length>0&&So(a,`${c}_daily_${h}_to_${g}.csv`),u.length>0&&So(u,`${c}_monthly_data.csv`)}const S=()=>s.set("jp"),Y=()=>s.set("en"),q=()=>v();function L(A){p=A,n(8,p)}function T(A){p=A,n(8,p)}function J(A){p=A,n(8,p)}return e.$$.update=()=>{e.$$.dirty&16&&n(16,r=Object.entries(Dr).map(([A,I])=>({color:I,shape:A==="demand"||A==="spot_price"?"rect":"circle",text:y(A,k),key:A}))),e.$$.dirty&65536&&n(11,i=r.filter(A=>Ku.indexOf(A.key)!==-1)),e.$$.dirty&65536&&n(10,o=r.filter(A=>Zu.indexOf(A.key)!==-1)),e.$$.dirty&65536&&n(9,l=r.filter(A=>$u.indexOf(A.key)!==-1)),e.$$.dirty&14&&(c||h||g)&&_()},[s,c,h,g,k,a,u,d,p,l,o,i,f,x,M,v,r,S,Y,q,L,T,J]}class Y0 extends Qe{constructor(t){super(),$e(this,t,P0,L0,ze,{currentLanguage:0})}get currentLanguage(){return this.$$.ctx[0]}}new Y0({target:document.getElementById("app")});
